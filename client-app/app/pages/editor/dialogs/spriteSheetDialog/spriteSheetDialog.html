
<app-modal id="spriteSheetModal">
    <div data-transclusion="content">

        <table class="width100">
            <tr>
                <td>
                    {{i18n.get('name')}}
                </td>
                <td>
                    <input data-model="editData.currSpriteSheetInEdit.name"/>
                </td>
                <td rowspan="6">
                    <div style="max-width:60vw;overflow: auto;padding:5px;"
                    >
                        <div class="relative"
                             data-style="{
                                    'background-image':   'url('+spriteSheetUrl+')',
                                    'background-size':    editData.currSpriteSheetInEdit.width+'px '+editData.currSpriteSheetInEdit.height+'px',
                                    'width':              editData.currSpriteSheetInEdit.width+'px',
                                    'height':             editData.currSpriteSheetInEdit.height+'px',
                               }">
                            <div
                                    data-attributes="{title:i}"
                                    data-for="i in utils.range(0,numOfSpriteSheetCells-1)"
                                    data-style="{
                                    'display':        'inline-block',
                                    'left':           editData.currSpriteSheetInEdit.getFramePosX(i)+'px',
                                    'top':            editData.currSpriteSheetInEdit.getFramePosY(i)+'px',
                                    'position':       'absolute',
                                    'text-align':     'left',
                                    'outline':         '1px solid red',
                                    'width':          editData.currSpriteSheetInEdit._frameWidth+'px',
                                    'height':         editData.currSpriteSheetInEdit._frameHeight+'px'
                                }">{{i}}</div>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    {{i18n.get('image')}}
                </td>
                <td>
                    <app-input-file
                            data-state="{
                                onFilePicked: onFilePicked,
                                title: i18n.get('loadImage'),
                                accept: 'image/*'
                            }"
                    ></app-input-file>
                </td>
            </tr>
            <tr>
                <td>
                    {{i18n.get('width')}}
                </td>
                <td>
                    <input type="number" min="1" data-change="revalidate()" data-model="editData.currSpriteSheetInEdit.width">
                </td>
            </tr>
            <tr>
                <td>
                    {{i18n.get('height')}}
                </td>
                <td>
                    <input type="number" min="1" data-change="revalidate()" data-model="editData.currSpriteSheetInEdit.height">
                </td>
            </tr>
            <tr>
                <td>
                    {{i18n.get('numOfFramesH')}}
                </td>
                <td>
                    <input
                            required
                            min="1"
                            max="100"
                            type="number"
                            data-change="refreshNumOfCells()"
                            data-model="editData.currSpriteSheetInEdit.numOfFramesH"/>
                </td>
            </tr>
            <tr>
                <td>
                    {{i18n.get('numOfFramesV')}}
                </td>
                <td>
                    <input
                            required
                            min="1"
                            max="100"
                            type="number"
                            data-change="refreshNumOfCells()"
                            data-input="refreshNumOfCells()"
                            data-keyup="refreshNumOfCells()"
                            data-model="editData.currSpriteSheetInEdit.numOfFramesV"/>
                </td>
            </tr>
        </table>
        <button
                data-click="createOrEditSpriteSheet(editData.currSpriteSheetInEdit)"
                data-disabled="!(form.valid() && editData.currSpriteSheetInEdit.resourcePath)">
            {{editData.currSpriteSheetInEdit.id?i18n.get('edit'):i18n.get('create')}}
        </button>

    </div>
</app-modal>

