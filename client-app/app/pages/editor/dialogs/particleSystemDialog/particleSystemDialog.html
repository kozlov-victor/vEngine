
<app-modal id="particleSystemModal">
    <div data-transclusion="content">

        <table class="width100">
            <tr>
                <td>
                    {{i18n.get('name')}}
                </td>
                <td>

                </td>
                <td>
                    <input
                            required
                            data-model="editData.currParticleSystemInEdit.name"/>
                </td>
            </tr>
            <tr>
                <td rowspan="2">
                    numOfParticlesToEmit
                </td>
                <td>
                    from
                </td>
                <td>
                    <input
                            required
                            type="number"
                            data-model="editData.currParticleSystemInEdit.numOfParticlesToEmit.from"/>
                </td>
            </tr>
            <tr>
                <td>
                    to
                </td>
                <td>
                    <input
                            required
                            type="number"
                            data-model="editData.currParticleSystemInEdit.numOfParticlesToEmit.to"/>
                </td>
            </tr>
            <tr>
                <td rowspan="2">
                    particleVelocity
                </td>
                <td>
                    from
                </td>
                <td>
                    <input
                            required
                            type="number"
                            data-model="editData.currParticleSystemInEdit.particleVelocity.from"/>
                </td>
            </tr>
            <tr>
                <td>
                    to
                </td>
                <td>
                    <input
                            required
                            type="number"
                            data-model="editData.currParticleSystemInEdit.particleVelocity.to"/>
                </td>
            </tr>

            <tr>
                <td rowspan="2">
                    particleLiveTime
                </td>
                <td>
                    from
                </td>
                <td>
                    <input
                            required
                            type="number"
                            data-model="editData.currParticleSystemInEdit.particleLiveTime.from"/>
                </td>
            </tr>
            <tr>
                <td>
                    to
                </td>
                <td>
                    <input
                            required
                            type="number"
                            data-model="editData.currParticleSystemInEdit.particleLiveTime.to"/>
                </td>
            </tr>

            <tr>
                <td>
                    emissionRadius
                </td>
                <td></td>
                <td>
                    <input
                            required
                            type="number"
                            data-model="editData.currParticleSystemInEdit.emissionRadius"/>
                </td>
            </tr>

            <tr>
                <td>
                    particleAngle
                </td>
                <td>
                    from / to
                </td>
                <td>
                    <app-angle-picker
                            data-state="{
                        object:editData.currParticleSystemInEdit.particleAngle,
                        value:'from'
                    }"
                    ></app-angle-picker>
                    <app-angle-picker
                            data-state="{
                        object:editData.currParticleSystemInEdit.particleAngle,
                        value:'to'
                    }"
                    ></app-angle-picker>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    {{i18n.get('gameObject')}}
                </td>
                <td>

                    <table>
                        <tr>
                            <td>
                                <select
                                        required
                                        data-change="onGameObjectSelected(editData.currParticleSystemInEdit.gameObjectProto)"
                                        data-model="editData.currParticleSystemInEdit.gameObjectProto"
                                >
                                    <option>--</option>
                                    <option
                                            data-value="item"
                                            data-for="item in editData.game.repository.getArray('GameObjectProto') track by id">{{item.name}}</option>
                                </select>
                            </td>
                            <td>
                                <div data-style="
                                utils.merge(
                                    utils.getGameObjectCss(editData.currParticleSystemInEdit.gameObjectProto),
                                    {
                                        zoom:utils.calcZoom(editData.currParticleSystemInEdit.gameObjectProto)
                                    }
                                )">
                                </div>
                            </td>
                        </tr>
                    </table>


                </td>
            </tr>

        </table>

        <button
                data-disabled="!form.valid()"
                data-click="createOrEditPs(editData.currParticleSystemInEdit)">
            {{editData.currParticleSystemInEdit.id?i18n.get('edit'):i18n.get('create')}}
        </button>

        <button
                data-disabled="!form.valid()"
                data-click="showPreview()">
            {{i18n.get('preview')}}
        </button>

    </div>
</app-modal>

<app-particle-system-preview-dialog id="particleSystemPreviewDialog"></app-particle-system-preview-dialog>