<app-modal id="frameAnimationModal">

    <div data-transclusion="content">
        <table class="width100">
            <tr>
                <td>
                    {{i18n.get('name')}}
                </td>
                <td>
                    <input
                            required
                            data-model="editData.currFrameAnimationInEdit.name">
                </td>
                <td rowspan="3">
                    <div style="max-height: 80vh;max-width:80vw;overflow: auto;padding: 5px;"
                    >
                        {{
                            editData.currFrameAnimationInEdit._gameObject &&
                            editData.currFrameAnimationInEdit._gameObject.currFrameIndex||0
                        }}

                        <div data-style="
                        utils.merge(
                            utils.getGameObjectCss(editData.currFrameAnimationInEdit._gameObject),
                            {outline:'1px solid blue'}
                        )">
                        </div>

                        <div>
                            <button
                                    data-click="playAnimation()"
                                    data-disabled="!form.valid()" class="inlineBlock withMargin">{{i18n.get('playAnim')}}</button>
                            <button
                                    data-click="stopAnimation()"
                                    data-disabled="!form.valid()" class="inlineBlock withMargin">{{i18n.get('stopAnim')}}</button>
                        </div>

                        <div>

                            <button
                                    data-click="previousFrame()"
                                    data-disabled="!form.valid()" class="inlineBlock withMargin"> << </button>

                            <button
                                    data-click="nextFrame()"
                                    data-disabled="!form.valid()" class="inlineBlock withMargin"> >> </button>
                        </div>


                        <div class="relative"
                             data-style="
                              {
                                'background-image':     'url('+editData.projectName+'/'+editData.currFrameAnimationInEdit._gameObject.spriteSheet.getDefaultResourcePath()+')',
                                'width':                editData.currFrameAnimationInEdit._gameObject.spriteSheet.width+'px',
                                'height':               editData.currFrameAnimationInEdit._gameObject.spriteSheet.height+'px'
                              }">
                            <div
                                    data-for="v,i in getLoopArr()"
                                    data-style="{
                                            'display':        'inline-block',
                                            'left':           editData.currFrameAnimationInEdit._gameObject.spriteSheet.getFramePosX(i)+'px',
                                            'top':            editData.currFrameAnimationInEdit._gameObject.spriteSheet.getFramePosY(i)+'px',
                                            'position':       'absolute',
                                            'text-align':     'left',
                                            'outline':        '1px solid red',
                                            'width':          editData.currFrameAnimationInEdit._gameObject.spriteSheet._frameWidth+'px',
                                            'height':         editData.currFrameAnimationInEdit._gameObject.spriteSheet._frameHeight+'px'
                                      }">{{i}}</div>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    {{i18n.get('duration')}}
                </td>
                <td>
                    <input
                            type="number"
                            min="1"
                            required
                            data-model="editData.currFrameAnimationInEdit.duration">
                </td>
            </tr>
            <tr>
                <td>

                    <table>
                        <tr>
                            <td>
                                {{i18n.get('frames')}}
                            </td>
                            <td>
                                <button data-click="setAllIndexes()">{{i18n.get('all')}}</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{i18n.get('from')}}
                            </td>
                            <td>
                                <input
                                        type="number"
                                        data-model="from"
                                        min="0"
                                        data-keyup="setRangeIndexes()">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{i18n.get('to')}}
                            </td>
                            <td>
                                <input
                                        type="number"
                                        min="0"
                                        data-model="to"
                                        data-change="setRangeIndexes()">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                {{i18n.get('step')}}
                            </td>
                            <td>
                                <input
                                        type="number"
                                        min="0"
                                        data-model="step"
                                        data-change="setRangeIndexes()">
                            </td>
                        </tr>
                    </table>

                </td>
                <td>
                   <textarea
                           required
                           data-model="frames">
                   </textarea>
                </td>
            </tr>
        </table>
        <button
                data-click="createOrEditFrameAnimation()"
                data-disabled="!form.valid()">
            {{editData.currFrameAnimationInEdit.id?i18n.get('edit'):i18n.get('create')}}
        </button>
    </div>

</app-modal>