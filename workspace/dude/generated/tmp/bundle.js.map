{"version":3,"sources":["webpack:///webpack/bootstrap 2caa94c7143f02d153bc","webpack:///./workspace/dude/generated/src/engine/model/baseModel.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/abstractDrawer.ts","webpack:///./workspace/dude/generated/src/engine/core/mathEx.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/base/indexBuffer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/base/shaderProgram.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/base/vertexBuffer.ts","webpack:///./workspace/dude/generated/src/engine/core/geometry/mat4.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/primitives/plane.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/primitives/abstractPrimitive.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/basic/vertex3.vert","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/color/fragment.frag","webpack:///./workspace/dude/generated/src/engine/commonBehaviour/abstract/baseAbstractBehaviour.ts","webpack:///./workspace/dude/generated/src/engine/commonBehaviour/abstract/moveable.ts","webpack:///./workspace/dude/generated/src/engine/core/geometry/rect.ts","webpack:///./workspace/dude/generated/src/engine/core/misc/decorators.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/base/texture.ts","webpack:///./workspace/dude/generated/src/engine/core/tween.ts","webpack:///./workspace/dude/generated/src/engine/model/commonObject.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/gameObjectProto.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/tileMap.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/ui/textField.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/basic/vertex.vert","webpack:///./workspace/dude/generated/src/engine/core/game.ts","webpack:///./workspace/dude/generated/src/app/gameProps.json","webpack:///./workspace/dude/generated/src/app/repository.json","webpack:///./workspace/dude/generated/src/app/scripts/allScripts.js","webpack:///./workspace/dude/generated/src/app/scripts/clamp.js","webpack:///./workspace/dude/generated/src/app/scripts/dude.js","webpack:///./workspace/dude/generated/src/app/scripts/ground1.js","webpack:///./workspace/dude/generated/src/app/scripts/mainScene.js","webpack:///./workspace/dude/generated/src/app/scripts/platform.js","webpack:///./workspace/dude/generated/src/app/scripts/tile.js","webpack:///./workspace/dude/generated/src/engine/commonBehaviour/all.ts","webpack:///./workspace/dude/generated/src/engine/commonBehaviour/generic/control2Dir.ts","webpack:///./workspace/dude/generated/src/engine/commonBehaviour/generic/control4Dir.ts","webpack:///./workspace/dude/generated/src/engine/commonBehaviour/generic/draggable.ts","webpack:///./workspace/dude/generated/src/engine/commonBehaviour/generic/move2Dir.ts","webpack:///./workspace/dude/generated/src/engine/commonBehaviour/generic/move4Dir.ts","webpack:///./workspace/dude/generated/src/engine/core/camera.ts","webpack:///./workspace/dude/generated/src/engine/core/control/gamePad.ts","webpack:///./workspace/dude/generated/src/engine/core/control/keyboard.ts","webpack:///./workspace/dude/generated/src/engine/core/control/mouse.ts","webpack:///./workspace/dude/generated/src/engine/core/device.ts","webpack:///./workspace/dude/generated/src/engine/core/geometry/point2d.ts","webpack:///./workspace/dude/generated/src/engine/core/geometry/vec2.ts","webpack:///./workspace/dude/generated/src/engine/core/misc/eventEmitter.ts","webpack:///./workspace/dude/generated/src/engine/core/misc/loadingQueue.ts","webpack:///./workspace/dude/generated/src/engine/core/misc/polyfills.ts","webpack:///./workspace/dude/generated/src/engine/core/physics/arcadeRigidBody.ts","webpack:///./workspace/dude/generated/src/engine/core/physics/collider.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/abstract/abstractRenderer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/rendererFactory.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/base/frameBuffer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/base/matrixStack.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/primitives/circle.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/primitives/line.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/circleDrawer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/colorRectDrawer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/lineDrawer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/modelDrawer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/spriteRectDrawer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/tiledSpriteRectDrawer.ts","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/webGlRenderer.ts","webpack:///./workspace/dude/generated/src/engine/core/repository.ts","webpack:///./workspace/dude/generated/src/engine/model/all.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/commonBehaviour.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/font.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/frameAnimation.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/gameObject.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/layer.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/particleSystem.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/scene.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/sound.ts","webpack:///./workspace/dude/generated/src/engine/model/generic/spriteSheet.ts","webpack:///./workspace/dude/generated/src/index.ts.tpl","webpack:///(webpack)/buildin/global.js","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/basic/vertex2.vert","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/texture/fragment.frag","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/texture/fragment2.frag","webpack:///./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/tiled/fragment.frag"],"names":["BaseModel","game","rigidBody","id","name","width","height","pos","x","y","scale","angle","alpha","layerId","fixedToCamera","rigid","_tweens","_rect","DEBUG","type","_emitter","revalidate","setIndividualBehaviour","Clazz","setCommonBehaviour","onShow","getRect","set","tween","desc","t","push","update","time","forEach","index","completed","splice","clone","opts","constructor","obj","_cloner","fromJSON","toJSON","on","eventName","callBack","trigger","data","updateCloner","cloner","AbstractDrawer","gl","program","uniformCache","posVertexBuffer","posIndexBuffer","texVertexBuffer","bind","currentDrawer","unbind","setUniform","value","exports","isPointInRect","point","rect","overlapTest","a","b","radToDeg","rad","Math","PI","degToRad","deg","random","min","max","tmp","res","unProject","winX","winY","viewProjectionMatrix","viewProjectionInverse","inverse","point3D","multMatrixVec","ease","linear","c","d","easeInQuad","easeOutQuad","easeInOutQuad","IndexBuffer","buffer","createBuffer","dataLength","setData","bufferData","length","bindBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","STATIC_DRAW","getGlBuffer","getBufferLength","compileShader","shaderSource","shaderType","shader","createShader","compiled","getShaderParameter","COMPILE_STATUS","lastError","getShaderInfoLog","deleteShader","createProgram","shaders","attachShader","linkProgram","linked","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","mapType","GL_TABLE","GL_TO_GLSL_TYPES","typeNames","Object","keys","i","tn","extractUniforms","uniforms","totalUniforms","ACTIVE_UNIFORMS","uniformData","getActiveUniform","replace","size","location","getUniformLocation","setter","getUniformSetter","uniform1f","uniform2f","uniform3f","uniform4f","uniform1i","uniform2i","uniform3i","uniform4i","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniform1iv","uniform2iv","uniform3iv","uniform4iv","ShaderProgram","sources","_attrLocationCache","vShader","VERTEX_SHADER","fShader","FRAGMENT_SHADER","getProgram","useProgram","currentProgram","uniform","attrLocationName","ARRAY_BUFFER","attrLocation","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","getItemSize","getItemType","VertexBuffer","bufferItemSize","bufferItemType","itemType","itemSize","Float32Array","attrName","makeIdentity","makeZToWMatrix","fudgeFactor","make2DProjection","depth","ortho","left","right","bottom","top","near","far","lr","bt","nf","out","perspective","fovy","aspect","f","tan","makeTranslation","tx","ty","tz","makeXRotation","angleInRadians","cos","s","sin","makeYRotation","makeZRotation","makeScale","sx","sy","sz","matrixMultiply","r","Array","matrix","inp","m","det","console","error","Error","Plane","vertexArr","indexArr","texCoordArr","AbstractPrimitive","normalArr","BaseAbstractBehaviour","manage","onUpdate","Moveable","gameObject","parameters","dirs","animations","keyWalk","dir","keyIdle","frameAnimations","find","it","stop","stopFrAnimations","_lastDirection","play","go","direction","Rect","Transient","params","target","transient","isPowerOf2","Texture","tex","isPowerOfTwo","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","Uint8Array","setImage","img","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","generateMipmap","texParameteri","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","CLAMP_TO_EDGE","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","getSize","getGlTexture","accessByPath","path","pathArr","split","targetObj","targetKey","lastPath","pop","p","setValByPath","val","getValByPath","Tween","tweenDesc","propsToChange","startedTime","currTime","progressFn","progress","completeFn","complete","easeFnName","tweenTime","normalizeDesc","reuse","newTweenDesc","key","from","to","allPropsMap","keyFrom","keyTo","prp","undefined","curTweenTime","_complete","l","valFrom","valTo","valCurr","_progressFn","reset","isPropNotFit","indexOf","call","preserveNull","isPrimitive","deepCopy","_clonedObjects","window","prototype","toString","len","clonedObject","hasOwnProperty","CommonObject","forceNew","repository","getObject","arr","item","col","el","possiblePrimitive","GameObjectProto","findAll","spriteSheet","_behaviour","commonBehaviour","currFrameIndex","_sprPosX","_sprPosY","_currFrameAnimation","startFrameAnimationName","_timeCreated","tileOffset","tileRepeat","groupName","_individualBehaviour","setFrameIndex","_frameWidth","_frameHeight","_gameObject","playFrameAnimation","animationName","fr","getFramePosX","getFramePosY","delta","renderer","draw","onCreate","kill","_layer","TileMap","getTileAt","tilePosX","tilePosY","tileIndex","numOfFramesH","getTilesAtRect","result","alreadyCheckedTiles","maxX","maxY","tileInfo","camera","cameraRect","getRectScaled","w","_tilesInScreenX","h","_tilesInScreenY","drawImage","resourcePath","TextField","_chars","text","font","getArray","setFont","setText","rows","currRowIndex","fontContext","symbols","currSymbolInFont","apply","map","o","getText","render","posX","posY","charInCtx","ch","Game","keyboard","gamePad","mouse","gameProps","_lastTime","_currTime","_currentScene","_running","destroyed","gravityConstant","fps","Date","now","_deltaTime","listenTo","collider","getTime","getDeltaTime","runScene","scene","getRenderer","container","allScripts","require","sceneBhScriptName","toUpperCase","substr","layers","gameObjects","scriptName","bhClass","preload","getCurrScene","setCurrScene","requestAnimationFrame","renderError","getError","destroy","cancelFullScreen","ClampBehaviour","DudeBehaviour","Ground1Behaviour","MainSceneBehaviour","PlatformBehaviour","TileBehaviour","onDestroy","followTo","isJustPressed","KEY","UP","GAME_PAD_1","onFloor","vel","addXY","isPressed","A","GAME_PAD_5","color","points","e","screenX","screenY","offsetX","fillRect","camRect","drawRect","drawTiledImage","static","Draggable","Control4Dir","Control2Dir","LEFT","GAME_PAD_AXIS_LEFT","velocity","RIGHT","GAME_PAD_AXIS_RIGHT","isJustReleased","GAME_PAD_AXIS_UP","DOWN","GAME_PAD_AXIS_DOWN","DraggableBehaviour","_getEventId","mX","objectX","mY","objectY","preventDefault","defaultPrevented","pointId","dragStartX","dragStartY","dragStart","Move2Dir","DIRS","Move4Dir","Camera","objFollowTo","lastToleranceTime","_rectScaled","TOLERANCE_TIME","tileMap","sceneWidth","sceneHeight","cameraTween","tileWidth","tileHeight","wDiv2","hDiv2","scaleVal","abs","_updateRect","point00","screenToWorld","pointWH","translate","mScale","point2d","add","addEventListener","log","gamepad","buttons","axes","GamePad","gamepads","navigator","getGamepads","webkitGetGamepads","webkitGamepads","mozGamepads","msGamepads","gp","maxButtons","j","btn","pressed","press","release","axis0","axis1","KEY_JUST_PRESSED","KEY_PRESSED","KEY_JUST_RELEASED","KEY_RELEASED","Keyboard","keyDownListener","keyUpListener","SPACE","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","GAME_PAD_2","GAME_PAD_3","GAME_PAD_4","GAME_PAD_6","GAME_PAD_7","GAME_PAD_8","isReleased","canceled","code","keyCode","removeEventListener","Mouse","objectsCaptured","currPoint","resolveScreenPoint","rectScaled","clientX","clientY","identifier","triggerEvent","isMouseDown","g","exit","layer","resolveClick","resolveMouseMove","lastMouseDownObject","object","resolveMouseUp","resolveDoubleClick","ontouchstart","touches","onmousedown","button","ontouchend","ontouchcancel","changedTouches","onmouseup","ontouchmove","onmousemove","ondblclick","evtName","isCocoonJS","Device","devicePixelRatio","isTouch","Point2d","another","Vec2","dotProduct","crossProduct","setXY","multToScalar","scalar","mutateOrigin","divByScalar","plus","minus","getLength","sqrt","lengthSquared","normalize","setLength","_angle","getAngle","atan2","getAngleBetween","that","acos","setAngle","angleBetween","v1","v2","normalBetween","v","distance","distanceSquared","EventEmitter","events","_on","eventNameOrList","es","Queue","tasksResolved","tasks","tasksProgressById","onResolved","onProgress","calcProgress","sum","taskId","addTask","taskFn","progressTask","resolveTask","start","remove","callback","webkitRequestAnimationFrame","setTimeout","cancelAnimationFrame","global","clearTimeout","predicate","TypeError","list","thisArg","arguments","ArcadeRigidBody","deltaX","deltaY","expectedY","moveBy","Collider","player","dX","dY","rigidObjects","getAllGameObjects","concat","playerRect","collidedByX","collidedByY","obstacle","obstacleRect","pathToTop","pathToBottom","pathToLeft","pathToRight","minPath","moveTo","newX","newY","pRect","collided","some","AbstractRenderer","renderableCache","debugTextField","fullScreenSize","scaleFactor","innerWidth","innerHeight","onResize","canvasRatio","windowRatio","style","marginTop","requestFullScreen","element","mozRequestFullScreen","webkitRequestFullScreen","document","mozCancelFullScreen","webkitCancelFullScreen","beginFrameBuffer","flipFrameBuffer","_render","registerResize","textField","slice","txt","JSON","stringify","loadTextureInfo","textureId","info","getTextureInfo","RendererFactory","FrameBuffer","texture","_init","glRenderBuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","glFrameBuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","framebufferRenderbuffer","DEPTH_ATTACHMENT","viewport","getTexture","MatrixStack","stack","restore","save","getCurrentMatrix","setCurrentMatrix","z","rotateZ","rotateY","Circle","Pi2","Line","CircleDrawer","circle","FLOAT","drawArrays","TRIANGLE_FAN","ColorRectDrawer","plane","drawElements","TRIANGLE_STRIP","UNSIGNED_SHORT","LineDrawer","line","LINE_STRIP","ModelDrawer","normalBuffer","model","TRIANGLES","SpriteRectDrawer","TiledSpriteRectDrawer","getCtx","getContext","SCENE_DEPTH","matrixStack","makePositionMatrix","dstX","dstY","dstWidth","dstHeight","viewWidth","viewHeight","zToWMatrix","projectionMatrix","scaleMatrix","translationMatrix","makeTextureMatrix","srcX","srcY","srcWidth","srcHeight","texWidth","texHeight","texScaleMatrix","texTranslationMatrix","WebGlRenderer","createElement","body","appendChild","setAttribute","currTex","circleDrawer","spriteRectDrawer","tiledSpriteRectDrawer","colorRectDrawer","lineDrawer","modelDrawer","frameBuffer","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","renderable","halfV","halfH","texturePath","ONE","offsetY","drawLine","x1","y1","x2","y2","dx","dy","fillCircle","r2","setAlpha","lockRect","unlockRect","clear","clearColor","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","fullScreen","err","NO_ERROR","onLoad","Image","src","onload","models","Repository","_game","addDescription","descriptions","setDescriptions","descs","trace","cache","getFirst","all","addObject","arrays","updateObject","json","findIndex","objInRepo","removeObject","FrameAnimation","SpriteSheet","GameObject","CommonBehaviour","ParticleSystem","Scene","Sound","Font","Layer","description","fontSize","fontFamily","fontColor","_currFrame","frames","duration","_startTime","_timeForOneFrame","repeat","_isRepeat","lastFrIndex","nextFrame","ind","previousFrame","commonBehaviours","noop","gameObjectProto","ownProps","instance","instances","CbClazz","cb","addGameObject","getAllSpriteSheets","dataSet","gObj","deltaTime","mathEx","_particles","numOfParticlesToEmit","particleAngle","particleVelocity","particleLiveTime","emissionRadius","emit","particle","liveTime","useBG","colorBG","_tweenMovies","addTweenMovie","tm","resources","q","ps","fadeIn","fadeOut","fromToVal","printText","substring","_gain","_loop","pause","setGain","numOfFramesV","_numOfFrames","frameIndex","startSceneId","startScene","Function","eval","module"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;kBChEA;;AAMA;;AAJA;;;;AACA;;;;AACA;;;;AACA;;AAGA;;;;AACA;;;;;;;;;;;;IAMqBA,S,WAJpB,2BAAU;AACPC,UAAM,IADC;AAEPC,eAAW;AAFJ,CAAV,C;;;AAUoB;AAUjB,uBAAYD,IAAZ,EAAiB;AAAA;;AAAA,qDACb,wBADa;;AAAA,cAdjBE,EAciB,GAdZ,IAcY;AAAA,cAbjBC,IAaiB,GAbV,IAaU;AAAA,cAZjBC,KAYiB,GAZT,CAYS;AAAA,cAXjBC,MAWiB,GAXR,CAWQ;AAAA,cAVjBC,GAUiB,GAVX,EAACC,GAAE,CAAH,EAAKC,GAAE,CAAP,EAUW;AAAA,cATjBC,KASiB,GATT,EAACF,GAAE,CAAH,EAAKC,GAAE,CAAP,EASS;AAAA,cARjBE,KAQiB,GART,CAQS;AAAA,cAPjBC,KAOiB,GAPT,CAOS;AAAA,cANjBC,OAMiB,GANN,IAMM;AAAA,cALjBC,aAKiB,GALD,KAKC;AAAA,cAJjBC,KAIiB,GAJT,KAIS;AAAA,cAHjBC,OAGiB,GAHP,EAGO;AAAA,cAFjBC,KAEiB,GAFT,mBAAS,CAAT,EAAW,CAAX,CAES;;AAEb,YAAI,CAAAC,IAAS,CAACjB,IAAd,EAAoB,kCACS,MAAKkB,IADd;AAGpB,cAAKlB,IAAL,GAAYA,IAAZ;AACA,cAAKmB,QAAL,GAAgB,4BAAhB;AACA,cAAKlB,SAAL,GAAiB,oCAAjB;AAPa;AAQhB;;wBAEDmB,U,yBAAY,CAAE,C;;wBAEdC,sB,mCAAuBC,K,EAAM,CAAE,C;;wBAE/BC,kB,iCAAoB,CAAE,C;;wBAEtBC,M,qBAAQ,CAAE,C;;wBAEVC,O,sBAAS;AACL,aAAKT,KAAL,CAAWU,GAAX,CAAe,KAAKpB,GAAL,CAASC,CAAxB,EAA0B,KAAKD,GAAL,CAASE,CAAnC,EAAqC,KAAKJ,KAA1C,EAAgD,KAAKC,MAArD;AACA,eAAO,KAAKW,KAAZ;AACH,K;;AAED;;;;;;wBAIAW,K,kBAAMC,I,EAAK;AACP,YAAIC,IAAI,oBAAUD,IAAV,EAAe,IAAf,CAAR;AACA,aAAKb,OAAL,CAAae,IAAb,CAAkBD,CAAlB;AACH,K;;wBAEDE,M,mBAAOC,I,EAAK;AAAA;;AACR,aAAKjB,OAAL,CAAakB,OAAb,CAAqB,UAACJ,CAAD,EAAIK,KAAJ,EAAY;AAC7BL,cAAEE,MAAF,CAASC,IAAT;AACA,gBAAIH,EAAEM,SAAN,EAAiB,OAAKpB,OAAL,CAAaqB,MAAb,CAAoBF,KAApB,EAA0B,CAA1B;AACpB,SAHD;AAIH,K;;wBAEDG,K,kBAAMC,I,EAAK;AACP,YAAIhB,QAAQ,KAAKiB,WAAjB;AACA,YAAIC,MAAM,IAAIlB,KAAJ,CAAU,KAAKtB,IAAf,CAAV;AACAwC,YAAIC,OAAJ,GAAc,IAAd;AACA,eAAOD,IAAIE,QAAJ,CAAa,KAAKC,MAAL,CAAYL,IAAZ,CAAb,EAA+B,IAA/B,CAAP;AACH,K;;wBAEDM,E,eAAGC,S,EAAUC,Q,EAAS;AAClB,aAAK3B,QAAL,CAAcyB,EAAd,CAAiBC,SAAjB,EAA2BC,QAA3B;AACA,eAAO,IAAP;AACH,K;;wBACDC,O,oBAAQF,S,EAAUG,I,EAAK;AACnB,aAAK7B,QAAL,CAAc4B,OAAd,CAAsBF,SAAtB,EAAgCG,IAAhC;AACH,K;;wBAEDC,Y,yBAAaX,I,EAAK;AACd,YAAI,KAAJ,EAAY;AACZ,YAAIY,SAAS,KAAKT,OAAlB;AACA,YAAI,CAACS,MAAL,EAAa;AACbA,eAAOR,QAAP,CAAgB,KAAKC,MAAL,CAAYL,IAAZ,CAAhB;AACAY,eAAOD,YAAP,CAAoBX,IAApB;AACA,eAAO,KAAKG,OAAZ;AACH,K;;;;kBA7EgB1C,S;;;;;;;;;;;;;;;ICdAoD,c;AASjB,4BAAYC,EAAZ,EAAepD,IAAf,EAAoB;AAAA;;AAAA,aANpBqD,OAMoB,GANV,IAMU;AAAA,aALpBC,YAKoB,GALL,EAKK;AAAA,aAJpBC,eAIoB,GAJF,IAIE;AAAA,aAHpBC,cAGoB,GAHH,IAGG;AAAA,aAFpBC,eAEoB,GAFF,IAEE;;AAChB,aAAKL,EAAL,GAAUA,EAAV;AACA,aAAKpD,IAAL,GAAYA,IAAZ;AACH;;6BAED0D,I,mBAAM;AACF,YACIP,eAAeQ,aAAf,KAA+B,IAA/B,IACAR,eAAeQ,aAAf,KAA+B,IAFnC,EAGA;AACIR,2BAAeQ,aAAf,CAA6BC,MAA7B;AACH;AACDT,uBAAeQ,aAAf,GAA+B,IAA/B;AACH,K;;6BAEDC,M,qBAAQ;AACJ,aAAKL,eAAL,CAAqBK,MAArB;AACA,YAAI,KAAKJ,cAAT,EAAyB,KAAKA,cAAL,CAAoBI,MAApB;AACzB,YAAI,KAAKH,eAAT,EAA0B,KAAKA,eAAL,CAAqBG,MAArB;AAC7B,K;;6BAEDC,U,uBAAW1D,I,EAAK2D,K,EAAM;AAClB,YAAI,KAAKR,YAAL,CAAkBnD,IAAlB,MAA0B2D,KAA9B,EAAqC;AACrC,aAAKT,OAAL,CAAaQ,UAAb,CAAwB1D,IAAxB,EAA6B2D,KAA7B;AACA,aAAKR,YAAL,CAAkBnD,IAAlB,IAAwB2D,KAAxB;AACH,K;;;YAhCMH,a,GAAgB,I;kBAFNR,c;;;;;;;;;ACCrB;;;;AACA;;;;;;AAHA;;AAKAY,QAAQC,aAAR,GAAwB,UAACC,KAAD,EAAOC,IAAP,EAAYxD,KAAZ,EAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,WAAOuD,MAAM1D,CAAN,GAAQ2D,KAAK3D,CAAb,IACH0D,MAAM1D,CAAN,GAAS2D,KAAK3D,CAAL,GAAO2D,KAAK9D,KADlB,IAEH6D,MAAMzD,CAAN,GAAQ0D,KAAK1D,CAFV,IAGHyD,MAAMzD,CAAN,GAAS0D,KAAK1D,CAAL,GAAO0D,KAAK7D,MAHzB;AAIH,CAXD;;AAaA0D,QAAQI,WAAR,GAAsB,UAACC,CAAD,EAAIC,CAAJ,EAAS;AAC3B,WAASD,EAAE7D,CAAF,GAAM8D,EAAE9D,CAAF,GAAM8D,EAAEjE,KAAf,IACHgE,EAAE7D,CAAF,GAAM6D,EAAEhE,KAAR,GAAgBiE,EAAE9D,CADf,IAEH6D,EAAE5D,CAAF,GAAM6D,EAAE7D,CAAF,GAAM6D,EAAEhE,MAFX,IAGH+D,EAAE5D,CAAF,GAAM4D,EAAE/D,MAAR,GAAiBgE,EAAE7D,CAHxB;AAIH,CALD;;AAOAuD,QAAQO,QAAR,GAAmB,UAASC,GAAT,EAAa;AAC5B,WAAOA,MAAO,GAAP,GAAaC,KAAKC,EAAzB;AACH,CAFD;;AAIAV,QAAQW,QAAR,GAAmB,UAASC,GAAT,EAAc;AAC7B,WAAOA,MAAOH,KAAKC,EAAZ,GAAiB,GAAxB;AACH,CAFD;;AAIAV,QAAQa,MAAR,GAAiB,UAASC,GAAT,EAAcC,GAAd,EAAkB;AAC/B,QAAID,MAAIC,GAAR,EAAa;AACT,YAAIC,MAAMF,GAAV;AACAA,cAAMC,GAAN;AACAA,cAAMC,GAAN;AACH;AACD,QAAIC,MAAMR,KAAKI,MAAL,MAAiBE,MAAMD,GAAvB,IAA8BA,GAAxC;AACA,QAAIG,MAAIF,GAAR,EAAaE,MAAMF,GAAN,CAAb,KACK,IAAIE,MAAIH,GAAR,EAAaG,MAAMH,GAAN;AAClB,WAAOG,GAAP;AACH,CAVD;;AAYA;;;;AAIAjB,QAAQkB,SAAR,GAAoB,UAACC,IAAD,EAAMC,IAAN,EAAY/E,KAAZ,EAAmBC,MAAnB,EAA2B+E,oBAA3B,EAAkD;AAClE,QAAI7E,IAAI,MAAM2E,IAAN,GAAa9E,KAAb,GAAqB,CAA7B;AACA,QAAII,IAAI,MAAM2E,IAAN,GAAa9E,MAAb,GAAsB,CAA9B;AACA,QAAIgF,wBAAwB,cAAKC,OAAL,CAAaF,oBAAb,CAA5B;;AAEA,QAAIG,UAAU,CAAChF,CAAD,EAAIC,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAd;AACA,QAAIwE,MAAM,cAAKQ,aAAL,CAAmBH,qBAAnB,EAAyCE,OAAzC,CAAV;AACAP,QAAI,CAAJ,IAAS,CAACA,IAAI,CAAJ,IAAO,CAAP,GAAS,GAAV,IAAe5E,KAAxB;AACA4E,QAAI,CAAJ,IAAS,CAACA,IAAI,CAAJ,IAAO,CAAP,GAAS,GAAV,IAAe3E,MAAxB;AACA,WAAO,sBAAY2E,IAAI,CAAJ,CAAZ,EAAmBA,IAAI,CAAJ,CAAnB,CAAP;AACH,CAVD;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIS,OAAO,EAAX;;AAEA;AACAA,KAAKC,MAAL,GAAc,UAAU7D,CAAV,EAAawC,CAAb,EAAgBsB,CAAhB,EAAmBC,CAAnB,EAAsB;AAChC,WAAOD,IAAE9D,CAAF,GAAI+D,CAAJ,GAAQvB,CAAf;AACH,CAFD;;AAIA;AACAoB,KAAKI,UAAL,GAAkB,UAAUhE,CAAV,EAAawC,CAAb,EAAgBsB,CAAhB,EAAmBC,CAAnB,EAAsB;AACpC/D,SAAK+D,CAAL;AACA,WAAOD,IAAE9D,CAAF,GAAIA,CAAJ,GAAQwC,CAAf;AACH,CAHD;;AAKA;AACAoB,KAAKK,WAAL,GAAmB,UAAUjE,CAAV,EAAawC,CAAb,EAAgBsB,CAAhB,EAAmBC,CAAnB,EAAsB;AACrC/D,SAAK+D,CAAL;AACA,WAAO,CAACD,CAAD,GAAK9D,CAAL,IAAQA,IAAE,CAAV,IAAewC,CAAtB;AACH,CAHD;;AAKA;AACAoB,KAAKM,aAAL,GAAqB,UAAUlE,CAAV,EAAawC,CAAb,EAAgBsB,CAAhB,EAAmBC,CAAnB,EAAsB;AACvC/D,SAAK+D,IAAE,CAAP;AACA,QAAI/D,IAAI,CAAR,EAAW,OAAO8D,IAAE,CAAF,GAAI9D,CAAJ,GAAMA,CAAN,GAAUwC,CAAjB;AACXxC;AACA,WAAO,CAAC8D,CAAD,GAAG,CAAH,IAAQ9D,KAAGA,IAAE,CAAL,IAAU,CAAlB,IAAuBwC,CAA9B;AACH,CALD;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAN,QAAQ0B,IAAR,GAAeA,IAAf,C;;;;;;;;;;;;;AC3RA;;IAEqBO,W;AAEjB,yBAAY5C,EAAZ,EAAe;AAAA;;AACX,YAAI,CAAAnC,IAAS,CAACmC,EAAd,EAAkB,MAAM,6FAAN;;AAElB,aAAKA,EAAL,GAAUA,EAAV;AACA,aAAK6C,MAAL,GAAc7C,GAAG8C,YAAH,EAAd;AACA,aAAKC,UAAL,GAAkB,IAAlB;AACH;;0BAEDC,O,oBAAQC,U,EAAW;AACf,YAAI,IAAJ,EAAW;AACP,gBAAI,CAACA,UAAL,EAAiB,MAAM,sDAAN;AACpB;;AAED,YAAMjD,KAAK,KAAKA,EAAhB;;AAEA,aAAK+C,UAAL,GAAkBE,WAAWC,MAA7B;AACAlD,WAAGmD,UAAH,CAAcnD,GAAGoD,oBAAjB,EAAuC,KAAKP,MAA5C;AACA7C,WAAGiD,UAAH,CAAcjD,GAAGoD,oBAAjB,EAAuC,IAAIC,WAAJ,C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AM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,OAAO,qCAAqC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,qCAAqC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,qCAAqC,GAAG,GAAG,sCAAsC,MAAM,sCAAsC,GAAG,GAAG,sCAAsC,MAAM,sCAAsC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,qCAAqC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,qCAAqC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,qCAAqC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,uCAAuC,MAAM,qCAAqC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM,sCAAsC,MAAM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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 77);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2caa94c7143f02d153bc","/*global DEBUG:true*/\n\nimport CommonObject from './commonObject'\nimport Tween from '../core/tween'\nimport EventEmitter from '../core/misc/eventEmitter'\nimport {Transient} from '../core/misc/decorators'\n//import Vec2 from '../core/vec2'\n\nimport ArcadeRigidBody from '../core/physics/arcadeRigidBody'\nimport Rect from \"../core/geometry/rect\";\n\n@Transient({\n    game: true,\n    rigidBody: true\n})\nexport default class BaseModel extends CommonObject {\n\n    id = null;\n    name = null;\n    width = 0;\n    height = 0;\n    pos = {x:0,y:0}; // todo vec2?\n    scale = {x:1,y:1};\n    angle = 0;\n    alpha = 1;\n    layerId =  null;\n    fixedToCamera = false;\n    rigid = false;\n    _tweens = [];\n    _rect = new Rect(0,0);\n\n    constructor(game){\n        super();\n        if (DEBUG && !game) throw (\n            `can not create model '${this.type}': game instance not passed to model constructor`\n        );\n        this.game = game;\n        this._emitter = new EventEmitter();\n        this.rigidBody = new ArcadeRigidBody(this);\n    }\n\n    revalidate(){}\n\n    setIndividualBehaviour(Clazz){}\n\n    setCommonBehaviour(){}\n\n    onShow(){}\n\n    getRect(){\n        this._rect.set(this.pos.x,this.pos.y,this.width,this.height);\n        return this._rect;\n    }\n\n    /**\n     * {target:obj,from:a,to:b,progress:fn,complete:fn,ease:str,time:t}}\n     * @param desc\n     */\n    tween(desc){\n        let t = new Tween(desc,this);\n        this._tweens.push(t);\n    }\n\n    update(time){\n        this._tweens.forEach((t, index)=>{\n            t.update(time);\n            if (t.completed) this._tweens.splice(index,1);\n        });\n    }\n\n    clone(opts){\n        let Clazz = this.constructor;\n        let obj = new Clazz(this.game);\n        obj._cloner = this;\n        return obj.fromJSON(this.toJSON(opts),true);\n    }\n\n    on(eventName,callBack){\n        this._emitter.on(eventName,callBack);\n        return this;\n    }\n    trigger(eventName,data){\n        this._emitter.trigger(eventName,data);\n    }\n\n    updateCloner(opts){\n        if (!DEBUG) return;\n        let cloner = this._cloner;\n        if (!cloner) return;\n        cloner.fromJSON(this.toJSON(opts));\n        cloner.updateCloner(opts);\n        delete this._cloner;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/baseModel.ts","\r\nexport default class AbstractDrawer {\r\n\r\n    static currentDrawer = null;\r\n    program = null;\r\n    uniformCache = {};\r\n    posVertexBuffer = null;\r\n    posIndexBuffer = null;\r\n    texVertexBuffer = null;\r\n\r\n    constructor(gl,game){\r\n        this.gl = gl;\r\n        this.game = game;\r\n    }\r\n\r\n    bind(){\r\n        if (\r\n            AbstractDrawer.currentDrawer!==null &&\r\n            AbstractDrawer.currentDrawer!==this)\r\n        {\r\n            AbstractDrawer.currentDrawer.unbind();\r\n        }\r\n        AbstractDrawer.currentDrawer = this;\r\n    }\r\n\r\n    unbind(){\r\n        this.posVertexBuffer.unbind();\r\n        if (this.posIndexBuffer) this.posIndexBuffer.unbind();\r\n        if (this.texVertexBuffer) this.texVertexBuffer.unbind();\r\n    }\r\n\r\n    setUniform(name,value){\r\n        if (this.uniformCache[name]===value) return;\r\n        this.program.setUniform(name,value);\r\n        this.uniformCache[name]=value;\r\n    }\r\n\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/abstractDrawer.ts","/*global DEBUG:true*/\n\nimport mat4 from './geometry/mat4'\nimport Point2d from \"./geometry/point2d\";\n\nexports.isPointInRect = (point,rect,angle)=> {\n    // if (angle) {\n    //     let vec2 = new Vec2(point.x - rect.x - rect.width/2,point.y - rect.y - rect.height/2);\n    //     vec2.setAngle(vec2.getAngle() - angle);\n    //     point = {x:vec2.getX() + point.x,y:vec2.getY() + point.y};\n    //\n    // }\n    return point.x>rect.x &&\n        point.x<(rect.x+rect.width) &&\n        point.y>rect.y &&\n        point.y<(rect.y+rect.height);\n};\n\nexports.overlapTest = (a, b)=> {\n    return  (a.x < b.x + b.width) &&\n        (a.x + a.width > b.x) &&\n        (a.y < b.y + b.height) &&\n        (a.y + a.height > b.y);\n};\n\nexports.radToDeg = function(rad){\n    return rad *  180 / Math.PI;\n};\n\nexports.degToRad = function(deg) {\n    return deg *  Math.PI / 180;\n};\n\nexports.random = function(min, max){\n    if (min>max) {\n        let tmp = min;\n        min = max;\n        max = tmp;\n    }\n    let res = Math.random() * (max - min) + min;\n    if (res>max) res = max;\n    else if (res<min) res = min;\n    return res;\n};\n\n/**\n * analog of glu unproject function\n * https://github.com/bringhurst/webgl-unproject/blob/master/GLU.js\n */\nexports.unProject = (winX,winY, width, height, viewProjectionMatrix)=>{\n    let x = 2.0 * winX / width - 1;\n    let y = 2.0 * winY / height - 1;\n    let viewProjectionInverse = mat4.inverse(viewProjectionMatrix);\n\n    let point3D = [x, y, 0, 1];\n    let res = mat4.multMatrixVec(viewProjectionInverse,point3D);\n    res[0] = (res[0]/2+0.5)*width;\n    res[1] = (res[1]/2+0.5)*height;\n    return new Point2d(res[0],res[1]);\n};\n\n//\n// exports.getNormalizedVectorFromPoints = function(pointA,pointB) {\n//     let angle = Math.atan2(pointB.y-pointA.y,pointB.x-pointA.x);\n//     return {\n//         x:Math.cos(angle),\n//         y:Math.sin(angle)\n//     }\n// };\n//\nlet ease = {};\n\n// simple linear tweening - no easing, no acceleration\nease.linear = function (t, b, c, d) {\n    return c*t/d + b;\n};\n\n// quadratic easing in - accelerating from zero velocity\nease.easeInQuad = function (t, b, c, d) {\n    t /= d;\n    return c*t*t + b;\n};\n\n// quadratic easing out - decelerating to zero velocity\nease.easeOutQuad = function (t, b, c, d) {\n    t /= d;\n    return -c * t*(t-2) + b;\n};\n\n// quadratic easing in/out - acceleration until halfway, then deceleration\nease.easeInOutQuad = function (t, b, c, d) {\n    t /= d/2;\n    if (t < 1) return c/2*t*t + b;\n    t--;\n    return -c/2 * (t*(t-2) - 1) + b;\n};\n\n// // cubic easing in - accelerating from zero velocity\n// ease.easeInCubic = function (t, b, c, d) {\n//     t /= d;\n//     return c*t*t*t + b;\n// };\n//\n// // cubic easing out - decelerating to zero velocity\n// ease.easeOutCubic = function (t, b, c, d) {\n//     t /= d;\n//     t--;\n//     return c*(t*t*t + 1) + b;\n// };\n//\n// // cubic easing in/out - acceleration until halfway, then deceleration\n// ease.easeInOutCubic = function (t, b, c, d) {\n//     t /= d/2;\n//     if (t < 1) return c/2*t*t*t + b;\n//     t -= 2;\n//     return c/2*(t*t*t + 2) + b;\n// };\n//\n// // quartic easing in - accelerating from zero velocity\n// ease.easeInQuart = function (t, b, c, d) {\n//     t /= d;\n//     return c*t*t*t*t + b;\n// };\n//\n// // quartic easing out - decelerating to zero velocity\n// ease.easeOutQuart = function (t, b, c, d) {\n//     t /= d;\n//     t--;\n//     return -c * (t*t*t*t - 1) + b;\n// };\n//\n// // quartic easing in/out - acceleration until halfway, then deceleration\n// ease.easeInOutQuart = function (t, b, c, d) {\n//     t /= d/2;\n//     if (t < 1) return c/2*t*t*t*t + b;\n//     t -= 2;\n//     return -c/2 * (t*t*t*t - 2) + b;\n// };\n//\n// // quintic easing in - accelerating from zero velocity\n// ease.easeInQuint = function (t, b, c, d) {\n//     t /= d;\n//     return c*t*t*t*t*t + b;\n// };\n//\n// // quintic easing out - decelerating to zero velocity\n// ease.easeOutQuint = function (t, b, c, d) {\n//     t /= d;\n//     t--;\n//     return c*(t*t*t*t*t + 1) + b;\n// };\n//\n// // quintic easing in/out - acceleration until halfway, then deceleration\n// ease.easeInOutQuint = function (t, b, c, d) {\n//     t /= d/2;\n//     if (t < 1) return c/2*t*t*t*t*t + b;\n//     t -= 2;\n//     return c/2*(t*t*t*t*t + 2) + b;\n// };\n//\n//\n// // sinusoidal easing in - accelerating from zero velocity\n// ease.easeInSine = function (t, b, c, d) {\n//     return -c * Math.cos(t/d * (Math.PI/2)) + c + b;\n// };\n//\n//\n//\n// // sinusoidal easing out - decelerating to zero velocity\n// ease.easeOutSine = function (t, b, c, d) {\n//     return c * Math.sin(t/d * (Math.PI/2)) + b;\n// };\n//\n//\n//\n// // sinusoidal easing in/out - accelerating until halfway, then decelerating\n// ease.easeInOutSine = function (t, b, c, d) {\n//     return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\n// };\n//\n// // exponential easing in - accelerating from zero velocity\n// ease.easeInExpo = function (t, b, c, d) {\n//     return c * Math.pow( 2, 10 * (t/d - 1) ) + b;\n// };\n//\n// // exponential easing out - decelerating to zero velocity\n// ease.easeOutExpo = function (t, b, c, d) {\n//     return c * ( -Math.pow( 2, -10 * t/d ) + 1 ) + b;\n// };\n//\n// // exponential easing in/out - accelerating until halfway, then decelerating\n// ease.easeInOutExpo = function (t, b, c, d) {\n//     t /= d/2;\n//     if (t < 1) return c/2 * Math.pow( 2, 10 * (t - 1) ) + b;\n//     t--;\n//     return c/2 * ( -Math.pow( 2, -10 * t) + 2 ) + b;\n// };\n//\n// // circular easing in - accelerating from zero velocity\n// ease.easeInCirc = function (t, b, c, d) {\n//     t /= d;\n//     return -c * (Math.sqrt(1 - t*t) - 1) + b;\n// };\n//\n//\n//\n// // circular easing out - decelerating to zero velocity\n// ease.easeOutCirc = function (t, b, c, d) {\n//     t /= d;\n//     t--;\n//     return c * Math.sqrt(1 - t*t) + b;\n// };\n//\n// // circular easing in/out - acceleration until halfway, then deceleration\n// ease.easeInOutCirc = function (t, b, c, d) {\n//     t /= d/2;\n//     if (t < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;\n//     t -= 2;\n//     return c/2 * (Math.sqrt(1 - t*t) + 1) + b;\n// };\n//\n// ease.easeInElastic = function (t, b, c, d) {\n//     let s=1.70158;let p=0;let a=c;\n//     if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n//     if (a < Math.abs(c)) { a=c; s=p/4; }\n//     else s = p/(2*Math.PI) * Math.asin (c/a);\n//     return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n// };\n//\n// ease.easeOutElastic = function (t, b, c, d) {\n//     let s=1.70158;let p=0;let a=c;\n//     if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n//     if (a < Math.abs(c)) { a=c; s=p/4; }\n//     else s = p/(2*Math.PI) * Math.asin (c/a);\n//     return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n// };\n//\n// ease.easeInOutElastic = function (t, b, c, d) {\n//     let s=1.70158;let p=0;let a=c;\n//     if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);\n//     if (a < Math.abs(c)) { a=c; s=p/4; }\n//     else s = p/(2*Math.PI) * Math.asin (c/a);\n//     if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n//     return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n// };\n//\n// ease.easeInBack = function (t, b, c, d) {\n//     let s = 1.70158;\n//     return c*(t/=d)*t*((s+1)*t - s) + b;\n// };\n//\n// ease.easeOutBack = function (t, b, c, d) {\n//     let s = 1.70158;\n//     return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n// };\n//\n// ease.easeInOutBack = function (t, b, c, d) {\n//     let s = 1.70158;\n//     if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n//     return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n// };\n//\n// ease.easeInBounce = function(t, b, c, d) {\n//     return c - ease.easeOutBounce (d-t, 0, c, d) + b;\n// };\n//\n// ease.easeOutBounce  = function(t, b, c, d){\n//     if ((t/=d) < (1/2.75)) {\n//         return c*(7.5625*t*t) + b;\n//     } else if (t < (2/2.75)) {\n//         return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n//     } else if (t < (2.5/2.75)) {\n//         return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n//     } else {\n//         return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n//     }\n// };\n//\n// ease.easeInOutBounce = function(t, b, c, d) {\n//     if (t < d/2) return ease.easeInBounce(t*2, 0, c, d) * .5 + b;\n//     else return ease.easeOutBounce(t*2-d, 0, c, d) * .5 + c*.5 + b;\n// };\n//\nexports.ease = ease;\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/mathEx.ts","/*global DEBUG:true*/\n\nexport default class IndexBuffer {\n\n    constructor(gl){\n        if (DEBUG && !gl) throw \"can not create IndexBuffer, gl context not passed to constructor, expected: IndexBuffer(gl)\";\n\n        this.gl = gl;\n        this.buffer = gl.createBuffer();\n        this.dataLength = null;\n    }\n\n    setData(bufferData){\n        if (DEBUG) {\n            if (!bufferData) throw 'can not set data to buffer: bufferData not specified';\n        }\n\n        const gl = this.gl;\n\n        this.dataLength = bufferData.length;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(bufferData), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    }\n\n    getGlBuffer(){\n        return this.buffer;\n    }\n\n    bind(){\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n    }\n\n    unbind(){\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n    }\n\n    getBufferLength(){\n        return this.dataLength;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/base/indexBuffer.ts","/*global DEBUG:true*/\n\nconst compileShader = (gl, shaderSource, shaderType)=> {\n    if (DEBUG) {\n        if (!shaderSource) throw `can not compile shader: shader source not specified for type ${shaderType}`;\n    }\n    // Create the shader object\n    let shader = gl.createShader(shaderType);\n\n    // Load the shader source\n    gl.shaderSource(shader, shaderSource);\n\n    // Compile the shader\n    gl.compileShader(shader);\n\n    // Check the compile status\n    let compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (!compiled) {\n        // Something went wrong during compilation; get the error\n        let lastError = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        if (DEBUG) {\n            throw 'Error compiling shader ' + shader + ':' + lastError;\n        } else {\n            throw lastError;\n        }\n\n    }\n\n    return shader;\n};\n\n\nconst createProgram = (gl, shaders)=> {\n    let program = gl.createProgram();\n    shaders.forEach(function(shader) {\n        gl.attachShader(program, shader);\n    });\n    gl.linkProgram(program);\n\n    // Check the link status\n    let linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        // something went wrong with the link\n        let lastError = gl.getProgramInfoLog(program);\n        gl.deleteProgram(program);\n        if (DEBUG) {\n            throw \"Error in program linking:\" + lastError;\n        } else {\n            throw lastError;\n        }\n\n    }\n    return program;\n};\n\nconst mapType = (gl, type)=> {\n\n    let GL_TABLE = null;\n\n    let GL_TO_GLSL_TYPES = {\n        'FLOAT': 'float',\n        'FLOAT_VEC2': 'vec2',\n        'FLOAT_VEC3': 'vec3',\n        'FLOAT_VEC4': 'vec4',\n\n        'INT': 'int',\n        'INT_VEC2': 'ivec2',\n        'INT_VEC3': 'ivec3',\n        'INT_VEC4': 'ivec4',\n\n        'BOOL': 'bool',\n        'BOOL_VEC2': 'bvec2',\n        'BOOL_VEC3': 'bvec3',\n        'BOOL_VEC4': 'bvec4',\n\n        'FLOAT_MAT2': 'mat2',\n        'FLOAT_MAT3': 'mat3',\n        'FLOAT_MAT4': 'mat4',\n\n        'SAMPLER_2D': 'sampler2D'\n    };\n\n    if (!GL_TABLE) {\n        let typeNames = Object.keys(GL_TO_GLSL_TYPES);\n\n        GL_TABLE = {};\n\n        for (let i = 0; i < typeNames.length; ++i) {\n            let tn = typeNames[i];\n            GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];\n        }\n    }\n\n    return GL_TABLE[type];\n};\n\nconst extractUniforms = (gl, program)=> {\n    let uniforms = {};\n\n    let totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    for (let i = 0; i < totalUniforms; i++) {\n        let uniformData = gl.getActiveUniform(program, i);\n        let name = uniformData.name.replace(/\\[.*?]/, \"\");\n        let type = mapType(gl, uniformData.type);\n\n        uniforms[name] = {\n            type: type,\n            size: uniformData.size,\n            name: name,\n            location: gl.getUniformLocation(program, name),\n            setter: getUniformSetter(uniformData.size,type)\n        };\n    }\n\n    return uniforms;\n    \n};\n\n\nconst getUniformSetter = function(size,type){\n    if (size===1) {\n        switch (type) {\n            case 'float':       return  function(gl,location,value) {gl.uniform1f(location, value)};\n            case 'vec2':        return  function(gl,location,value) {gl.uniform2f(location, value[0], value[1])};\n            case 'vec3':        return  function(gl,location,value) {gl.uniform3f(location, value[0], value[1], value[2])};\n            case 'vec4':        return  function(gl,location,value) {gl.uniform4f(location, value[0], value[1], value[2], value[3])};\n            case 'int':         return  function(gl,location,value) {gl.uniform1i(location, value)};\n            case 'ivec2':       return  function(gl,location,value) {gl.uniform2i(location, value[0], value[1])};\n            case 'ivec3':       return  function(gl,location,value) {gl.uniform3i(location, value[0], value[1], value[2])};\n            case 'ivec4':       return  function(gl,location,value) {gl.uniform4i(location, value[0], value[1], value[2], value[3])};\n            case 'bool':        return  function(gl,location,value) {gl.uniform1i(location, value)};\n            case 'bvec2':       return  function(gl,location,value) {gl.uniform2i(location, value[0], value[1])};\n            case 'bvec3':       return  function(gl,location,value) {gl.uniform3i(location, value[0], value[1], value[2])};\n            case 'bvec4':       return  function(gl,location,value) {gl.uniform4i(location, value[0], value[1], value[2], value[3])};\n            case 'mat2':        return  function(gl,location,value) {gl.uniformMatrix2fv(location, false, value)};\n            case 'mat3':        return  function(gl,location,value) {gl.uniformMatrix3fv(location, false, value)};\n            case 'mat4':        return  function(gl,location,value) {gl.uniformMatrix4fv(location, false, value)};\n            case 'sampler2D':   return  function(gl,location,value) {gl.uniform1i(location, value)};\n        }\n    } else {\n        switch (type) {\n            case 'float':       return  function(gl,location,value) {gl.uniform1fv(location, value)};\n            case 'vec2':        return  function(gl,location,value) {gl.uniform2fv(location, value)};\n            case 'vec3':        return  function(gl,location,value) {gl.uniform3fv(location, value)};\n            case 'vec4':        return  function(gl,location,value) {gl.uniform4fv(location, value)};\n            case 'int':         return  function(gl,location,value) {gl.uniform1iv(location, value)};\n            case 'ivec2':       return  function(gl,location,value) {gl.uniform2iv(location, value)};\n            case 'ivec3':       return  function(gl,location,value) {gl.uniform3iv(location, value)};\n            case 'ivec4':       return  function(gl,location,value) {gl.uniform4iv(location, value)};\n            case 'bool':        return  function(gl,location,value) {gl.uniform1iv(location, value)};\n            case 'bvec2':       return  function(gl,location,value) {gl.uniform2iv(location, value)};\n            case 'bvec3':       return  function(gl,location,value) {gl.uniform3iv(location, value)};\n            case 'bvec4':       return  function(gl,location,value) {gl.uniform4iv(location, value)};\n            case 'sampler2D':   return  function(gl,location,value) {gl.uniform1iv(location, value)};\n        }\n    }\n};\n\nexport default class ShaderProgram {\n\n    static currentProgram = null;\n\n    _attrLocationCache = {};\n\n    constructor(gl,sources) {\n        let vShader = compileShader(gl, sources[0], gl.VERTEX_SHADER);\n        let fShader = compileShader(gl, sources[1], gl.FRAGMENT_SHADER);\n        this.program = createProgram(gl, [vShader, fShader]);\n        this.uniforms = extractUniforms(gl, this.program);\n        this.gl = gl;\n    }\n\n    getProgram () {\n        return this.program;\n    }\n\n    bind(){\n        this.gl.useProgram(this.program);\n        ShaderProgram.currentProgram = this;\n    }\n\n    setUniform(name, value) {\n        let uniform = this.uniforms[name];\n        if (DEBUG && !uniform) throw 'no uniform with name ' + name + ' found!';\n        //if (uniformValuesCache[name]===value) return;\n        //this.gl.enableVertexAttribArray(uniform.location);\n        uniform.setter(this.gl, uniform.location, value);\n        //uniformValuesCache[name] = value;\n    }\n\n    bindBuffer(buffer, attrLocationName) { // todo rename param to attrLocationName\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer.getGlBuffer());\n        let attrLocation =\n            this._attrLocationCache[attrLocationName] ||\n            this.gl.getAttribLocation(this.program, attrLocationName);\n\n        if (DEBUG) {\n            if (!attrLocationName) throw \"can not found uniform location: uniformLocationName not defined\";\n            if (attrLocation < 0) throw \"can not found uniform location for \" + attrLocationName;\n        }\n\n        this.gl.enableVertexAttribArray(attrLocation);\n        this.gl.vertexAttribPointer(\n            attrLocation,\n            buffer.getItemSize(),\n            buffer.getItemType(), // type of data\n            false,  // if the content is normalized vectors\n            0,      // number of bytes to skip in between elements\n            0       // offsets to the first element\n        );\n        this._attrLocationCache[attrLocationName] = attrLocation;\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/base/shaderProgram.ts","/*global DEBUG:true*/\n\nexport default class VertexBuffer {\n\n    constructor(gl){\n        if (DEBUG && !gl) throw \"can not create VertexBuffer, gl context not passed to constructor, expected: VertexBuffer(gl)\";\n        this.gl = gl;\n        this.buffer = gl.createBuffer();\n        this.bufferItemSize = null;\n        this.bufferItemType = null;\n        this.dataLength = null;\n    }\n\n    setData(bufferData, itemType, itemSize){\n        if (DEBUG) {\n            if (!bufferData) throw 'can not set data to buffer: bufferData not specified';\n            if (!itemType) throw 'can not set data to buffer: itemType not specified';\n            if (!itemSize) throw 'can not set data to buffer: itemSize not specified';\n        }\n        const gl = this.gl;\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(bufferData), gl.STATIC_DRAW); // DYNAMIC\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        this.bufferItemSize = itemSize;\n        this.bufferItemType = itemType; // BYTE, FLOAT, INT, UNSIGNED_SHORT ...\n        this.dataLength = bufferData.length;\n    }\n\n    bind(program,attrName){\n        if (DEBUG && !program) throw \"can not bind VertexBuffer, program not specified\";\n        if (DEBUG && !attrName) throw \"can not bind VertexBuffer, attribute name not specified\";\n        program.bindBuffer(this,attrName);\n    }\n\n    unbind(){\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n    }\n\n    getGlBuffer(){\n        return this.buffer;\n    }\n\n    getItemSize(){\n        return this.bufferItemSize;\n    }\n\n    getItemType(){\n        return this.bufferItemType;\n    }\n\n    getBufferLength(){\n        return this.dataLength;\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/base/vertexBuffer.ts","/*global DEBUG:true*/\n\n// todo convert to plain good oop style\n// https://evanw.github.io/lightgl.js/docs/matrix.html\n\nexports.makeIdentity = function () {\n    return [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1\n    ];\n};\n\nexports.makeZToWMatrix = function(fudgeFactor) {\n    return [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, fudgeFactor,\n        0, 0, 0, 1\n    ];\n};\n\nexports.make2DProjection = function(width, height, depth) {\n    // Note: This matrix flips the Y axis so 0 is at the top.\n    return [\n        2 / width, 0, 0, 0,\n        0, -2 / height, 0, 0,\n        0, 0, 2 / depth, 0,\n        -1, 1, 0, 1\n    ];\n};\n\n\nexports.ortho = function (left, right, bottom, top, near, far) {\n    let lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    let out = [];\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n};\n\nexports.perspective = function (fovy, aspect, near, far) {\n    let f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    let out = [];\n\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};\n\n\nexports.makeTranslation = function(tx, ty, tz) {\n    return [\n        1,  0,  0,  0,\n        0,  1,  0,  0,\n        0,  0,  1,  0,\n        tx, ty, tz,  1\n    ];\n};\n\nexports.makeXRotation = function(angleInRadians) {\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n\n    return [\n        1, 0, 0, 0,\n        0, c, s, 0,\n        0, -s, c, 0,\n        0, 0, 0, 1\n    ];\n};\n\nexports.makeYRotation = function(angleInRadians) {\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n\n    return [\n        c, 0, -s, 0,\n        0, 1, 0, 0,\n        s, 0, c, 0,\n        0, 0, 0, 1\n    ];\n};\n\nexports.makeZRotation = function(angleInRadians) {\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n    return [\n        c, s, 0, 0,\n        -s, c, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1\n    ];\n};\n\nexports.makeScale = function(sx, sy, sz) {\n    return [\n        sx, 0,  0,  0,\n        0, sy,  0,  0,\n        0,  0, sz,  0,\n        0,  0,  0,  1\n    ];\n};\n\n\nexports.matrixMultiply = function(a, b) {\n    let r = new Array(16);\n    r[0] = a[0] * b[0] + a[1] * b[4] + a[2] * b[8] + a[3] * b[12];\n    r[1] = a[0] * b[1] + a[1] * b[5] + a[2] * b[9] + a[3] * b[13];\n    r[2] = a[0] * b[2] + a[1] * b[6] + a[2] * b[10] + a[3] * b[14];\n    r[3] = a[0] * b[3] + a[1] * b[7] + a[2] * b[11] + a[3] * b[15];\n\n    r[4] = a[4] * b[0] + a[5] * b[4] + a[6] * b[8] + a[7] * b[12];\n    r[5] = a[4] * b[1] + a[5] * b[5] + a[6] * b[9] + a[7] * b[13];\n    r[6] = a[4] * b[2] + a[5] * b[6] + a[6] * b[10] + a[7] * b[14];\n    r[7] = a[4] * b[3] + a[5] * b[7] + a[6] * b[11] + a[7] * b[15];\n\n    r[8] = a[8] * b[0] + a[9] * b[4] + a[10] * b[8] + a[11] * b[12];\n    r[9] = a[8] * b[1] + a[9] * b[5] + a[10] * b[9] + a[11] * b[13];\n    r[10] = a[8] * b[2] + a[9] * b[6] + a[10] * b[10] + a[11] * b[14];\n    r[11] = a[8] * b[3] + a[9] * b[7] + a[10] * b[11] + a[11] * b[15];\n\n    r[12] = a[12] * b[0] + a[13] * b[4] + a[14] * b[8] + a[15] * b[12];\n    r[13] = a[12] * b[1] + a[13] * b[5] + a[14] * b[9] + a[15] * b[13];\n    r[14] = a[12] * b[2] + a[13] * b[6] + a[14] * b[10] + a[15] * b[14];\n    r[15] = a[12] * b[3] + a[13] * b[7] + a[14] * b[11] + a[15] * b[15];\n    return r;\n};\n\nexports.multMatrixVec = (matrix, inp)=> {\n    let out = new Array(16);\n    for (let i = 0; i < 4; i++) {\n        out[i] =\n            inp[0] * matrix[0 * 4 + i] +\n            inp[1] * matrix[1 * 4 + i] +\n            inp[2] * matrix[2 * 4 + i] +\n            inp[3] * matrix[3 * 4 + i];\n    }\n    return out;\n};\n\nexports.inverse = (m)=>{\n    let r = new Array(16);\n\n    r[0] = m[5]*m[10]*m[15] - m[5]*m[14]*m[11] - m[6]*m[9]*m[15] + m[6]*m[13]*m[11] + m[7]*m[9]*m[14] - m[7]*m[13]*m[10];\n    r[1] = -m[1]*m[10]*m[15] + m[1]*m[14]*m[11] + m[2]*m[9]*m[15] - m[2]*m[13]*m[11] - m[3]*m[9]*m[14] + m[3]*m[13]*m[10];\n    r[2] = m[1]*m[6]*m[15] - m[1]*m[14]*m[7] - m[2]*m[5]*m[15] + m[2]*m[13]*m[7] + m[3]*m[5]*m[14] - m[3]*m[13]*m[6];\n    r[3] = -m[1]*m[6]*m[11] + m[1]*m[10]*m[7] + m[2]*m[5]*m[11] - m[2]*m[9]*m[7] - m[3]*m[5]*m[10] + m[3]*m[9]*m[6];\n\n    r[4] = -m[4]*m[10]*m[15] + m[4]*m[14]*m[11] + m[6]*m[8]*m[15] - m[6]*m[12]*m[11] - m[7]*m[8]*m[14] + m[7]*m[12]*m[10];\n    r[5] = m[0]*m[10]*m[15] - m[0]*m[14]*m[11] - m[2]*m[8]*m[15] + m[2]*m[12]*m[11] + m[3]*m[8]*m[14] - m[3]*m[12]*m[10];\n    r[6] = -m[0]*m[6]*m[15] + m[0]*m[14]*m[7] + m[2]*m[4]*m[15] - m[2]*m[12]*m[7] - m[3]*m[4]*m[14] + m[3]*m[12]*m[6];\n    r[7] = m[0]*m[6]*m[11] - m[0]*m[10]*m[7] - m[2]*m[4]*m[11] + m[2]*m[8]*m[7] + m[3]*m[4]*m[10] - m[3]*m[8]*m[6];\n\n    r[8] = m[4]*m[9]*m[15] - m[4]*m[13]*m[11] - m[5]*m[8]*m[15] + m[5]*m[12]*m[11] + m[7]*m[8]*m[13] - m[7]*m[12]*m[9];\n    r[9] = -m[0]*m[9]*m[15] + m[0]*m[13]*m[11] + m[1]*m[8]*m[15] - m[1]*m[12]*m[11] - m[3]*m[8]*m[13] + m[3]*m[12]*m[9];\n    r[10] = m[0]*m[5]*m[15] - m[0]*m[13]*m[7] - m[1]*m[4]*m[15] + m[1]*m[12]*m[7] + m[3]*m[4]*m[13] - m[3]*m[12]*m[5];\n    r[11] = -m[0]*m[5]*m[11] + m[0]*m[9]*m[7] + m[1]*m[4]*m[11] - m[1]*m[8]*m[7] - m[3]*m[4]*m[9] + m[3]*m[8]*m[5];\n\n    r[12] = -m[4]*m[9]*m[14] + m[4]*m[13]*m[10] + m[5]*m[8]*m[14] - m[5]*m[12]*m[10] - m[6]*m[8]*m[13] + m[6]*m[12]*m[9];\n    r[13] = m[0]*m[9]*m[14] - m[0]*m[13]*m[10] - m[1]*m[8]*m[14] + m[1]*m[12]*m[10] + m[2]*m[8]*m[13] - m[2]*m[12]*m[9];\n    r[14] = -m[0]*m[5]*m[14] + m[0]*m[13]*m[6] + m[1]*m[4]*m[14] - m[1]*m[12]*m[6] - m[2]*m[4]*m[13] + m[2]*m[12]*m[5];\n    r[15] = m[0]*m[5]*m[10] - m[0]*m[9]*m[6] - m[1]*m[4]*m[10] + m[1]*m[8]*m[6] + m[2]*m[4]*m[9] - m[2]*m[8]*m[5];\n\n    let det = m[0]*r[0] + m[1]*r[4] + m[2]*r[8] + m[3]*r[12];\n    if (DEBUG && det===0) {\n        console.error(m);\n        throw new Error(\"can not invert matrix\");\n    }\n    for (let i = 0; i < 16; i++) r[i] /= det;\n    return r;\n};\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/geometry/mat4.ts","\nimport AbstractPrimitive from './abstractPrimitive'\n\nexport default class Plane extends AbstractPrimitive {\n\n    constructor(){\n        super();\n        this.vertexArr = [\n            0, 0,\n            0, 1,\n            1, 0,\n            1, 1\n        ];\n        this.indexArr = [0,1,2,3];\n        this.texCoordArr = [\n            0, 0,\n            0, 1,\n            1, 0,\n            1, 1\n        ];\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/primitives/plane.ts","\n\nexport default class AbstractPrimitive {\n\n    vertexArr = null;\n    normalArr = null;\n    texCoordArr = null;\n    indexArr = null;\n\n    constructor(){\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/primitives/abstractPrimitive.ts","module.exports = \"//position and color\\r\\n\\r\\nattribute vec4 a_position;\\r\\nattribute vec4 a_color;\\r\\n\\r\\nuniform mat4 u_PositionMatrix;\\r\\n\\r\\nvarying vec4 v_color;\\r\\n\\r\\nvoid main() {\\r\\n   gl_Position = u_PositionMatrix * a_position;\\r\\n   v_color = a_color;\\r\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/basic/vertex3.vert\n// module id = 9\n// module chunks = 0","module.exports = \"precision mediump float; // lowp, mediump, highp\\n\\nuniform float u_alpha;\\nuniform vec4 u_rgba;\\n\\nvoid main() {\\n    gl_FragColor = u_rgba;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/color/fragment.frag\n// module id = 10\n// module chunks = 0","\n/*global DEBUG:true*/\n\nexport default class BaseAbstractBehaviour {\n\n    constructor(){\n\n    }\n\n    manage(){\n        console.error(this);\n        if (DEBUG) throw `BaseAbstractBehaviour: method 'manage' not implemented`;\n    }\n\n    onUpdate(){}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/commonBehaviour/abstract/baseAbstractBehaviour.ts","\r\nimport BaseAbstractBehaviour from './baseAbstractBehaviour'\r\n\r\nexport default class Moveable extends BaseAbstractBehaviour {\r\n\r\n    gameObject = null;\r\n\r\n    constructor(game) {\r\n        super();\r\n        this.game = game;\r\n    }\r\n\r\n    manage(gameObject, parameters,dirs) {\r\n        this.gameObject = gameObject;\r\n        this.parameters = parameters;\r\n        this.animations = {};\r\n        dirs.forEach(dir => {\r\n            let keyWalk = 'walk' + dir + 'Animation', keyIdle = 'idle' + dir + 'Animation';\r\n            this.animations[keyWalk] = this.gameObject.frameAnimations.find(it => it.name === parameters[keyWalk]);\r\n            //if (!this.animations[keyWalk]) throw `can not find animation ${parameters[keyWalk]} at gameObject ${this.gameObject.name}`;\r\n            parameters[keyIdle] && (this.animations[keyIdle] = this.gameObject.frameAnimations.find(it => it.name === parameters[keyIdle]));\r\n        });\r\n    }\r\n\r\n    stop() {\r\n        this.gameObject.stopFrAnimations();\r\n        let keyIdle = 'idle' + this.gameObject._lastDirection + 'Animation';\r\n        if (this.animations[keyIdle]) {\r\n            this.animations[keyIdle].play();\r\n        }\r\n    }\r\n\r\n    go(direction) {\r\n        this.gameObject._lastDirection = direction;\r\n        this.animations['walk' + direction + 'Animation'].play();\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/commonBehaviour/abstract/moveable.ts","\r\nexport default class Rect {\r\n\r\n    x;\r\n    y;\r\n    width;\r\n    height;\r\n    right;\r\n    bottom;\r\n\r\n    constructor(x = 0,y = 0,width = 0,height = 0){\r\n        this.set(x,y,width,height);\r\n    }\r\n\r\n    set(x,y,width,height){\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.right = this.x+this.width;\r\n        this.bottom = this.y+this.height;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/geometry/rect.ts","\nexport function Transient(params) {\n    return (target) => {\n        target.transient = params;\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/misc/decorators.ts","/*global DEBUG:true*/\n\nconst isPowerOf2 = function(value) {\n    return (value & (value - 1)) == 0;\n};\n\nexport default class Texture {\n\n    constructor(gl){\n        if (DEBUG && !gl) throw \"can not create Texture, gl context not passed to constructor, expected: Texture(gl)\";\n        this.gl = gl;\n        this.tex = null;\n        this.size = null;\n        this.isPowerOfTwo = false;\n\n        this.tex = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.tex);\n        // Fill the texture with a 1x1 blue pixel.\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE,\n            new Uint8Array([0, 0, 255, 255]));\n        gl.bindTexture(gl.TEXTURE_2D, this.tex);\n    }\n\n    /**\n     * @param img - if image is null, width and height must be specified\n     * @param width -unused if image specified\n     * @param height -unused if image specified\n     */\n    setImage(img,width,height){\n        if (DEBUG) {\n            if (!(img || width || height)) throw \"texture.setImage: if image is null, width and height must be specified: tex.setImage(null,w,h)\";\n        }\n\n        const gl = this.gl;\n        if (img) this.size = {width:img.width,height:img.height};\n        else this.size = {width,height};\n        this.bind();\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n        if (img) {\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        } else {\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        }\n        this.isPowerOfTwo = img && isPowerOf2(img.width) && isPowerOf2(img.height);\n        // Check if the image is a power of 2 in both dimensions.\n        if (this.isPowerOfTwo) {\n            gl.generateMipmap(gl.TEXTURE_2D);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n        } else {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR); // NEAREST,LINEAR\n        }\n        gl.bindTexture(gl.TEXTURE_2D, null);\n\n    }\n\n    bind(i) {\n        //gl.activeTexture(gl.TEXTURE0+i);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.tex);\n        // gl.uniform1i(uName, i);\n    }\n\n    unbind (i) {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n    }\n\n    getSize (){\n        return this.size;\n    }\n\n    getGlTexture() {\n        return this.tex;\n    }\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/base/texture.ts","\nimport mathEx from './mathEx'\n\nlet accessByPath = (obj,path)=>{\n    let pathArr = path.split('.');\n    if (pathArr.length===1) return {targetObj:obj,targetKey:path};\n    let lastPath = pathArr.pop();\n    pathArr.forEach(p=>{\n        obj = obj[p];\n    });\n    return {targetObj:obj,targetKey:lastPath};\n};\n\nlet setValByPath = (obj,path,val)=>{\n    let {targetObj,targetKey} = accessByPath(obj,path);\n    targetObj[targetKey] = val;\n};\n\nlet getValByPath = (obj,path,val)=>{\n    let {targetObj,targetKey} = accessByPath(obj,path);\n    return targetObj[targetKey];\n};\n\nexport default class Tween {\n\n    propsToChange = [];\n    startedTime = null;\n    currTime = null;\n    completed = false;\n\n    /**\n     * @param tweenDesc\n     * target: obj,\n     * from: object with props,\n     * to: object with props,\n     * progress: fn,\n     * complete: fn,\n     * ease: str ease fn name,\n     * time: tween time\n     */\n    constructor(tweenDesc){\n        this.obj = tweenDesc.target;\n        this.progressFn = tweenDesc.progress;\n        this.completeFn = tweenDesc.complete;\n        this.easeFnName = tweenDesc.ease || 'linear';\n        this.tweenTime = tweenDesc.time || 1000;\n        this.desc = this.normalizeDesc(tweenDesc);\n    }\n\n    reuse(newTweenDesc){\n        this.startedTime = this.currTime;\n        this.completed = false;\n\n        Object.keys(newTweenDesc).forEach(key=>{\n            this.desc[key] = newTweenDesc[key];\n        });\n        this.desc = this.normalizeDesc(newTweenDesc);\n    }\n\n    normalizeDesc(tweenDesc){\n        tweenDesc.from = tweenDesc.from || {};\n        tweenDesc.to = tweenDesc.to || {};\n        let allPropsMap = {};\n        Object.keys(tweenDesc.from).forEach(keyFrom=>{\n            allPropsMap[keyFrom] = true;\n        });\n        Object.keys(tweenDesc.to).forEach(keyTo=>{\n            allPropsMap[keyTo] = true;\n        });\n        this.propsToChange = Object.keys(allPropsMap);\n        this.propsToChange.forEach(prp=>{\n            if (tweenDesc.from[prp]===undefined) tweenDesc.from[prp] = getValByPath(this.obj,prp);\n            if (tweenDesc.to[prp]===undefined) tweenDesc.to[prp] = getValByPath(this.obj,prp);\n        });\n        return tweenDesc;\n    };\n\n\n    update(time){\n        if (this.completed) return;\n        this.currTime = time;\n        if (!this.startedTime) this.startedTime = time;\n        let curTweenTime = time - this.startedTime;\n        if (curTweenTime>this.tweenTime) {\n            this._complete();\n            return;\n        }\n        let l = this.propsToChange.length;\n        while(l--){\n            let prp = this.propsToChange[l];\n            let valFrom = this.desc.from[prp];\n            let valTo = this.desc.to[prp];\n            let valCurr = mathEx.ease[this.easeFnName](\n                curTweenTime,\n                valFrom,\n                valTo - valFrom,\n                this.tweenTime);\n            setValByPath(this.obj,prp,valCurr);\n        }\n        this.progressFn && this.progressFn(this.obj);\n\n    };\n\n    progress(_progressFn){\n        this.progressFn = _progressFn;\n    };\n\n    reset() {\n        this.startedTime = null;\n        this.completed = false;\n    };\n\n    _complete(){\n        if (this.completed) return;\n        let l = this.propsToChange.length;\n        while(l--){\n            let prp = this.propsToChange[l];\n            let valCurr = this.desc.to[prp];\n            setValByPath(this.obj,prp,valCurr);\n        }\n        this.progressFn && this.progressFn(this.obj);\n        this.completeFn && this.completeFn(this.obj);\n        this.completed = true;\n    };\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/tween.ts","\nconst isPropNotFit = (key,val,opts)=>{\n    if (!key) return true;\n    if (key.indexOf('_')===0) return true;\n    if (val && val.call) return true;\n    if (typeof val === 'string') return false;\n    if (typeof val === 'number') return false;\n    if (typeof val === 'boolean') return false;\n    return (val==null && !opts.preserveNull);\n};\n\n\nconst isPrimitive = val=>{\n    return typeof val === 'string' || typeof val === 'number'\n};\n\n\nconst deepCopy = (obj, _clonedObjects = [])=> {\n    if (obj===undefined) return undefined;\n    else if (obj===null) return null;\n    else if (typeof window !== 'undefined' && obj===window) return undefined;\n\n    else if (_clonedObjects.indexOf(obj)>-1) return obj;\n    if (Object.prototype.toString.call(obj) === '[object Array]') {\n        let out = [], i = 0, len = obj.length;\n        for (; i < len; i++) {\n            let clonedObject;\n            if (_clonedObjects.indexOf(obj[i])>-1) {\n                clonedObject = obj[i];\n            } else {\n                _clonedObjects.push(obj);\n                clonedObject = deepCopy(obj[i],_clonedObjects);\n                _clonedObjects.push(obj[i]);\n            }\n            out[i] = clonedObject;\n        }\n        return out;\n    }\n    else if (typeof obj === 'object') {\n        let out = {};\n        for (let i in obj) {\n            if (!obj.hasOwnProperty(i)) continue;\n            let clonedObject;\n            if (_clonedObjects.indexOf(obj[i])>-1) {\n                clonedObject = obj[i];\n            } else {\n                _clonedObjects.push(obj);\n                clonedObject = deepCopy(obj[i],_clonedObjects);\n                _clonedObjects.push(obj[i]);\n            }\n            out[i] = clonedObject;\n        }\n        return out;\n    }\n    else return obj;\n};\n\nexport default class CommonObject {\n\n    fromJSON(params = {},forceNew){\n        Object.keys(params).forEach(key=>{\n            if (key==='type') return;\n            if (key in this) this[key] = params[key];\n            else {\n                console.error(this);\n                throw `::fromJSON(): class ${this.constructor.name} has no property ${key}`;\n            }\n\n            if (!this[key]) return;\n            if (params[key].id && params[key].type)\n                this[key] = this.game.repository.getObject(params[key].id,params[key].type,forceNew);\n            else if (params[key].splice) {\n                let arr = this[key];\n                this[key] = [];\n                arr.forEach((item,i)=>{\n                    if (item && item.type && item.id) {\n                        this[key].push(this.game.repository.getObject(item.id,item.type,forceNew));\n                    } else {\n                        //if (isPrimitive(item))\n                        this[key].push(item);\n                    }\n                });\n            }\n        });\n        this.revalidate();\n        return this;\n    }\n    toJSON(opts = {preserveNull: false}) {\n        let res = {};\n\n        for (let key in this) {\n            if (isPropNotFit(key,this[key],opts)) {\n                continue;\n            }\n            if (this.constructor.transient && this.constructor.transient[key]) {\n                continue;\n            }\n            if (this[key]!=null && this[key].type && this[key].id) { // is model\n                res[key] = {\n                    id:this[key].id,\n                    type: this[key].type\n                }\n            } else if (this[key]!=null && this[key].splice) { // is arr\n                let col = this[key];\n                let arr = [];\n                col.forEach(function(el){\n                    if (el && el.type && el.id) {\n                        arr.push({type:el.type,id:el.id});\n                    } else {\n                        if (isPrimitive(el)) arr.push(deepCopy(el));\n                    }\n                });\n                res[key] = arr;\n            }\n            else {\n                let possiblePrimitive = deepCopy(this[key]);\n                if (possiblePrimitive && possiblePrimitive.splice && !possiblePrimitive.length) continue;\n                else if (possiblePrimitive!=null && typeof possiblePrimitive === 'object' && !Object.keys(possiblePrimitive).length) continue;\n                res[key] = possiblePrimitive;\n            }\n        }\n        return res;\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/commonObject.ts","/*global IN_EDITOR:true*/\n/*global DEBUG:true*/\n/*global window:true*/\nimport BaseModel from '../baseModel'\n\n\nexport default class GameObjectProto extends BaseModel {\n\n    type = 'GameObjectProto';\n    spriteSheet = null;\n    _behaviour = null;\n    commonBehaviour = [];\n    currFrameIndex = 0;\n    _sprPosX = 0;\n    _sprPosY = 0;\n    frameAnimations =  [];\n    _currFrameAnimation = 0;\n    startFrameAnimationName = null;\n    _timeCreated = null;\n    tileOffset =  {x:0,y:0};\n    tileRepeat = false;\n    groupName = '';\n    _individualBehaviour = null;\n\n    static find(name){\n        //return game.getCurrScene()._allGameObjects.find({name:name});\n    }\n    static findAll(name) {\n        //return game.getCurrScene()._allGameObjects.findAll({name: name});\n    }\n\n    constructor(game){\n        super(game);\n    }\n\n    revalidate(){\n        this.setFrameIndex(this.currFrameIndex);\n        if (this.spriteSheet) {\n            this.width = this.spriteSheet._frameWidth;\n            this.height = this.spriteSheet._frameHeight;\n        }\n        this.frameAnimations.forEach((f,i)=>{\n            this.frameAnimations[i] = this.frameAnimations[i].clone(); // todo need clone?\n            this.frameAnimations[i]._gameObject = this;\n        });\n    }\n\n    playFrameAnimation(animationName,opts){\n        let fr = this.frameAnimations.find(it=>it.name===animationName);\n        fr._gameObject = this;\n        this._currFrameAnimation = fr;\n        fr.play(opts);\n    }\n\n    setFrameIndex(index){\n        this.currFrameIndex = index;\n        this._sprPosX = this.spriteSheet.getFramePosX(this.currFrameIndex);\n        this._sprPosY = this.spriteSheet.getFramePosY(this.currFrameIndex);\n    }\n\n    update(time,delta) {\n        super.update(time);\n        this._currFrameAnimation && this._currFrameAnimation.update(time);\n        //if (_gameObject.angleVel) _gameObject.angle += _gameObject.angleVel * delta / 1000;\n\n        if (this._individualBehaviour) this._individualBehaviour.onUpdate(time,delta);\n        for (let i=0,max = this.commonBehaviour.length;i<max;i++){\n            this.commonBehaviour[i].onUpdate(time,delta); // todo \"update\"?\n        }\n        this.rigidBody.update(time,delta);\n        this.game.renderer.draw(this);\n    }\n\n    onShow(){\n        if (this._individualBehaviour) this._individualBehaviour.onCreate();\n        if (this.startFrameAnimationName!==null) this.playFrameAnimation(this.startFrameAnimationName);\n    }\n\n    stopFrAnimations(){\n        this._currFrameAnimation && this._currFrameAnimation.stop();\n    }\n\n    kill(){\n        this._layer.kill(this);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/gameObjectProto.ts","\nimport BaseModel from '../baseModel'\n\nexport default class TileMap extends BaseModel {\n\n    type = \"TileMap\";\n    spriteSheet = null;\n    data = [];\n    \n    constructor(game){\n        super(game);\n    }\n\n    getTileAt(x,y){\n        if (!this.spriteSheet) return;\n        let tilePosX = ~~(x / this.spriteSheet._frameWidth);\n        let tilePosY = ~~(y / this.spriteSheet._frameHeight);\n        if (!this.data[tilePosY]) return;\n        let value = this.data[tilePosY][tilePosX];\n        if (value==null) return;\n        return {\n            getRect: ()=>{\n                let x = tilePosX * this.spriteSheet._frameWidth + 1,\n                    y = tilePosY * this.spriteSheet._frameHeight + 1,\n                    width =  this.spriteSheet._frameWidth-2,\n                    height = this.spriteSheet._frameHeight-2;\n                return {\n                    x,y,width,height,\n                    right: x + width,\n                    bottom: y + height\n                }\n            },\n            tileIndex: this.spriteSheet.numOfFramesH * tilePosY + tilePosX + 1,\n            value\n        }\n    }\n\n    getTilesAtRect(rect){\n        let result = [];\n        if (!this.spriteSheet) return result;\n        let alreadyCheckedTiles = {};\n\n        let x = rect.x,y;\n        let maxX = rect.x+rect.width,maxY = rect.y+rect.height;\n        while (true) {\n            y = rect.y;\n            while (true) {\n                let tileInfo = this.getTileAt(x,y);\n                if (tileInfo) {\n                    if (!alreadyCheckedTiles[tileInfo.tileIndex]) {\n                        result.push(tileInfo);\n                        alreadyCheckedTiles[tileInfo.tileIndex] = true;\n                    }\n                }\n                if (y===maxY) break;\n                y+=this.spriteSheet._frameHeight;\n                if (y>maxY) y = maxY;\n            }\n            if (x===maxX) break;\n            x+=this.spriteSheet._frameWidth;\n            if (x>maxX) x = maxX;\n        }\n        //if (result.length) result = [result[0]];\n        //if (result.length) console.log('collided with',result.length);\n        return result;\n    }\n\n    update(){\n        let spriteSheet = this.spriteSheet;\n        if (!spriteSheet) return;\n        let camera = this.game.camera;\n        let renderer = this.game.renderer;\n        let cameraRect = camera.getRectScaled();\n        let tilePosX = ~~((cameraRect.x) / this.spriteSheet._frameWidth);\n        let tilePosY = ~~((cameraRect.y) / this.spriteSheet._frameHeight);\n        if (tilePosX<0) tilePosX = 0;\n        if (tilePosY<0) tilePosY = 0;\n        let w = tilePosX + this._tilesInScreenX + 1;\n        let h = tilePosY + this._tilesInScreenY + 1;\n        for (let y=tilePosY;y<h;y++) {\n            for (let x=tilePosX;x<w;x++) {\n                let index = this.data[y] && this.data[y][x];\n                if (index===null || index===undefined) continue;\n                renderer.drawImage(\n                    spriteSheet.resourcePath,\n                    spriteSheet.getFramePosX(index),\n                    spriteSheet.getFramePosY(index),\n                    spriteSheet._frameWidth,\n                    spriteSheet._frameHeight,\n                    x*spriteSheet._frameWidth,\n                    y*spriteSheet._frameHeight\n                );\n            }\n        }\n    }\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/tileMap.ts","/*global DEBUG:true*/\nimport BaseModel from '../../baseModel'\n\nexport default class TextField extends BaseModel {\n\n    type ='TextField';\n    _chars = null;\n    text = '';\n    font = null;\n\n    constructor(game){\n        super(game);\n    }\n\n\n    revalidate(){\n        if (DEBUG && !this.name) {\n            console.error(this);\n            throw `property 'name' not set at object of type ${this.type}`;\n        }\n        if (this.font===null)\n            this.font = this.game.repository.getArray('Font')[0];\n        if (DEBUG && !this.font) throw `at least one Font must be created`;\n        this.setFont(this.font);\n    }\n\n    setText(text) {\n        text+='';\n        this._chars = [];\n        this.text = text;\n        let rows = [{width:0}];\n        let currRowIndex = 0;\n        this.height = this.font.fontContext.symbols[' '].height;\n        for (let i=0,max=text.length;i<max;i++) {\n            this._chars.push(text[i]);\n            let currSymbolInFont = this.font.fontContext.symbols[text[i]] || this.font.fontContext.symbols[' '];\n            if (text[i]==='\\n') {\n                currRowIndex++;\n                this.height+=currSymbolInFont.height;\n                rows[currRowIndex] = {width:0};\n            } else {\n                rows[currRowIndex].width+=currSymbolInFont.width;\n            }\n        }\n        this.width = Math.max.apply(Math,rows.map(function(o){return o.width;}));\n    }\n    getText(){return this.text}\n    setFont(font){\n        this.font = font;\n        this.setText(this.text);\n    }\n    update(time){\n        super.update(time);\n        this.render();\n    }\n    render(){\n        let posX = 0;\n        let posY = 0;\n        this._chars.forEach(ch=>{\n            let charInCtx = this.font.fontContext.symbols[ch]||this.font.fontContext.symbols['?'];\n            if (ch==='\\n') {\n                posX = 0;\n                posY+= charInCtx.height;\n                return;\n            }\n            this.game.renderer.drawImage(\n                this.font.resourcePath,\n                charInCtx.x,\n                charInCtx.y,\n                charInCtx.width,\n                charInCtx.height,\n                this.pos.x+posX,\n                this.pos.y+posY\n            );\n            posX+=charInCtx.width;\n        });\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/ui/textField.ts","module.exports = \"//position, color and texture\\n\\nattribute vec4 a_position;\\nattribute vec4 a_color;\\nattribute vec2 a_texcoord;\\n\\nuniform mat4 u_PositionMatrix;\\nuniform mat4 u_textureMatrix;\\n\\nvarying vec2 v_texcoord;\\nvarying vec4 v_color;\\n\\nvoid main() {\\n   gl_Position = u_PositionMatrix * a_position;\\n   v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;\\n   v_color = a_color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/basic/vertex.vert\n// module id = 21\n// module chunks = 0","/*global requestAnimationFrame:true*/\n/*global window:true*/\n/*global DEBUG:true*/\n/*global IN_EDITOR:true*/\n/*global PROJECT_NAME:true*/\nimport './misc/polyfills'\nimport RendererFactory from './renderer/rendererFactory'\nimport Repository from './repository';\nimport Mouse from './control/mouse'\nimport Keyboard from './control/keyboard'\nimport GamePad from './control/gamePad'\nimport Collider from './physics/collider'\nimport {Transient} from './misc/decorators'\n\nimport CommonObject from '../model/commonObject'\nimport Camera from './camera'\n\n@Transient({\n    repository: true,\n    camera: true,\n    keyboard: true,\n    gamePad: true,\n    mouse: true\n})\nexport default class Game extends CommonObject {\n\n    _lastTime = null;\n    _currTime = null;\n    _currentScene = null;\n    _running = false;\n    destroyed = false;\n    renderer = null;\n    scale = {x:1,y:1};\n    pos = {x:0,y:0};\n    gravityConstant = null;\n    fps = null;\n    gamePad = null;\n\n    constructor(gameProps){\n        super();\n        Object.keys(gameProps).forEach(key=>{\n            this[key] = gameProps[key];\n        });\n        let time = Date.now();\n        this._lastTime = this._currTime = time;\n        this._deltaTime = 0;\n        this.repository = new Repository(this);\n        this.mouse = new Mouse(this);\n        this.keyboard = new Keyboard(this);\n        this.keyboard.listenTo();\n        this.gamePad = new GamePad(this);\n        this.collider = new Collider(this);\n        this.camera = new Camera(this);\n    }\n\n    getTime(){\n        return this._lastTime;\n    }\n\n    getDeltaTime(){\n        return this._deltaTime;\n    }\n\n    runScene(scene){\n        if (!this.renderer) { // move to constructor?\n            this.renderer = RendererFactory.getRenderer(this);\n            this.mouse.listenTo(this.renderer.container);\n        }\n        this._currentScene = scene;\n        if (!IN_EDITOR) {\n            let allScripts = require(`../../app/scripts/allScripts`);\n            let sceneBhScriptName = `${scene.name[0].toUpperCase()}${scene.name.substr(1)}Behaviour`;\n            if (sceneBhScriptName) scene.setIndividualBehaviour(allScripts[sceneBhScriptName]);\n            scene.layers.forEach(l=>{\n                l.gameObjects.forEach(go=>{\n                    go.setCommonBehaviour();\n                    let scriptName = `${go.name[0].toUpperCase()}${go.name.substr(1)}Behaviour`;\n                    let bhClass = allScripts[scriptName];\n                    if (bhClass) go.setIndividualBehaviour(bhClass);\n                });\n            });\n        }\n        scene.preload(()=>{\n            this._currentScene.onShow();\n            if (!this._running) {\n                Game.update(this);\n                this._running = true;\n            }\n        });\n    }\n\n    getCurrScene(){\n        return this._currentScene;\n    }\n\n    setCurrScene(scene){\n        this._currentScene = scene;\n    }\n\n    static update(game){\n        if (DEBUG && game.destroyed) return;\n        requestAnimationFrame(()=>{Game.update(game)});\n        game._lastTime = game._currTime;\n        game._currTime = Date.now();\n        game._deltaTime = game._currTime - game._lastTime;\n        if (DEBUG) {\n            game.fps = ~~(1000 / game._deltaTime);\n            window.fps = game.fps;\n            let renderError = game.renderer.getError();\n            if (renderError) throw `render error with code ${renderError}`;\n        }\n        if (game._deltaTime>20) game._deltaTime = 20;\n        game._currentScene && game._currentScene.update(game._currTime,game._deltaTime);\n        game.keyboard.update();\n        game.gamePad.update();\n    }\n\n    destroy(){\n        this.destroyed = true;\n        this.keyboard.destroy();\n        this.mouse.destroy();\n        this.renderer.destroy();\n        this.renderer.cancelFullScreen();\n    }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/game.ts","module.exports = {width:900,height:500,scaleStrategy:0,startSceneId:2,scale:{x:1,y:1},pos:{x:0,y:0},gravityConstant:800};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/app/gameProps.json\n// module id = 25\n// module chunks = 0","module.exports = {Scene:[{\"id\":2,\"name\":\"mainScene\",\"width\":5000,\"height\":800,\"type\":\"Scene\",\"layers\":[{\"type\":\"Layer\",\"id\":2}],\"useBG\":true,\"colorBG\":{\"r\":230,\"g\":254,\"b\":255},\"tileMap\":{\"id\":52,\"type\":\"TileMap\"}}],Layer:[{\"id\":2,\"name\":\"layer1\",\"type\":\"Layer\",\"gameObjects\":[{\"type\":\"GameObject\",\"id\":7},{\"type\":\"GameObject\",\"id\":63},{\"type\":\"GameObject\",\"id\":64},{\"type\":\"GameObject\",\"id\":65},{\"type\":\"GameObject\",\"id\":67},{\"type\":\"GameObject\",\"id\":68},{\"type\":\"GameObject\",\"id\":71},{\"type\":\"GameObject\",\"id\":74}]}],SpriteSheet:[{\"name\":\"dude\",\"width\":288,\"height\":48,\"type\":\"SpriteSheet\",\"numOfFramesH\":9,\"resourcePath\":\"resources/dude.png\",\"id\":3},{\"name\":\"platform\",\"width\":500,\"height\":64,\"type\":\"SpriteSheet\",\"resourcePath\":\"resources/platform.png\",\"id\":5},{\"name\":\"ground\",\"width\":800,\"height\":32,\"type\":\"SpriteSheet\",\"numOfFramesH\":25,\"resourcePath\":\"resources/ground.png\",\"id\":57},{\"name\":\"clamp\",\"width\":64,\"height\":64,\"type\":\"SpriteSheet\",\"resourcePath\":\"resources/clamp.png\",\"id\":69},{\"name\":\"tile\",\"width\":262,\"height\":192,\"type\":\"SpriteSheet\",\"resourcePath\":\"resources/tile.jpg\",\"id\":72}],GameObjectProto:[{\"id\":4,\"name\":\"dude\",\"width\":32,\"height\":48,\"type\":\"GameObjectProto\",\"spriteSheet\":{\"id\":3,\"type\":\"SpriteSheet\"},\"commonBehaviour\":[{\"type\":\"CommonBehaviour\",\"id\":15},{\"type\":\"CommonBehaviour\",\"id\":60}],\"frameAnimations\":[{\"type\":\"FrameAnimation\",\"id\":11},{\"type\":\"FrameAnimation\",\"id\":12},{\"type\":\"FrameAnimation\",\"id\":13},{\"type\":\"FrameAnimation\",\"id\":14}]},{\"id\":6,\"name\":\"platform\",\"width\":500,\"height\":64,\"type\":\"GameObjectProto\",\"spriteSheet\":{\"id\":5,\"type\":\"SpriteSheet\"},\"commonBehaviour\":[{\"type\":\"CommonBehaviour\",\"id\":61}]},{\"id\":58,\"name\":\"ground1\",\"width\":32,\"height\":32,\"type\":\"GameObjectProto\",\"spriteSheet\":{\"id\":57,\"type\":\"SpriteSheet\"},\"commonBehaviour\":[{\"type\":\"CommonBehaviour\",\"id\":62}],\"currFrameIndex\":9},{\"id\":70,\"name\":\"clamp\",\"width\":64,\"height\":64,\"type\":\"GameObjectProto\",\"spriteSheet\":{\"id\":69,\"type\":\"SpriteSheet\"},\"commonBehaviour\":[{\"type\":\"CommonBehaviour\",\"id\":75}]},{\"name\":\"tile\",\"width\":262,\"height\":192,\"type\":\"GameObjectProto\",\"spriteSheet\":{\"id\":72,\"type\":\"SpriteSheet\"},\"id\":73}],GameObject:[{\"id\":7,\"name\":\"dude\",\"pos\":{\"x\":537,\"y\":127},\"layerId\":2,\"type\":\"GameObject\",\"gameObjectProto\":{\"id\":4,\"type\":\"GameObjectProto\"}},{\"id\":63,\"name\":\"ground1\",\"pos\":{\"x\":432,\"y\":156},\"layerId\":2,\"type\":\"GameObject\",\"gameObjectProto\":{\"id\":58,\"type\":\"GameObjectProto\"}},{\"id\":64,\"name\":\"platform\",\"pos\":{\"x\":471,\"y\":478},\"layerId\":2,\"type\":\"GameObject\",\"gameObjectProto\":{\"id\":6,\"type\":\"GameObjectProto\"}},{\"id\":65,\"name\":\"platform\",\"pos\":{\"x\":342,\"y\":196},\"layerId\":2,\"type\":\"GameObject\",\"gameObjectProto\":{\"id\":6,\"type\":\"GameObjectProto\"}},{\"id\":67,\"name\":\"ground1\",\"pos\":{\"x\":482,\"y\":119},\"layerId\":2,\"type\":\"GameObject\",\"gameObjectProto\":{\"id\":58,\"type\":\"GameObjectProto\"}},{\"pos\":{\"x\":388,\"y\":140},\"layerId\":2,\"type\":\"GameObject\",\"gameObjectProto\":{\"id\":58,\"type\":\"GameObjectProto\"},\"id\":68},{\"id\":71,\"name\":\"clamp\",\"pos\":{\"x\":739,\"y\":325},\"layerId\":2,\"type\":\"GameObject\",\"gameObjectProto\":{\"id\":70,\"type\":\"GameObjectProto\"}},{\"id\":74,\"name\":\"tile\",\"pos\":{\"x\":369,\"y\":271},\"layerId\":2,\"type\":\"GameObject\",\"gameObjectProto\":{\"id\":73,\"type\":\"GameObjectProto\"}}],FrameAnimation:[{\"name\":\"left\",\"type\":\"FrameAnimation\",\"frames\":[0,1,2,3],\"id\":11},{\"name\":\"right\",\"type\":\"FrameAnimation\",\"frames\":[5,6,7,8],\"id\":12},{\"name\":\"idleLeft\",\"type\":\"FrameAnimation\",\"frames\":[4],\"id\":13},{\"name\":\"idleRight\",\"type\":\"FrameAnimation\",\"frames\":[4],\"id\":14}],CommonBehaviour:[{\"id\":15,\"name\":\"Control2Dir\",\"type\":\"CommonBehaviour\",\"parameters\":{\"velocity\":\"130\",\"walkLeftAnimation\":\"left\",\"walkRightAnimation\":\"right\",\"idleLeftAnimation\":\"idleLeft\",\"idleRightAnimation\":\"idleRight\"}},{\"name\":\"Draggable\",\"type\":\"CommonBehaviour\",\"id\":60},{\"name\":\"Draggable\",\"type\":\"CommonBehaviour\",\"id\":61},{\"name\":\"Draggable\",\"type\":\"CommonBehaviour\",\"id\":62},{\"name\":\"Draggable\",\"type\":\"CommonBehaviour\",\"id\":75}],Font:[{\"id\":22,\"name\":\"font1\",\"type\":\"Font\",\"resourcePath\":\"resources/font1.png\",\"fontSize\":21,\"fontFamily\":\"monospace\",\"fontContext\":{\"symbols\":{\"0\":{\"x\":24,\"y\":36,\"width\":12,\"height\":24},\"1\":{\"x\":45,\"y\":36,\"width\":12,\"height\":24},\"2\":{\"x\":65,\"y\":36,\"width\":12,\"height\":24},\"3\":{\"x\":86,\"y\":36,\"width\":12,\"height\":24},\"4\":{\"x\":107,\"y\":36,\"width\":12,\"height\":24},\"5\":{\"x\":127,\"y\":36,\"width\":12,\"height\":24},\"6\":{\"x\":148,\"y\":36,\"width\":12,\"height\":24},\"7\":{\"x\":168,\"y\":36,\"width\":12,\"height\":24},\"8\":{\"x\":189,\"y\":36,\"width\":12,\"height\":24},\"9\":{\"x\":210,\"y\":36,\"width\":12,\"height\":24},\" \":{\"x\":4,\"y\":4,\"width\":12,\"height\":24},\"!\":{\"x\":24,\"y\":4,\"width\":12,\"height\":24},\"\\\"\":{\"x\":45,\"y\":4,\"width\":12,\"height\":24},\"#\":{\"x\":65,\"y\":4,\"width\":12,\"height\":24},\"$\":{\"x\":86,\"y\":4,\"width\":12,\"height\":24},\"%\":{\"x\":107,\"y\":4,\"width\":12,\"height\":24},\"&\":{\"x\":127,\"y\":4,\"width\":12,\"height\":24},\"'\":{\"x\":148,\"y\":4,\"width\":12,\"height\":24},\"(\":{\"x\":168,\"y\":4,\"width\":12,\"height\":24},\")\":{\"x\":189,\"y\":4,\"width\":12,\"height\":24},\"*\":{\"x\":210,\"y\":4,\"width\":12,\"height\":24},\"+\":{\"x\":230,\"y\":4,\"width\":12,\"height\":24},\",\":{\"x\":251,\"y\":4,\"width\":12,\"height\":24},\"-\":{\"x\":271,\"y\":4,\"width\":12,\"height\":24},\".\":{\"x\":292,\"y\":4,\"width\":12,\"height\":24},\"/\":{\"x\":4,\"y\":36,\"width\":12,\"height\":24},\":\":{\"x\":230,\"y\":36,\"width\":12,\"height\":24},\";\":{\"x\":251,\"y\":36,\"width\":12,\"height\":24},\"<\":{\"x\":271,\"y\":36,\"width\":12,\"height\":24},\"=\":{\"x\":292,\"y\":36,\"width\":12,\"height\":24},\">\":{\"x\":4,\"y\":68,\"width\":12,\"height\":24},\"?\":{\"x\":24,\"y\":68,\"width\":12,\"height\":24},\"@\":{\"x\":45,\"y\":68,\"width\":12,\"height\":24},\"A\":{\"x\":65,\"y\":68,\"width\":12,\"height\":24},\"B\":{\"x\":86,\"y\":68,\"width\":12,\"height\":24},\"C\":{\"x\":107,\"y\":68,\"width\":12,\"height\":24},\"D\":{\"x\":127,\"y\":68,\"width\":12,\"height\":24},\"E\":{\"x\":148,\"y\":68,\"width\":12,\"height\":24},\"F\":{\"x\":168,\"y\":68,\"width\":12,\"height\":24},\"G\":{\"x\":189,\"y\":68,\"width\":12,\"height\":24},\"H\":{\"x\":210,\"y\":68,\"width\":12,\"height\":24},\"I\":{\"x\":230,\"y\":68,\"width\":12,\"height\":24},\"J\":{\"x\":251,\"y\":68,\"width\":12,\"height\":24},\"K\":{\"x\":271,\"y\":68,\"width\":12,\"height\":24},\"L\":{\"x\":292,\"y\":68,\"width\":12,\"height\":24},\"M\":{\"x\":4,\"y\":100,\"width\":12,\"height\":24},\"N\":{\"x\":24,\"y\":100,\"width\":12,\"height\":24},\"O\":{\"x\":45,\"y\":100,\"width\":12,\"height\":24},\"P\":{\"x\":65,\"y\":100,\"width\":12,\"height\":24},\"Q\":{\"x\":86,\"y\":100,\"width\":12,\"height\":24},\"R\":{\"x\":107,\"y\":100,\"width\":12,\"height\":24},\"S\":{\"x\":127,\"y\":100,\"width\":12,\"height\":24},\"T\":{\"x\":148,\"y\":100,\"width\":12,\"height\":24},\"U\":{\"x\":168,\"y\":100,\"width\":12,\"height\":24},\"V\":{\"x\":189,\"y\":100,\"width\":12,\"height\":24},\"W\":{\"x\":210,\"y\":100,\"width\":12,\"height\":24},\"X\":{\"x\":230,\"y\":100,\"width\":12,\"height\":24},\"Y\":{\"x\":251,\"y\":100,\"width\":12,\"height\":24},\"Z\":{\"x\":271,\"y\":100,\"width\":12,\"height\":24},\"[\":{\"x\":292,\"y\":100,\"width\":12,\"height\":24},\"\\\\\":{\"x\":4,\"y\":132,\"width\":12,\"height\":24},\"]\":{\"x\":24,\"y\":132,\"width\":12,\"height\":24},\"^\":{\"x\":45,\"y\":132,\"width\":12,\"height\":24},\"_\":{\"x\":65,\"y\":132,\"width\":12,\"height\":24},\"`\":{\"x\":86,\"y\":132,\"width\":12,\"height\":24},\"a\":{\"x\":107,\"y\":132,\"width\":12,\"height\":24},\"b\":{\"x\":127,\"y\":132,\"width\":12,\"height\":24},\"c\":{\"x\":148,\"y\":132,\"width\":12,\"height\":24},\"d\":{\"x\":168,\"y\":132,\"width\":12,\"height\":24},\"e\":{\"x\":189,\"y\":132,\"width\":12,\"height\":24},\"f\":{\"x\":210,\"y\":132,\"width\":12,\"height\":24},\"g\":{\"x\":230,\"y\":132,\"width\":12,\"height\":24},\"h\":{\"x\":251,\"y\":132,\"width\":12,\"height\":24},\"i\":{\"x\":271,\"y\":132,\"width\":12,\"height\":24},\"j\":{\"x\":292,\"y\":132,\"width\":12,\"height\":24},\"k\":{\"x\":4,\"y\":164,\"width\":12,\"height\":24},\"l\":{\"x\":24,\"y\":164,\"width\":12,\"height\":24},\"m\":{\"x\":45,\"y\":164,\"width\":12,\"height\":24},\"n\":{\"x\":65,\"y\":164,\"width\":12,\"height\":24},\"o\":{\"x\":86,\"y\":164,\"width\":12,\"height\":24},\"p\":{\"x\":107,\"y\":164,\"width\":12,\"height\":24},\"q\":{\"x\":127,\"y\":164,\"width\":12,\"height\":24},\"r\":{\"x\":148,\"y\":164,\"width\":12,\"height\":24},\"s\":{\"x\":168,\"y\":164,\"width\":12,\"height\":24},\"t\":{\"x\":189,\"y\":164,\"width\":12,\"height\":24},\"u\":{\"x\":210,\"y\":164,\"width\":12,\"height\":24},\"v\":{\"x\":230,\"y\":164,\"width\":12,\"height\":24},\"w\":{\"x\":251,\"y\":164,\"width\":12,\"height\":24},\"x\":{\"x\":271,\"y\":164,\"width\":12,\"height\":24},\"y\":{\"x\":292,\"y\":164,\"width\":12,\"height\":24},\"z\":{\"x\":4,\"y\":196,\"width\":12,\"height\":24},\"{\":{\"x\":24,\"y\":196,\"width\":12,\"height\":24},\"|\":{\"x\":45,\"y\":196,\"width\":12,\"height\":24},\"}\":{\"x\":65,\"y\":196,\"width\":12,\"height\":24},\"~\":{\"x\":86,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":107,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":127,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":148,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":168,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":189,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":210,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":230,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":251,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":271,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":292,\"y\":196,\"width\":12,\"height\":24},\"\":{\"x\":4,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":24,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":45,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":65,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":86,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":107,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":127,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":148,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":168,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":189,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":210,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":230,\"y\":228,\"width\":12,\"height\":24},\"\":{\"x\":251,\"y\":228,\"width\":12,\"height\":24},\"А\":{\"x\":271,\"y\":228,\"width\":12,\"height\":24},\"Б\":{\"x\":292,\"y\":228,\"width\":12,\"height\":24},\"В\":{\"x\":4,\"y\":260,\"width\":12,\"height\":24},\"Г\":{\"x\":24,\"y\":260,\"width\":12,\"height\":24},\"Д\":{\"x\":45,\"y\":260,\"width\":12,\"height\":24},\"Е\":{\"x\":65,\"y\":260,\"width\":12,\"height\":24},\"Ж\":{\"x\":86,\"y\":260,\"width\":12,\"height\":24},\"З\":{\"x\":107,\"y\":260,\"width\":12,\"height\":24},\"И\":{\"x\":127,\"y\":260,\"width\":12,\"height\":24},\"Й\":{\"x\":148,\"y\":260,\"width\":12,\"height\":24},\"К\":{\"x\":168,\"y\":260,\"width\":12,\"height\":24},\"Л\":{\"x\":189,\"y\":260,\"width\":12,\"height\":24},\"М\":{\"x\":210,\"y\":260,\"width\":12,\"height\":24},\"Н\":{\"x\":230,\"y\":260,\"width\":12,\"height\":24},\"О\":{\"x\":251,\"y\":260,\"width\":12,\"height\":24},\"П\":{\"x\":271,\"y\":260,\"width\":12,\"height\":24},\"Р\":{\"x\":292,\"y\":260,\"width\":12,\"height\":24},\"С\":{\"x\":4,\"y\":292,\"width\":12,\"height\":24},\"Т\":{\"x\":24,\"y\":292,\"width\":12,\"height\":24},\"У\":{\"x\":45,\"y\":292,\"width\":12,\"height\":24},\"Ф\":{\"x\":65,\"y\":292,\"width\":12,\"height\":24},\"Х\":{\"x\":86,\"y\":292,\"width\":12,\"height\":24},\"Ц\":{\"x\":107,\"y\":292,\"width\":12,\"height\":24},\"Ч\":{\"x\":127,\"y\":292,\"width\":12,\"height\":24},\"Ш\":{\"x\":148,\"y\":292,\"width\":12,\"height\":24},\"Щ\":{\"x\":168,\"y\":292,\"width\":12,\"height\":24},\"Ъ\":{\"x\":189,\"y\":292,\"width\":12,\"height\":24},\"Ы\":{\"x\":210,\"y\":292,\"width\":12,\"height\":24},\"Ь\":{\"x\":230,\"y\":292,\"width\":12,\"height\":24},\"Э\":{\"x\":251,\"y\":292,\"width\":12,\"height\":24},\"Ю\":{\"x\":271,\"y\":292,\"width\":12,\"height\":24},\"Я\":{\"x\":292,\"y\":292,\"width\":12,\"height\":24},\"а\":{\"x\":4,\"y\":324,\"width\":12,\"height\":24},\"б\":{\"x\":24,\"y\":324,\"width\":12,\"height\":24},\"в\":{\"x\":45,\"y\":324,\"width\":12,\"height\":24},\"г\":{\"x\":65,\"y\":324,\"width\":12,\"height\":24},\"д\":{\"x\":86,\"y\":324,\"width\":12,\"height\":24},\"е\":{\"x\":107,\"y\":324,\"width\":12,\"height\":24},\"ж\":{\"x\":127,\"y\":324,\"width\":12,\"height\":24},\"з\":{\"x\":148,\"y\":324,\"width\":12,\"height\":24},\"и\":{\"x\":168,\"y\":324,\"width\":12,\"height\":24},\"й\":{\"x\":189,\"y\":324,\"width\":12,\"height\":24},\"к\":{\"x\":210,\"y\":324,\"width\":12,\"height\":24},\"л\":{\"x\":230,\"y\":324,\"width\":12,\"height\":24},\"м\":{\"x\":251,\"y\":324,\"width\":12,\"height\":24},\"н\":{\"x\":271,\"y\":324,\"width\":12,\"height\":24},\"о\":{\"x\":292,\"y\":324,\"width\":12,\"height\":24},\"п\":{\"x\":4,\"y\":356,\"width\":12,\"height\":24},\"р\":{\"x\":24,\"y\":356,\"width\":12,\"height\":24},\"с\":{\"x\":45,\"y\":356,\"width\":12,\"height\":24},\"т\":{\"x\":65,\"y\":356,\"width\":12,\"height\":24},\"у\":{\"x\":86,\"y\":356,\"width\":12,\"height\":24},\"ф\":{\"x\":107,\"y\":356,\"width\":12,\"height\":24},\"х\":{\"x\":127,\"y\":356,\"width\":12,\"height\":24},\"ц\":{\"x\":148,\"y\":356,\"width\":12,\"height\":24},\"ч\":{\"x\":168,\"y\":356,\"width\":12,\"height\":24},\"ш\":{\"x\":189,\"y\":356,\"width\":12,\"height\":24},\"щ\":{\"x\":210,\"y\":356,\"width\":12,\"height\":24},\"ъ\":{\"x\":230,\"y\":356,\"width\":12,\"height\":24},\"ы\":{\"x\":251,\"y\":356,\"width\":12,\"height\":24},\"ь\":{\"x\":271,\"y\":356,\"width\":12,\"height\":24},\"э\":{\"x\":292,\"y\":356,\"width\":12,\"height\":24},\"ю\":{\"x\":4,\"y\":388,\"width\":12,\"height\":24},\"я\":{\"x\":24,\"y\":388,\"width\":12,\"height\":24},\"ѐ\":{\"x\":45,\"y\":388,\"width\":12,\"height\":24},\"ё\":{\"x\":65,\"y\":388,\"width\":12,\"height\":24},\"ђ\":{\"x\":86,\"y\":388,\"width\":12,\"height\":24},\"ѓ\":{\"x\":107,\"y\":388,\"width\":12,\"height\":24},\"є\":{\"x\":127,\"y\":388,\"width\":12,\"height\":24},\"ѕ\":{\"x\":148,\"y\":388,\"width\":12,\"height\":24},\"і\":{\"x\":168,\"y\":388,\"width\":12,\"height\":24},\"ї\":{\"x\":189,\"y\":388,\"width\":12,\"height\":24},\"ј\":{\"x\":210,\"y\":388,\"width\":12,\"height\":24},\"љ\":{\"x\":230,\"y\":388,\"width\":12,\"height\":24},\"њ\":{\"x\":251,\"y\":388,\"width\":12,\"height\":24},\"ћ\":{\"x\":271,\"y\":388,\"width\":12,\"height\":24}},\"width\":320,\"height\":416}}],TileMap:[{\"id\":52,\"width\":50,\"height\":50,\"type\":\"TileMap\",\"spriteSheet\":{\"id\":57,\"type\":\"SpriteSheet\"},\"data\":[[],null,null,[null,null,null,null,2,null,null],[null,null],[1,null,3,null,null,1,1,1,1,1,1,1,1,1],null,[null,1,null,1]]}]};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/app/repository.json\n// module id = 26\n// module chunks = 0","import {ClampBehaviour} from './clamp'\nimport {DudeBehaviour} from './dude'\nimport {Ground1Behaviour} from './ground1'\nimport {MainSceneBehaviour} from './mainScene'\nimport {PlatformBehaviour} from './platform'\nimport {TileBehaviour} from './tile'\n\nexport {\n\tClampBehaviour,DudeBehaviour,Ground1Behaviour,MainSceneBehaviour,PlatformBehaviour,TileBehaviour\n}\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/app/scripts/allScripts.js","\n        \nexport class ClampBehaviour {\n\n    onCreate(){\n\n    }\n\n    onUpdate(){\n\n    }\n\n    onDestroy(){\n\n    }\n\n}\n    \n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/app/scripts/clamp.js","\n        \nexport class DudeBehaviour {\n\n    onCreate(){\n        this.game.camera.followTo(this.gameObject);\n    }\n\n    onUpdate(){\n        \n        if (\n            this.game.keyboard.isJustPressed(this.game.keyboard.KEY.UP) ||\n            this.game.keyboard.isJustPressed(this.game.keyboard.KEY.GAME_PAD_1)\n        ){\n            if (this.gameObject.rigidBody.onFloor) this.gameObject.rigidBody.vel.addXY(0,-340);\n        }\n        \n        if (\n            this.game.keyboard.isPressed(this.game.keyboard.KEY.A) ||\n            this.game.keyboard.isPressed(this.game.keyboard.KEY.GAME_PAD_5)\n        ){\n            this.gameObject.rigidBody.vel.addXY(0,-50);\n        }\n    \n        \n        \n    }\n\n    onDestroy(){\n\n    }\n\n}\n    \n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/app/scripts/dude.js","\n        \nexport class Ground1Behaviour {\n\n    onCreate(){\n        //this.gameObject.rigidBody.static = true;\n    }\n\n    onUpdate(){\n\n    }\n\n    onDestroy(){\n\n    }\n\n}\n    \n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/app/scripts/ground1.js","\nexport class MainSceneBehaviour {\n\n    \n    onCreate(){\n        this.x = 0;\n        this.y = 0;\n        this.color = [1,0,0,1];//[1,0,0,1] 'rgba(255,0,0,255)'\n        this.points = [];\n        \n        this.scene.on('mouseMove',e=>{\n            //console.log(e.isMouseDown);\n        });\n        this.scene.on('mouseMove',e=>{\n          this.x = e.screenX;\n          this.y = e.screenY;\n          this.points.push({x:e.screenX,y:e.screenY});\n        });\n        this.offsetX = 0;\n    }\n\n    onUpdate(){\n        this.game.renderer.fillRect(this.x,this.y,10,10,this.color);\n       \n        this.points.forEach(p=>{\n            this.game.renderer.fillRect(p.x,p.y,50,50,this.color);\n            //this.game.renderer.log(p.x);\n            //this.game.renderer.drawLine(p.x,p.y,p.x+20,p.y+30,this.color);\n        });\n        //this.game.renderer.log(this.points.length);\n        //this.game.renderer.log({a:2});\n        let camera = this.game.camera;\n        let camRect = this.game.camera.getRectScaled();\n        // this.game.renderer.log(camRect);\n        // this.game.renderer.log(this.game.mouse.currPoint);\n        this.game.renderer.drawRect(camRect.x+50,camRect.y+50,camRect.width-100,camRect.height-100,[0,1,0,1]);\n        //this.game.renderer.log(this.game.mouse.lastPoint);\n        this.game.renderer.drawTiledImage('resources/tile.jpg',\n                  130,0,130,61,\n                  camRect.x, camRect.y, 100, 100,\n                  this.offsetX,this.offsetX);\n        this.offsetX+=0.1;\n    }\n\n    onDestroy(){\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/app/scripts/mainScene.js","\n        \nexport class PlatformBehaviour {\n\n    onCreate(){\n        this.gameObject.rigidBody.static = true;\n    }\n\n    onUpdate(){\n\n    }\n\n    onDestroy(){\n\n    }\n\n}\n    \n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/app/scripts/platform.js","\n        \nexport class TileBehaviour {\n\n    onCreate(){\n\n    }\n\n    onUpdate(){\n\n    }\n\n    onDestroy(){\n\n    }\n\n}\n    \n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/app/scripts/tile.js","\nimport Draggable from './generic/draggable';\nimport Control4Dir from './generic/control4Dir';\nimport Control2Dir from './generic/control2Dir';\n\nexport {\n    Draggable,\n    Control4Dir,\n    Control2Dir\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/commonBehaviour/all.ts","\r\nimport Move2Dir from './move2Dir'\r\n\r\n\r\nexport default class Control2Dir extends Move2Dir{\r\n\r\n    constructor(game){\r\n        super(game);\r\n    }\r\n\r\n    manage(gameObject,parameters) {\r\n        super.manage(gameObject,parameters);\r\n    }\r\n\r\n    onUpdate(){\r\n        const keyboard = this.game.keyboard;\r\n        const parameters  = this.parameters;\r\n        const go = this.gameObject;\r\n        if (keyboard.isPressed(keyboard.KEY.LEFT) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_LEFT)) {\r\n            go.rigidBody.vel.x = -parameters.velocity;\r\n            this.go('Left');\r\n        }\r\n        if (keyboard.isPressed(keyboard.KEY.RIGHT) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_RIGHT)) {\r\n            go.rigidBody.vel.x = parameters.velocity;\r\n            this.go('Right');\r\n        }\r\n\r\n        if (keyboard.isJustReleased(keyboard.KEY.LEFT) || keyboard.isJustReleased(keyboard.KEY.GAME_PAD_AXIS_LEFT)) {\r\n            this.stop();\r\n        } else if (keyboard.isJustReleased(keyboard.KEY.RIGHT) || keyboard.isJustReleased(keyboard.KEY.GAME_PAD_AXIS_RIGHT)) {\r\n            this.stop();\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/commonBehaviour/generic/control2Dir.ts","\n\n\nimport Move4Dir from './move4Dir'\n\nexport default class Control4Dir extends Move4Dir {\n\n    constructor(game){\n        super(game);\n    }\n\n    manage(gameObject,parameters) {\n        super.manage(gameObject,parameters);\n    }\n\n\n    onUpdate(){\n        const keyboard = this.game.keyboard;\n        const parameters  = this.parameters;\n        const go = this.gameObject;\n        if (keyboard.isPressed(keyboard.KEY.UP) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_UP)) {\n            go.rigidBody.vel.y = -parameters.velocity;\n            this.go('Up');\n        }\n        if (keyboard.isPressed(keyboard.KEY.DOWN) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_DOWN)) {\n            go.rigidBody.vel.y = parameters.velocity;\n            this.go('Down');\n        }\n        if (keyboard.isPressed(keyboard.KEY.LEFT) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_LEFT)) {\n            go.rigidBody.vel.x = -parameters.velocity;\n            this.go('Left');\n        }\n        if (keyboard.isPressed(keyboard.KEY.RIGHT) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_RIGHT)) {\n            go.rigidBody.vel.x = parameters.velocity;\n            this.go('Right');\n        }\n\n        if (keyboard.isJustReleased(keyboard.KEY.LEFT) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_LEFT)) {\n            this.stop();\n        } else if (keyboard.isJustReleased(keyboard.KEY.RIGHT) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_RIGHT)) {\n            this.stop();\n        } else if (keyboard.isJustReleased(keyboard.KEY.UP) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_UP)) {\n            this.stop();\n        } else if (keyboard.isJustReleased(keyboard.KEY.DOWN) || keyboard.isPressed(keyboard.KEY.GAME_PAD_AXIS_DOWN)) {\n            this.stop();\n        }\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/commonBehaviour/generic/control4Dir.ts","\nimport BaseAbstractBehaviour from '../abstract/baseAbstractBehaviour'\n\nexport default class DraggableBehaviour extends BaseAbstractBehaviour {\n\n    static _getEventId(e){\n        return e.id || 1;\n    };\n\n    constructor(game){\n        super();\n        this.game = game;\n        this.points = {};\n    }\n\n    manage(gameObject,params) {\n        gameObject.on('click',e=>{\n            this.points[DraggableBehaviour._getEventId(e)] = {\n                mX: e.objectX,\n                mY: e.objectY,\n                target: gameObject,\n                preventDefault(){\n                    this.defaultPrevented = true;\n                }\n            };\n        });\n        let scene = this.game.getCurrScene();\n        scene.on('mouseDown',e=>{\n            let pointId = DraggableBehaviour._getEventId(e);\n            let point = this.points[pointId];\n            if (!point) return;\n            point.dragStartX = point.target.pos.x;\n            point.dragStartY = point.target.pos.y;\n        });\n        scene.on('mouseMove',e=>{\n            let pointId = DraggableBehaviour._getEventId(e);\n            let point = this.points[pointId];\n            if (!point) return;\n            if (!point.dragStart) {\n                point.dragStart = true;\n                point.target.trigger('dragStart',point);\n                if (point.defaultPrevented) {\n                    delete this.points[pointId];\n                    return;\n                }\n            }\n            gameObject.pos.x = e.screenX - point.mX;\n            gameObject.pos.y = e.screenY - point.mY;\n            // this.game._collider.moveTo(\n            //     gameObject,\n            //     e.screenX - point.mX,\n            //     e.screenY - point.mY\n            // );\n        });\n        scene.on('mouseUp',e=>{\n            let pointId = DraggableBehaviour._getEventId(e);\n            let point = this.points[pointId];\n            if (!point) return;\n            if (point.dragStart) {\n                point.x = gameObject.pos.x;\n                point.y = gameObject.pos.y;\n                point.target.trigger('dragStop',point);\n            }\n            delete this.points[pointId];\n        });\n    }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/commonBehaviour/generic/draggable.ts","\r\n\r\n\r\nimport Moveable from '../abstract/moveable'\r\n\r\nexport default class Move2Dir extends Moveable {\r\n\r\n    static DIRS = ['Left', 'Right'];\r\n\r\n    constructor(game){\r\n        super(game);\r\n    }\r\n\r\n    manage(gameObject, parameters) {\r\n        super.manage(gameObject, parameters, Move2Dir.DIRS);\r\n    }\r\n\r\n    stop() {\r\n        super.stop();\r\n        this.gameObject.rigidBody.vel.x = 0;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/commonBehaviour/generic/move2Dir.ts","\n\nimport Moveable from '../abstract/moveable'\n\nexport default class Move4Dir extends Moveable {\n\n    static DIRS = ['Left', 'Right', 'Up','Down'];\n\n    constructor(game){\n        super(game);\n    }\n\n    manage(gameObject, parameters) {\n        super.manage(gameObject, parameters, Move4Dir.DIRS);\n    }\n\n    stop() {\n        super.stop();\n        this.gameObject.rigidBody.vel.x = 0;\n        this.gameObject.rigidBody.vel.y = 0;\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/commonBehaviour/generic/move4Dir.ts","/*global DEBUG:true*/\r\nimport Tween from \"./tween\";\r\nimport mat4 from './geometry/mat4'\r\nimport mathEx from './mathEx'\r\nimport Rect from \"./geometry/rect\";\r\n\r\n// https://stackoverflow.com/questions/7692988/opengl-math-projecting-screen-space-to-world-space-coords\r\nexport default class Camera {\r\n\r\n    objFollowTo = null;\r\n    scene = null;\r\n    sceneWidth;\r\n    sceneHeight;\r\n    pos = {x:0, y:0}; // todo to point2d\r\n    scale = {x:1,y:1};\r\n    lastToleranceTime = 0;\r\n\r\n    _rect = new Rect();\r\n    _rectScaled = new Rect();\r\n\r\n    TOLERANCE_TIME = 2000;\r\n\r\n    constructor(game){\r\n        this.game = game;\r\n    }\r\n\r\n    followTo(gameObject) {\r\n        if (DEBUG && !gameObject) throw `Camera:followTo(gameObject) - gameObject not provided`;\r\n        this.objFollowTo = gameObject;\r\n        this.scene = this.game._currentScene;\r\n        if (this.scene.tileMap.spriteSheet) {\r\n            this.sceneWidth = this.scene.tileMap.spriteSheet._frameWidth*this.scene.tileMap.width;\r\n            this.sceneHeight = this.scene.tileMap.spriteSheet._frameHeight*this.scene.tileMap.height;\r\n        } else {\r\n            this.sceneWidth = this.game.getCurrScene().width || this.game.width;\r\n            this.sceneHeight = this.game.getCurrScene().height || this.game.height;\r\n        }\r\n        this.cameraTween = new Tween({\r\n            target: this,\r\n            ease: 'easeInQuad',\r\n            to: {x:this.pos.x,y:this.pos.y},\r\n            time: this.TOLERANCE_TIME\r\n        });\r\n    }\r\n\r\n    update(currTime,delta) {\r\n        let cameraRect = this.getRectScaled(); // todo cache this value\r\n        let gameObject = this.objFollowTo;\r\n        if (!gameObject) return;\r\n        let tileWidth = this.scene.tileMap.spriteSheet?this.scene.tileMap.spriteSheet._frameWidth:0; // todo ?\r\n        let tileHeight = this.scene.tileMap.spriteSheet? this.scene.tileMap.spriteSheet._frameHeight:0;\r\n        let w = this.game.width;\r\n        let h = this.game.height;\r\n        let wDiv2 = w/2;\r\n        let hDiv2 = h/2;\r\n        let x = gameObject.pos.x - wDiv2;\r\n        let y = gameObject.pos.y - hDiv2;\r\n        if (gameObject._lastDirection==='Right') x+=cameraRect.width/2; // todo set camera follow mode\r\n        if (gameObject._lastDirection==='Left') x-=cameraRect.height/2;\r\n        if (x<0) x = 0;\r\n        if (y<0) y = 0;\r\n        if (x>this.sceneWidth - w + tileWidth)  x = this.sceneWidth -w + tileWidth;\r\n        if (y>this.sceneHeight -h + tileHeight) y = this.sceneHeight -h + tileHeight;\r\n        let scaleVal = Math.abs(gameObject.rigidBody.vel.x)>0?0.95:1;\r\n        if (this.TOLERANCE_TIME===0) {\r\n            this.pos.x = x;\r\n            this.pos.y = y;\r\n        }\r\n        else if (currTime-this.lastToleranceTime>this.TOLERANCE_TIME) {\r\n            this.lastToleranceTime = currTime;\r\n            this.cameraTween.reuse({\r\n                to: {\r\n                    'pos.x':x,'pos.y':y,\r\n                    'scale.x':scaleVal,'scale.y':scaleVal\r\n                }\r\n            });\r\n        }\r\n\r\n        this.cameraTween.update(currTime);\r\n        this._updateRect();\r\n        this.render();\r\n    }\r\n\r\n    _updateRect(){\r\n        let point00 = this.screenToWorld(0,0);\r\n        let pointWH = this.screenToWorld(this.game.width,this.game.height);\r\n        this._rectScaled.set(\r\n            point00.x,point00.y,\r\n            pointWH.x - point00.x,pointWH.y - point00.y\r\n        );\r\n    }\r\n\r\n    render(){\r\n        this.game.renderer.translate(this.game.width/2,this.game.height/2);\r\n        this.game.renderer.scale(this.scale.x,this.scale.y);\r\n        // camera rotation will be here if needs\r\n        this.game.renderer.translate(-this.game.width/2,-this.game.height/2);\r\n        this.game.renderer.translate(-this.pos.x,-this.pos.y);\r\n    }\r\n\r\n    screenToWorld(screenX,screenY){\r\n        let mScale = mat4.makeScale(this.scale.x,this.scale.y,1);\r\n        let point2d = mathEx.unProject(\r\n            screenX,screenY,\r\n            this.game.width,this.game.height,mScale);\r\n        point2d.add(this.pos);\r\n        return point2d;\r\n    }\r\n\r\n    getRect(){\r\n        this._rect.set(this.pos.x,this.pos.y,this.game.width,this.game.height);\r\n        return this._rect;\r\n    }\r\n\r\n    getRectScaled(){\r\n        return this._rectScaled;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/camera.ts","/*global DEBUG:true*/\r\nif (DEBUG) {\r\n    window.addEventListener(\"gamepadconnected\", e => {\r\n        console.log(\"Gamepad connected at index %d: %s. %d buttons, %d axes.\",\r\n            e.gamepad.index, e.gamepad.id,\r\n            e.gamepad.buttons.length, e.gamepad.axes.length);\r\n    });\r\n    window.addEventListener(\"gamepaddisconnected\", e => {\r\n        console.log(\"Gamepad disconnected from index %d: %s\",\r\n            e.gamepad.index, e.gamepad.id);\r\n    });\r\n}\r\n\r\nexport default class GamePad {\r\n\r\n    constructor(game){\r\n        this.game = game;\r\n    }\r\n\r\n    update(){\r\n\r\n        this.gamepads =\r\n            (navigator.getGamepads && navigator.getGamepads()) ||\r\n            (navigator.webkitGetGamepads && navigator.webkitGetGamepads()) ||\r\n            navigator.webkitGamepads || navigator.mozGamepads ||\r\n            navigator.msGamepads || navigator.gamepads || [];\r\n\r\n        for (let i=0,max=this.gamepads.length;i<max;i++) {\r\n            let gp = this.gamepads[i];\r\n            if (!gp) continue;\r\n            let maxButtons = gp.buttons.length;\r\n            if (maxButtons>7) maxButtons = 7; // only 8-buttons gamePad is supported for now\r\n            for (let j=0;j<maxButtons;j++) {\r\n                let btn = gp.buttons[j];\r\n                if (btn.pressed) {\r\n                    this.game.keyboard.press(j);\r\n                } else {\r\n                    this.game.keyboard.release(j);\r\n                }\r\n            }\r\n            if (gp.axes[0]===0) continue; // to avoid oscillations\r\n            if (gp.axes[1]===0) continue;\r\n\r\n            let axis0 = ~~(gp.axes[0]);\r\n            let axis1 = ~~(gp.axes[1]);\r\n\r\n            if (axis0===1) {\r\n                this.game.keyboard.press(this.game.keyboard.KEY.GAME_PAD_AXIS_RIGHT);\r\n            } else {\r\n                this.game.keyboard.release(this.game.keyboard.KEY.GAME_PAD_AXIS_RIGHT);\r\n            }\r\n            if (axis0===-1) {\r\n                this.game.keyboard.press(this.game.keyboard.KEY.GAME_PAD_AXIS_LEFT);\r\n            } else {\r\n                this.game.keyboard.release(this.game.keyboard.KEY.GAME_PAD_AXIS_LEFT);\r\n            }\r\n\r\n            if (axis1===1) {\r\n                this.game.keyboard.press(this.game.keyboard.KEY.GAME_PAD_AXIS_DOWN);\r\n            } else {\r\n                this.game.keyboard.release(this.game.keyboard.KEY.GAME_PAD_AXIS_DOWN);\r\n            }\r\n            if (axis1===-1) {\r\n                this.game.keyboard.press(this.game.keyboard.KEY.GAME_PAD_AXIS_UP);\r\n            } else {\r\n                this.game.keyboard.release(this.game.keyboard.KEY.GAME_PAD_AXIS_UP);\r\n            }\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/control/gamePad.ts","\n/*global DEBUG:true*/\n\nconst KEY_JUST_PRESSED = 2;\nconst KEY_PRESSED = 1;\nconst KEY_JUST_RELEASED = 0;\nconst KEY_RELEASED = -1;\n\nexport default class Keyboard {\n\n    keyDownListener = null;\n    keyUpListener = null;\n\n    KEY = {\n        SPACE: 32,\n        A: 65,\n        B: 66,\n        C: 67,\n        D: 68,\n        E: 69,\n        F: 70,\n        G: 71,\n        H: 72,\n        I: 73,\n        J: 74,\n        K: 75,\n        L: 76,\n        M: 77,\n        N: 78,\n        O: 79,\n        P: 80,\n        Q: 81,\n        R: 82,\n        S: 83,\n        T: 84,\n        U: 85,\n        V: 86,\n        W: 87,\n        X: 88,\n        Y: 89,\n        Z: 80,\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        DOWN: 40,\n\n        GAME_PAD_1: 0,\n        GAME_PAD_2: 1,\n        GAME_PAD_3: 2,\n        GAME_PAD_4: 3,\n        GAME_PAD_5: 4,\n        GAME_PAD_6: 5,\n        GAME_PAD_7: 6,\n        GAME_PAD_8: 7,\n        GAME_PAD_AXIS_LEFT: 8,\n        GAME_PAD_AXIS_RIGHT: 9,\n        GAME_PAD_AXIS_UP: 10,\n        GAME_PAD_AXIS_DOWN: 11\n\n    };\n\n    buffer = {};\n\n    constructor(game) {\n        this.game = game;\n    }\n\n    press(key){\n        if (this.isPressed(key)) return;\n        //console.log('pressed',key);\n        this.buffer[key] = KEY_JUST_PRESSED;\n    }\n\n    release(key){\n        if (this.isReleased(key)) return;\n        this.buffer[key] = KEY_JUST_RELEASED;\n    }\n\n    isPressed(key){\n        return this.buffer[key]>=KEY_PRESSED;\n    }\n\n    isJustPressed(key){\n        return this.buffer[key]===KEY_JUST_PRESSED;\n    }\n\n    isReleased(key) {\n        if (this.buffer[key]===undefined) return true;\n        return  this.buffer[key]<=KEY_JUST_RELEASED;\n    }\n\n    isJustReleased(key) {\n        return this.buffer[key] === KEY_JUST_RELEASED;\n    }\n\n    update(){\n        //if (Object.keys(this.buffer).length) console.log(this.buffer);\n        if (DEBUG && window.canceled) return;\n        Object.keys(this.buffer).forEach(key=>{\n            if (this.buffer[key]===KEY_RELEASED) delete this.buffer[key];\n            else if (this.buffer[key]===KEY_JUST_RELEASED) this.buffer[key] = KEY_RELEASED;\n            if (this.buffer[key]===KEY_JUST_PRESSED) {\n                this.buffer[key] = KEY_PRESSED;\n            }\n        });\n    }\n\n    listenTo(){\n\n        this.keyDownListener = e=>{\n            let code = e.keyCode;\n            this.press(code);\n        };\n\n        this.keyUpListener  = e=>{\n            let code = e.keyCode;\n            this.release(code);\n        };\n\n        window.addEventListener('keydown',this.keyDownListener);\n        window.addEventListener('keyup',this.keyUpListener);\n    }\n\n    destroy(){\n        window.removeEventListener('keydown',this.keyDownListener);\n        window.removeEventListener('keyup',this.keyUpListener);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/control/keyboard.ts","/*global DEBUG:true*/\nimport mathEx from '../mathEx'\n\nexport default class Mouse {\n\n    objectsCaptured = {};\n    container = null;\n\n    constructor(game){\n        this.game = game;\n        this.currPoint = null;\n    }\n\n\n    //MouseEvent|TouchEvent|PointerEvent\n    resolveScreenPoint(e){ // todo this is world point\n        let game = this.game;\n        let camera = this.game.camera;\n        let rectScaled = camera.getRectScaled();\n\n        let screenX = (e.clientX - game.pos.x ) / game.scale.x;\n        let screenY = (e.clientY - game.pos.y ) / game.scale.y;\n\n\n        let p = game.camera.screenToWorld(screenX,screenY);\n\n        return {\n            x: p.x, // separate screen and world point\n            y: p.y,\n            id: e.identifier || 0\n        };\n\n    }\n\n    triggerEvent(e,eventName,isMouseDown){\n        let g = this.game;\n        let scene = g.getCurrScene();\n        if (!scene) return;\n        let point = this.resolveScreenPoint(e);\n\nexit:   for (let i=0;i<scene.layers.length;i++){\n            let layer = scene.layers[scene.layers.length - 1 - i];\n            for (let j=0;j<layer.gameObjects.length;j++){\n                let go = layer.gameObjects[j];\n                if (\n                    mathEx.isPointInRect(point,go.getRect())\n                ) {\n                    go.trigger(eventName,{\n                        screenX:point.x,\n                        screenY:point.y,\n                        objectX:point.x - go.pos.x,\n                        objectY:point.y - go.pos.y,\n                        id:point.id,\n                        isMouseDown\n                    });\n                    break exit;\n                }\n            }\n        }\n\n        scene.trigger(eventName,{\n            screenX:point.x,\n            screenY:point.y,\n            id:point.id,\n            target:scene,\n            isMouseDown\n        });\n\n        return point;\n    }\n\n    resolveClick(e){\n        this.triggerEvent(e,'click');\n        this.triggerEvent(e,'mouseDown');\n    }\n\n    resolveMouseMove(e,isMouseDown){\n        let point = this.triggerEvent(e,'mouseMove',isMouseDown);\n        if (!point) return;\n        let lastMouseDownObject = this.objectsCaptured[point.id];\n        if (lastMouseDownObject && lastMouseDownObject!==point.object) {\n            lastMouseDownObject.trigger('mouseLeave');\n            delete this.objectsCaptured[point.id];\n        }\n        if (point.object && lastMouseDownObject!==point.object) {\n            point.object.trigger('mouseEnter');\n            this.objectsCaptured[point.id] = point.object;\n        }\n    }\n\n    resolveMouseUp(e){\n        let point = this.triggerEvent(e,'mouseUp');\n        if (!point) return;\n        let lastMouseDownObject = this.objectsCaptured[point.id];\n        if (!lastMouseDownObject) return;\n        lastMouseDownObject.trigger('mouseUp');\n        delete this.objectsCaptured[point.id];\n    }\n\n    resolveDoubleClick(e){\n        let point = this.triggerEvent(e,'doubleClick');\n        if (!point) return;\n        delete this.objectsCaptured[point.id];\n    }\n\n    listenTo(container) {\n        this.container = container;\n        // mouseDown\n        container.ontouchstart = e=>{\n            let l = e.touches.length;\n            while (l--){\n                this.resolveClick(e.touches[l]);\n            }\n        };\n        container.onmousedown = e=>{\n            (e.button === 0) && this.resolveClick(e);\n        };\n        // mouseUp\n        container.ontouchend = container.ontouchcancel = e=>{\n            let l = e.changedTouches.length;\n            while (l--){\n                this.resolveMouseUp(e.changedTouches[l]);\n            }\n        };\n        container.onmouseup = e=>{\n            this.resolveMouseUp(e);\n        };\n        //\n        container.ontouchmove = e=>{\n            let l = e.touches.length;\n            while (l--){\n                this.resolveMouseMove(e.touches[l],true);\n            }\n        };\n        container.onmousemove = e=>{\n            let isMouseDown = e.buttons === 1;\n            this.resolveMouseMove(e,isMouseDown);\n        };\n        // other\n        container.ondblclick = e=>{ // todo now only on pc\n            this.resolveDoubleClick(e);\n        }\n    }\n\n    destroy(){\n        [\n            'mouseMove','ontouchstart','onmousedown',\n            'ontouchend','onmouseup','ontouchmove',\n            'onmousemove','ondblclick'].forEach(evtName=>{\n                this.container[evtName] = null;\n        })\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/control/mouse.ts","const isCocoonJS = !!navigator.isCocoonJS;\r\n\r\n\r\nexport default class Device {\r\n\r\n    constructor(game){\r\n    }\r\n\r\n    static isCocoonJS = isCocoonJS;\r\n    static scale = isCocoonJS?(window.devicePixelRatio||1):1;\r\n    static isTouch = (typeof window !== 'undefined' && 'ontouchstart' in window);\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/device.ts","\r\nexport default class Point2d {\r\n\r\n    x;\r\n    y;\r\n\r\n    constructor(x = 0,y = 0){\r\n        this.set(x,y);\r\n    }\r\n\r\n    set(x,y){\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    add(another){\r\n        this.x+=another.x;\r\n        this.y+=another.y;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/geometry/point2d.ts","\r\nexport default class Vec2 {\r\n\r\n    constructor(x=0,y=0){\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    // скалярное произведение\r\n    dotProduct(another){\r\n        return this.x*another.x + this.y*another.y;\r\n    }\r\n\r\n    crossProduct(another) {\r\n        return this.x * another.y - this.y * another.x;\r\n    }\r\n\r\n    setXY(x,y){\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    addXY(x,y){\r\n        this.x += x;\r\n        this.y += y;\r\n    }\r\n\r\n    multToScalar(scalar,mutateOrigin = true){\r\n        if (mutateOrigin) return new Vec2(this.x*scalar,this.y*scalar);\r\n        this.x*=scalar;\r\n        this.y*=scalar;\r\n        return this;\r\n    }\r\n\r\n    divByScalar(scalar,mutateOrigin = true){\r\n        return this.multToScalar(1/scalar,mutateOrigin);\r\n    }\r\n\r\n    plus(another,mutateOrigin = false){\r\n        if (!mutateOrigin) return new Vec2(this.x+another.x,this.y+another.y);\r\n        this.x+=another.x;\r\n        this.y+=another.y;\r\n        return this;\r\n    }\r\n\r\n    minus(another,mutateOrigin = false){\r\n        if (!mutateOrigin) return new Vec2(this.x-another.x,this.y-another.y);\r\n        this.x-=another.x;\r\n        this.y-=another.y;\r\n        return this;\r\n    }\r\n\r\n    getLength() {\r\n        return Math.sqrt(this.lengthSquared());\r\n    }\r\n\r\n    lengthSquared() {\r\n        return (this.x * this.x) + (this.y * this.y);\r\n    }\r\n\r\n    normalize() {\r\n        let length = this.getLength();\r\n        this.x = this.x / length;\r\n        this.y = this.y / length;\r\n        return this;\r\n    }\r\n\r\n    setLength(value) {\r\n        let _angle = this.getAngle();\r\n        this.x = Math.cos(_angle) * value;\r\n        this.y = Math.sin(_angle) * value;\r\n    };\r\n\r\n    getAngle() {\r\n        return Math.atan2(this.y, this.x);\r\n    };\r\n\r\n    getAngleBetween(that){\r\n        return Math.acos(\r\n            (this.x*that.x + this.y*that.y)/\r\n            this.getLength()*that.getLength()\r\n        )\r\n    }\r\n\r\n    setAngle(value) {\r\n        let len = this.getLength();\r\n        this.x = Math.cos(value) * len;\r\n        this.y = Math.sin(value) * len;\r\n    };\r\n\r\n    clone() {\r\n        return new Vec2(this.x, this.y);\r\n    }\r\n\r\n    static angleBetween(v1, v2) {\r\n        v1 = v1.clone().normalize();\r\n        v2 = v2.clone().normalize();\r\n        return Math.acos(v1.dotProduct(v2));\r\n    };\r\n\r\n    static normalBetween(v1,v2){\r\n        let v = v1.minus(v2);\r\n        return v.normalize();\r\n    }\r\n\r\n    static distance(a,b) {\r\n        return Math.sqrt(Vec2.distanceSquared(a,b));\r\n    }\r\n\r\n    static distanceSquared(a, b) {\r\n        return (a.x - b.x)*(a.x - b.x) + (a.y - b.y)*((a.y - b.y));\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/geometry/vec2.ts","\nexport default class EventEmitter{\n\n    events = {};\n\n    constructor(){\n\n    }\n\n    _on(name,callBack){\n        this.events[name] = this.events[name] || [];\n        this.events[name].push(callBack);\n    }\n\n    on(eventNameOrList,callBack){\n        if (typeof  eventNameOrList === 'string') {\n            this._on(eventNameOrList,callBack);\n        } else if (eventNameOrList.splice) {\n            eventNameOrList.forEach(function(eventName){\n                this._on(eventName,callBack);\n            });\n        }\n\n    };\n\n    trigger(eventName,data){\n        let es = this.events[eventName];\n        if (!es) return;\n        let l = es.length;\n        while(l--){\n            es[l](data);\n        }\n    };\n};\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/misc/eventEmitter.ts","export default class Queue{\n\n    tasksResolved = 0;\n    tasks = [];\n    tasksProgressById = {};\n    onResolved = null;\n    onProgress = null;\n\n    constructor(){\n\n    }\n\n    size(){\n        return this.tasks.length;\n    }\n\n    calcProgress(){\n        let sum = 0;\n        Object.keys(this.tasksProgressById).forEach(function(taskId){\n            sum+=this.tasksProgressById[taskId]||0;\n        });\n        return sum/this.tasks.length;\n    }\n\n    addTask(taskFn,taskId) {\n        this.tasks.push(taskFn);\n        this.tasksProgressById[taskId] = 0;\n    };\n    progressTask(taskId,progress){\n        this.tasksProgressById[taskId] = progress;\n        this.onProgress && this.onProgress(this.calcProgress());\n    };\n    resolveTask(taskId){\n        this.tasksResolved++;\n        this.tasksProgressById[taskId] = 1;\n        if (this.tasks.length===this.tasksResolved) {\n            this.onProgress && this.onProgress(1);\n            if (this.onResolved) this.onResolved();\n        } else {\n            this.onProgress && this.onProgress(this.calcProgress());\n        }\n    };\n    start() {\n        if (this.size()===0) this.onResolved();\n        this.tasks.forEach(t=>{\n            t && t();\n        });\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/misc/loadingQueue.ts","\nArray.prototype.remove = function(callback) {\n    let i = this.length;\n    while (i--) {\n        if (callback(this[i], i)) {\n            this.splice(i, 1);\n        }\n    }\n};\n\nwindow.requestAnimationFrame =\n    window.requestAnimationFrame||\n    window.webkitRequestAnimationFrame||\n    function(f){setTimeout(f,17)};\n\n\nif (!window.cancelAnimationFrame) {\n    global.cancelAnimationFrame = (id) => clearTimeout(id);\n}\n\nif (!Array.prototype.find) {\n    Array.prototype.find = function(predicate) {\n        if (this == null) {\n            throw new TypeError('Array.prototype.find called on null or undefined');\n        }\n        if (typeof predicate !== 'function') {\n            throw new TypeError('predicate must be a function');\n        }\n        let list = Object(this);\n        let length = list.length >>> 0;\n        let thisArg = arguments[1];\n        let value;\n\n        for (let i = 0; i < length; i++) {\n            value = list[i];\n            if (predicate.call(thisArg, value, i, list)) {\n                return value;\n            }\n        }\n        return undefined;\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/misc/polyfills.ts","\r\n// http://madebyevan.com/gamedevclass/minimal-demo/\r\n\r\nimport Vec2 from '../geometry/vec2'\r\n\r\nexport default class ArcadeRigidBody {\r\n\r\n    vel = new Vec2();\r\n\r\n    constructor(gameObject){\r\n        this.game = gameObject.game;\r\n        this.gameObject = gameObject;\r\n    }\r\n\r\n    update(time,delta){\r\n        if (!this.gameObject.rigidBody.static) {\r\n            let deltaX = this.vel.x * delta / 1000;\r\n            let deltaY = this.vel.y * delta / 1000;\r\n            let expectedY = this.gameObject.pos.y + deltaY;\r\n            this.game.collider.moveBy(this.gameObject,deltaX,deltaY);\r\n            this.gameObject.rigidBody.onFloor = expectedY > this.gameObject.pos.y;\r\n            if (expectedY !== this.gameObject.pos.y) this.vel.y = 0;\r\n            this.vel.y+=this.game.gravityConstant * delta / 1000;\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/physics/arcadeRigidBody.ts","\n\nimport {overlapTest} from '../mathEx'\n\nexport default class Collider {\n\n    constructor(game){\n        this.game = game;\n    }\n\n    moveBy(player, dX, dY) {\n\n        let rigidObjects =\n            this.game.getCurrScene().getAllGameObjects().\n            concat(this.game._currentScene.tileMap.getTilesAtRect(player.getRect()));\n\n        let playerRect = player.getRect();\n        playerRect.x+=dX;\n        playerRect.y+=dY;\n        let collidedByX = false, collidedByY = false;\n\n        for (let i = 0,len = rigidObjects.length;i<len;i++) {\n            let obstacle = rigidObjects[i];\n            let obstacleRect = obstacle.getRect();\n            if (player!==rigidObjects[i] && overlapTest(playerRect, obstacleRect)) {\n\n                let pathToTop = playerRect.bottom - obstacleRect.y;\n                let pathToBottom = obstacleRect.bottom - playerRect.y;\n                let pathToLeft = playerRect.x + playerRect.width - obstacleRect.x;\n                let pathToRight = obstacleRect.right - playerRect.x;\n\n                let minPath = Math.min(pathToTop,pathToBottom,pathToLeft,pathToRight);\n\n                if (pathToTop===minPath) { // closest path to move player to resolve collision is path to top\n                    //console.log('top');\n                    player.pos.y = obstacleRect.y - playerRect.height;\n                    collidedByY = true;\n                }\n                else if (pathToBottom===minPath) { // closest path to move player to resolve collision is path to top\n                    //console.log('bottom');\n                    player.pos.y = obstacleRect.bottom;\n                    collidedByY = true;\n                }\n                else if (pathToLeft===minPath) { // closest path to move player to resolve collision is path to top\n                    //console.log('left');\n                    player.pos.x = obstacleRect.x - playerRect.width;\n                    collidedByX = true;\n                }\n                else if (pathToRight===minPath) { // closest path to move player to resolve collision is path to top\n                    //console.log('right');\n                    player.pos.x = obstacleRect.x + obstacleRect.width;\n                    collidedByX = true;\n                }\n\n            }\n        }\n        if (!collidedByX) player.pos.x+=dX;\n        if (!collidedByY) player.pos.y+=dY;\n    }\n\n\n\n    moveTo(player,newX,newY){ // todo not works!\n        let pRect = player.getRect();\n        let collided = false;\n        if (player.rigidBody) {\n            this.game.getCurrScene().getAllGameObjects().\n            concat(this.game._currentScene.tileMap.getTilesAtRect(pRect)).\n            some(g=>{\n                if (overlapTest(pRect,g.getRect())) {\n                    collided = true;\n                    return true;\n                }\n            });\n        }\n        if (collided) return;\n        player.pos.x = newX;\n        player.pos.y = newY;\n    }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/physics/collider.ts","/*global DEBUG:true*/\n\nimport TextField from '../../../model/generic/ui/textField'\nimport Device from '../../device'\n\nexport default class AbstractRenderer {\n\n    renderableCache = {};\n    container = null;\n    debugTextField = null;\n    fullScreenSize = {w:0,h:0,scaleFactor:1};\n\n    constructor(game){\n        this.game = game;\n        if (Device.isCocoonJS) {\n            this.fullScreenSize.w = window.innerWidth*Device.scale;\n            this.fullScreenSize.h = window.innerHeight*Device.scale;\n            this.fullScreenSize.scaleFactor =\n                Math.min(this.fullScreenSize.w / this.game.width, this.fullScreenSize.h / this.game.height);\n        } else {\n            this.fullScreenSize.w = game.width;\n            this.fullScreenSize.h = game.height;\n        }\n        //document.body.addEventListener('click',()=>this.requestFullScreen());\n    }\n\n    onResize(){\n        let canvasRatio = this.container.height / this.container.width;\n        let windowRatio = window.innerHeight / window.innerWidth;\n        let width;\n        let height;\n\n        if (windowRatio < canvasRatio) {\n            height = window.innerHeight;\n            width = height / canvasRatio;\n        } else {\n            width = window.innerWidth;\n            height = width * canvasRatio;\n        }\n        this.game.scale.x = width / this.game.width;\n        this.game.scale.y = height / this.game.height;\n        this.game.pos.x = (window.innerWidth - width) / 2;\n        this.game.pos.y = (window.innerHeight - height) / 2;\n\n        this.container.style.width = width + 'px';\n        this.container.style.height = height + 'px';\n        this.container.style.marginTop = `${this.game.pos.y}px`;\n\n    }\n\n    requestFullScreen(){\n        let element = this.container;\n        if(element.requestFullScreen) {\n            element.requestFullScreen();\n        } else if(element.mozRequestFullScreen) {\n            element.mozRequestFullScreen();\n        } else if(element.webkitRequestFullScreen) {\n            element.webkitRequestFullScreen();\n        }\n    }\n\n    cancelFullScreen(){\n        if(document.cancelFullScreen) {\n            document.cancelFullScreen();\n        } else if(document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if(document.webkitCancelFullScreen) {\n            document.webkitCancelFullScreen();\n        }\n    }\n\n    beginFrameBuffer(){}\n\n    flipFrameBuffer(){\n        if (DEBUG) {\n            if (this.debugTextField) this.debugTextField._render();\n        }\n    }\n\n    registerResize(){\n        this.onResize();\n        window.addEventListener('resize',()=>this.onResize());\n    }\n\n    destroy(){\n        window.removeEventListener('resize',this.onResize);\n    }\n\n    getError(){\n        return 0;\n    }\n\n    log(){\n        if (!DEBUG) return;\n        let textField = this.debugTextField;\n        let res = '';\n        Array.prototype.slice.call(arguments).forEach(txt=>{\n            if (txt===undefined) txt = 'undefined';\n            if (txt===null) txt = 'null';\n            if (txt.toJSON) {\n                txt = JSON.stringify(txt.toJSON(),null,4);\n            }\n            else {\n                try{\n                    txt = JSON.stringify(txt);\n                } catch (e){}\n            }\n            if (typeof txt!=='string') txt = txt.toString();\n            res+=`${txt}\\n`;\n        });\n        if (!textField) {\n            textField = new TextField(this.game);\n            textField.name = 'defaultName';\n            textField.revalidate();\n            this.debugTextField = textField;\n        }\n        textField.pos.x = 10;\n        textField.pos.y = 10;\n        textField.setText(textField.getText()+res);\n    }\n\n    loadTextureInfo(textureId,info){}\n\n    getTextureInfo(textureId){}\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/abstract/abstractRenderer.ts","\n//import HtmlRenderer from './dom/htmlRenderer'\n//import Renderer from './canvas/canvasRenderer'\nimport Renderer from './webGl/webGlRenderer'\n//import SvgRenderer from './dom/svgRenderer'\n\nexport default class RendererFactory {\n    static getRenderer(game){\n        if (!game) throw `RendererFactory::getRenderer: game param not specified`;\n        return new Renderer(game);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/rendererFactory.ts","/*global DEBUG:true*/\n\nimport Texture from './texture'\n\nexport default class FrameBuffer {\n\n    constructor(gl,width,height){\n        if (DEBUG && !gl) throw \"can not create FrameBuffer, gl context not passed to constructor, expected: FrameBuffer(gl)\";\n\n        this.gl = gl;\n        this.width = width;\n        this.height = height;\n\n        this.texture = new Texture(gl);\n        this.texture.setImage(null,width,height);\n        this._init(gl,width,height);\n    }\n\n    _init(gl,width,height){\n        // Init Render Buffer\n        this.glRenderBuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.glRenderBuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, width, height);\n        // Init Frame Buffer\n        this.glFrameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFrameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture.getGlTexture(), 0);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this.glRenderBuffer);\n        // Clean up\n        this.texture.unbind();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n\n    bind(){\n        this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.glFrameBuffer);\n        this.gl.viewport(0, 0, this.width,this.height);\n    }\n\n    unbind(){\n        this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);\n    }\n\n    getTexture(){\n        return this.texture;\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/base/frameBuffer.ts","\nimport mat4 from '../../../geometry/mat4'\n\nexport default class MatrixStack {\n\n    stack = [];\n\n    constructor(){\n       this.restore();\n    }\n\n    restore () {\n        this.stack.pop();\n        // Never let the stack be totally empty\n        if (this.stack.length < 1) {\n            this.stack[0] = mat4.makeIdentity();\n        }\n    }\n\n    save() {\n        this.stack.push(this.getCurrentMatrix());\n    }\n\n    getCurrentMatrix() {\n        return this.stack[this.stack.length - 1].slice();\n    }\n\n    setCurrentMatrix(m) {\n        return this.stack[this.stack.length - 1] = m;\n    }\n\n    translate(x, y, z) {\n        if (z === undefined) {\n            z = 0;\n        }\n        let t = mat4.makeTranslation(x, y, z);\n        let m = this.getCurrentMatrix();\n        this.setCurrentMatrix(mat4.matrixMultiply(t, m));\n    }\n\n    rotateZ(angleInRadians) {\n        let t = mat4.makeZRotation(angleInRadians);\n        let m = this.getCurrentMatrix();\n        this.setCurrentMatrix(mat4.matrixMultiply(t, m));\n    }\n\n    rotateY(angleInRadians) {\n        let t = mat4.makeYRotation(angleInRadians);\n        let m = this.getCurrentMatrix();\n        this.setCurrentMatrix(mat4.matrixMultiply(t, m));\n    }\n\n    scale (x, y, z) {\n        if (z === undefined) {\n            z = 1;\n        }\n        let t = mat4.makeScale(x, y, z);\n        let m = this.getCurrentMatrix();\n        this.setCurrentMatrix(mat4.matrixMultiply(t, m));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/base/matrixStack.ts","import AbstractPrimitive from './abstractPrimitive'\r\n\r\nexport default class Circle extends AbstractPrimitive {\r\n\r\n    constructor(){\r\n        super();\r\n        this.vertexArr = [];\r\n        //this.indexArr = [];\r\n        //let i = 0;\r\n        let Pi2 = Math.PI*2;\r\n        this.vertexArr.push(0.5);\r\n        this.vertexArr.push(0.5);\r\n        for (let a=0,max=Pi2;a<max;a+=0.1) {\r\n            this.vertexArr.push(Math.cos(a)/2 + 0.5);\r\n            this.vertexArr.push(Math.sin(a)/2 + 0.5);\r\n            //this.indexArr.push(i++);\r\n        }\r\n        this.vertexArr.push(Math.cos(Pi2)/2 + 0.5);\r\n        this.vertexArr.push(Math.sin(Pi2)/2 + 0.5);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/primitives/circle.ts","\r\nimport AbstractPrimitive from './abstractPrimitive'\r\n\r\nexport default class Line extends AbstractPrimitive {\r\n\r\n    constructor(){\r\n        super();\r\n        this.vertexArr = [\r\n            0, 0,\r\n            1, 1\r\n        ];\r\n        this.indexArr = [0,1];\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/primitives/line.ts","\r\nimport Circle from '../primitives/circle'\r\nimport Plane from '../primitives/plane'\r\nimport ShaderProgram from '../base/shaderProgram'\r\nimport VertexBuffer from '../base/vertexBuffer'\r\nimport IndexBuffer from '../base/indexBuffer'\r\n\r\nimport basicVertexShader from '../shaders/basic/vertex3.vert'\r\nimport colorShader from '../shaders/color/fragment.frag'\r\nimport AbstractDrawer from \"./abstractDrawer\";\r\n\r\nexport default class CircleDrawer extends AbstractDrawer {\r\n\r\n    constructor(gl,game){\r\n        super(gl,game);\r\n        this.program = new ShaderProgram(gl, [\r\n            basicVertexShader,\r\n            colorShader\r\n        ]);\r\n        this.circle = new Circle();\r\n\r\n        this.posVertexBuffer = new VertexBuffer(gl);\r\n\r\n        this.posVertexBuffer.setData(this.circle.vertexArr,this.gl.FLOAT,2);\r\n    }\r\n\r\n    bind(){\r\n        super.bind();\r\n        this.program.bind();\r\n        this.posVertexBuffer.bind(this.program,'a_position');\r\n    }\r\n\r\n    draw(){\r\n        this.gl.drawArrays(\r\n            this.gl.TRIANGLE_FAN,0, // gl.STREAM_DRAW\r\n            this.posVertexBuffer.getBufferLength()/2\r\n        );\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/circleDrawer.ts","\nimport Plane from '../primitives/plane'\nimport ShaderProgram from '../base/shaderProgram'\nimport VertexBuffer from '../base/vertexBuffer'\nimport IndexBuffer from '../base/indexBuffer'\n\nimport basicVertexShader from '../shaders/basic/vertex3.vert'\nimport colorShader from '../shaders/color/fragment.frag'\nimport AbstractDrawer from \"./abstractDrawer\";\n\nexport default class ColorRectDrawer extends AbstractDrawer{\n\n    constructor(gl,game){\n        super(gl,game);\n        this.plane = new Plane();\n        this.program = new ShaderProgram(gl, [\n            basicVertexShader,\n            colorShader\n        ]);\n\n        this.posVertexBuffer = new VertexBuffer(gl);\n        this.posIndexBuffer = new IndexBuffer(gl);\n\n        this.posVertexBuffer.setData(this.plane.vertexArr,this.gl.FLOAT,2);\n        this.posIndexBuffer.setData(this.plane.indexArr);\n    }\n\n\n    bind(){\n        super.bind();\n        this.program.bind();\n\n        this.posVertexBuffer.bind(this.program,'a_position');\n\n        this.posIndexBuffer.bind();\n    }\n\n    draw(){\n        this.gl.drawElements(\n            this.gl.TRIANGLE_STRIP, \n            this.posIndexBuffer.getBufferLength(), \n            this.gl.UNSIGNED_SHORT,0\n        );\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/colorRectDrawer.ts","\nimport Line from '../primitives/line'\nimport ShaderProgram from '../base/shaderProgram'\nimport VertexBuffer from '../base/vertexBuffer'\nimport IndexBuffer from '../base/indexBuffer'\n\nimport basicVertexShader from '../shaders/basic/vertex3.vert'\nimport colorShader from '../shaders/color/fragment.frag'\nimport AbstractDrawer from \"./abstractDrawer\";\n\nexport default class LineDrawer extends AbstractDrawer {\n\n    constructor(gl,game){\n        super(gl,game);\n        this.program = new ShaderProgram(gl, [\n            basicVertexShader,\n            colorShader\n        ]);\n        this.line = new Line();\n\n        this.posVertexBuffer = new VertexBuffer(gl);\n        this.posIndexBuffer = new IndexBuffer(gl);\n\n        this.posVertexBuffer.setData(this.line.vertexArr,this.gl.FLOAT,2);\n    }\n\n    bind(){\n        super.bind();\n        this.program.bind();\n\n        this.posVertexBuffer.bind(this.program,'a_position');\n    }\n\n    draw(){\n        this.gl.drawArrays(\n            this.gl.LINE_STRIP, 0,\n            this.posVertexBuffer.getBufferLength()/2\n        );\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/lineDrawer.ts","\n\nimport ShaderProgram from '../base/shaderProgram'\nimport VertexBuffer from '../base/vertexBuffer'\nimport IndexBuffer from '../base/indexBuffer'\n\nimport basicVertexShader from '../shaders/basic/vertex2.vert'\nimport textureShader from '../shaders/texture/fragment2.frag'\nimport AbstractDrawer from \"./abstractDrawer\";\n\nexport default class ModelDrawer extends AbstractDrawer {\n\n    constructor(gl,game){\n        super(gl,game);\n        this.program = new ShaderProgram(gl, [\n            basicVertexShader,\n            textureShader\n        ]);\n\n        this.posVertexBuffer = new VertexBuffer(gl);\n        this.texVertexBuffer = new VertexBuffer(gl);\n        this.normalBuffer = new VertexBuffer(gl);\n        this.posIndexBuffer = new IndexBuffer(gl);\n\n        this.program.bind();\n    }\n\n    bind(model){\n        super.bind();\n        this.program.bind();\n        let gl = this.gl;\n        let program = this.program;\n\n        this.posVertexBuffer.setData(model.vertexArr,gl.FLOAT,3);\n        program.bindBuffer(this.posVertexBuffer,'a_position');\n\n        this.texVertexBuffer.setData(model.texCoordArr,gl.FLOAT,2);\n        program.bindBuffer(this.texVertexBuffer,'a_texcoord');\n\n        this.normalBuffer.setData(model.normalArr,gl.FLOAT,3);\n        program.bindBuffer(this.normalBuffer,'a_normal');\n\n        this.posIndexBuffer.setData(model.indexArr);\n        this.posIndexBuffer.bind();\n    }\n\n\n\n    draw(){\n        this.gl.drawElements(\n            this.gl.TRIANGLES, \n            this.posIndexBuffer.getBufferLength(), \n            this.gl.UNSIGNED_SHORT,0\n        );\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/modelDrawer.ts","\n\nimport Plane from '../primitives/plane'\nimport ShaderProgram from '../base/shaderProgram'\nimport VertexBuffer from '../base/vertexBuffer'\nimport IndexBuffer from '../base/indexBuffer'\n\nimport basicVertexShader from '../shaders/basic/vertex.vert'\nimport textureShader from '../shaders/texture/fragment.frag'\nimport AbstractDrawer from \"./abstractDrawer\";\n\nexport default class SpriteRectDrawer extends AbstractDrawer {\n\n    constructor(gl,game){\n        super(gl,game);\n        this.plane = new Plane();\n        this.program = new ShaderProgram(gl, [\n            basicVertexShader,\n            textureShader\n        ]);\n\n        this.posVertexBuffer = new VertexBuffer(gl);\n        this.posIndexBuffer = new IndexBuffer(gl);\n        this.texVertexBuffer = new VertexBuffer(gl);\n\n        this.posIndexBuffer.setData(this.plane.indexArr);\n        this.posVertexBuffer.setData(this.plane.vertexArr,gl.FLOAT,2);\n        this.texVertexBuffer.setData(this.plane.texCoordArr,gl.FLOAT,2);\n\n    }\n\n\n    bind(){\n        super.bind();\n        this.program.bind();\n\n        this.posIndexBuffer.bind();\n\n        this.posVertexBuffer.bind(this.program,'a_position');\n\n        this.texVertexBuffer.bind(this.program,'a_texcoord');\n    }\n\n\n    draw(){\n        this.gl.drawElements(\n            this.gl.TRIANGLE_STRIP,\n            this.posIndexBuffer.getBufferLength(),\n            this.gl.UNSIGNED_SHORT,0\n        );\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/spriteRectDrawer.ts","\r\nimport Plane from '../primitives/plane'\r\nimport ShaderProgram from '../base/shaderProgram'\r\nimport VertexBuffer from '../base/vertexBuffer'\r\nimport IndexBuffer from '../base/indexBuffer'\r\n\r\nimport basicVertexShader from '../shaders/basic/vertex.vert'\r\nimport textureShader from '../shaders/tiled/fragment.frag'\r\nimport AbstractDrawer from \"./abstractDrawer\";\r\n\r\nexport default class TiledSpriteRectDrawer extends AbstractDrawer {\r\n\r\n    constructor(gl,game){\r\n        super(gl,game);\r\n        this.plane = new Plane();\r\n        this.program = new ShaderProgram(gl, [\r\n            basicVertexShader,\r\n            textureShader\r\n        ]);\r\n\r\n        this.posVertexBuffer = new VertexBuffer(gl);\r\n        this.posIndexBuffer = new IndexBuffer(gl);\r\n        this.texVertexBuffer = new VertexBuffer(gl);\r\n\r\n        this.posIndexBuffer.setData(this.plane.indexArr);\r\n        this.posVertexBuffer.setData(this.plane.vertexArr,gl.FLOAT,2);\r\n        this.texVertexBuffer.setData(this.plane.texCoordArr,gl.FLOAT,2);\r\n\r\n    }\r\n\r\n    bind(){\r\n        super.bind();\r\n        this.program.bind();\r\n        this.posIndexBuffer.bind();\r\n        this.posVertexBuffer.bind(this.program,'a_position');\r\n        this.texVertexBuffer.bind(this.program,'a_texcoord');\r\n    }\r\n\r\n\r\n    draw(){\r\n        this.gl.drawElements(\r\n            this.gl.TRIANGLE_STRIP,\r\n            this.posIndexBuffer.getBufferLength(),\r\n            this.gl.UNSIGNED_SHORT,0\r\n        );\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/renderProgram/tiledSpriteRectDrawer.ts","\n/*global Image:true*/\n/*global DEBUG:true*/\n\nimport AbstractRenderer from '../abstract/abstractRenderer'\nimport SpriteRectDrawer from './renderProgram/spriteRectDrawer'\nimport TiledSpriteRectDrawer from './renderProgram/tiledSpriteRectDrawer'\nimport ColorRectDrawer from './renderProgram/colorRectDrawer'\nimport AbstractDrawer from './renderProgram/abstractDrawer'\nimport LineDrawer from './renderProgram/lineDrawer'\nimport CircleDrawer from './renderProgram/circleDrawer'\nimport ModelDrawer from './renderProgram/modelDrawer'\nimport FrameBuffer from './base/frameBuffer'\nimport MatrixStack from './base/matrixStack'\nimport mat4 from '../../geometry/mat4'\nimport matEx from '../../mathEx'\nimport Texture from './base/texture'\n\nlet stop = 0;\n\nconst getCtx = el=>{\n    return (\n        el.getContext(\"webgl\",{alpha: false}) ||\n        el.getContext('experimental-webgl',{alpha: false}) ||\n        el.getContext('webkit-3d',{alpha: false}) ||\n        el.getContext('moz-webgl',{alpha: false})\n    );\n};\nconst SCENE_DEPTH = 1000;\nconst matrixStack = new MatrixStack();\n\nconst makePositionMatrix = function(dstX,dstY,dstWidth,dstHeight,viewWidth,viewHeight){\n\n    let zToWMatrix = mat4.makeZToWMatrix(1);\n    let projectionMatrix = mat4.ortho(0,viewWidth,0,viewHeight,-SCENE_DEPTH,SCENE_DEPTH);\n    let scaleMatrix = mat4.makeScale(dstWidth, dstHeight, 1);\n    let translationMatrix = mat4.makeTranslation(dstX, dstY, 0);\n\n    let matrix = mat4.matrixMultiply(scaleMatrix, translationMatrix);\n    matrix = mat4.matrixMultiply(matrix, matrixStack.getCurrentMatrix());\n    matrix = mat4.matrixMultiply(matrix, projectionMatrix);\n    matrix = mat4.matrixMultiply(matrix, zToWMatrix);\n    return matrix;\n};\n\nconst makeTextureMatrix = function(srcX,srcY,srcWidth,srcHeight,texWidth,texHeight){\n\n    let texScaleMatrix = mat4.makeScale(srcWidth / texWidth, srcHeight / texHeight, 1);\n    let texTranslationMatrix = mat4.makeTranslation(srcX / texWidth, srcY / texHeight, 0);\n    return mat4.matrixMultiply(texScaleMatrix, texTranslationMatrix);\n};\n\nexport default class WebGlRenderer extends AbstractRenderer {\n\n    constructor(game){\n        super(game);\n        // todo DRY\n        let container = document.createElement('canvas');\n        document.body.appendChild(container);\n        container.setAttribute('width',game.width);\n        container.setAttribute('height',game.height);\n        this.container = container;\n        this.matrixStack = matrixStack;\n        this.registerResize();\n        this.currTex = null;\n        this._init();\n    }\n\n    _init(){\n    \tlet gl = getCtx(this.container);\n    \tthis.gl = gl;\n\n        this.circleDrawer = new CircleDrawer(gl);\n        this.spriteRectDrawer = new SpriteRectDrawer(gl);\n        this.tiledSpriteRectDrawer = new TiledSpriteRectDrawer(gl);\n        this.colorRectDrawer = new ColorRectDrawer(gl);\n        this.lineDrawer = new LineDrawer(gl);\n        this.modelDrawer = new ModelDrawer(gl);\n\n        this.frameBuffer = new FrameBuffer(gl,this.game.width,this.game.height);\n\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n    }\n\n    draw(renderable){\n\n        if (stop) return;\n\n        if (!matEx.overlapTest(this.game.camera.getRectScaled(),renderable.getRect())) return;\n        this.save();\n        // todo check if angle neq 0\n        let halfV = renderable.width /2;\n        let halfH = renderable.height/2;\n        this.translate(renderable.pos.x + halfV,renderable.pos.y + halfH);\n        this.scale(renderable.scale.x,renderable.scale.y);\n        this.rotateZ(renderable.angle);\n        //ctx.rotateY(a);\n        this.translate(-halfV, -halfH);\n\n        this.drawImage(\n            renderable.spriteSheet.resourcePath,\n            renderable._sprPosX,\n            renderable._sprPosY,\n            renderable.width,\n            renderable.height,\n            0,\n            0,\n            renderable.width,\n            renderable.height\n        );\n        this.restore();\n    }\n\n    drawImage(texturePath,\n              srcX, srcY, srcWidth, srcHeight,\n              dstX, dstY){\n\n        if (stop) return;\n        //if (!matEx.overlapTest(this.game.camera.getRect(),{x,y,width,height})) return; todo\n\n        this.gl.blendFunc(this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA);\n        //gl.blendColor(0, 0.5, 1, 1);\n\n        let texture = this.renderableCache[texturePath];\n        if (DEBUG && !texture) {\n            if (!texturePath) throw `no texture path provided`;\n            else throw `can not find texture with path ${texturePath}`;\n        }\n        let texWidth = texture.getSize().width;\n        let texHeight = texture.getSize().height;\n\n        // if (dstX === undefined) {\n        //     dstX = srcX;\n        // }\n        // if (dstY === undefined) {\n        //     dstY = srcY;\n        // }\n        // if (srcWidth === undefined) {\n        //     srcWidth = texWidth;\n        // }\n        // if (srcHeight === undefined) {\n        //     srcHeight = texHeight;\n        // }\n\n        if (this.currTex!==texture){\n            texture.bind();\n            this.currTex = texture;\n        }\n\n        this.spriteRectDrawer.bind();\n        this.spriteRectDrawer.setUniform(\"u_textureMatrix\",makeTextureMatrix(srcX,srcY,srcWidth,srcHeight,texWidth,texHeight));\n        this.spriteRectDrawer.setUniform(\"u_PositionMatrix\",\n            makePositionMatrix(\n                dstX,dstY,srcWidth,srcHeight,\n                this.game.width,this.game.height)\n            );\n        this.spriteRectDrawer.setUniform('u_alpha',1); // alpha\n        this.spriteRectDrawer.draw();\n\n    }\n\n    drawTiledImage(texturePath,\n                   srcX,srcY,srcWidth,srcHeight,\n                   dstX, dstY, dstWidth, dstHeight,\n                   offsetX,offsetY){\n\n        this.gl.blendFunc(this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA);\n        //gl.blendColor(0, 0.5, 1, 1);\n\n        let texture = this.renderableCache[texturePath];\n        if (DEBUG && !texture) {\n            if (!texturePath) throw `no texture path provided`;\n            else throw `can not find texture with path ${texturePath}`;\n        }\n        let texWidth = texture.getSize().width;\n        let texHeight = texture.getSize().height;\n\n\n        if (this.currTex!==texture){\n            texture.bind();\n            this.currTex = texture;\n        }\n\n        this.tiledSpriteRectDrawer.bind();\n        this.tiledSpriteRectDrawer.setUniform(\"u_textureMatrix\",makeTextureMatrix(\n            0,0,dstWidth, dstHeight,\n            texWidth,texHeight)\n        );\n        this.tiledSpriteRectDrawer.setUniform(\"u_PositionMatrix\",makePositionMatrix(\n            dstX,dstY,dstWidth, dstHeight,\n            this.game.width,this.game.height)\n        );\n        this.tiledSpriteRectDrawer.setUniform('u_frameCoords',\n            [srcX/texWidth,srcY/texHeight,srcWidth/texWidth,srcHeight/texHeight]);\n        this.tiledSpriteRectDrawer.setUniform('u_offsetCoords',[offsetX/srcWidth,offsetY/srcHeight]);\n        this.tiledSpriteRectDrawer.setUniform('u_alpha',1); // alpha\n        this.tiledSpriteRectDrawer.draw();\n\n    }\n\n    fillRect(x, y, width, height, color){\n        if (stop) return;\n        if (!matEx.overlapTest(this.game.camera.getRectScaled(),{x,y,width,height})) return;\n        let colorRectDrawer = this.colorRectDrawer;\n        let gl = this.gl;\n        colorRectDrawer.bind();\n        colorRectDrawer.setUniform(\"u_PositionMatrix\",makePositionMatrix(\n                x,y,width,height,\n                this.game.width,this.game.height)\n        );\n        colorRectDrawer.setUniform(\"u_rgba\",color);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        colorRectDrawer.draw();\n    }\n\n    drawRect(x,y,w,h,color){\n        this.fillRect(x, y, w, 1, color);\n        this.fillRect(x, y + h, w, 1, color);\n        this.fillRect(x, y, 1, h, color);\n        this.fillRect(x + w, y, 1, h, color);\n    }\n\n    drawLine(x1,y1,x2,y2,color){\n        if (stop) return;\n        let dx = x2-x1,dy = y2-y1;\n        if (!matEx.overlapTest(this.game.camera.getRectScaled(),{x:x1,y:y1,width:dx,height:dy})) return;\n        let gl = this.gl;\n        let lineDrawer = this.lineDrawer;\n        lineDrawer.bind();\n        lineDrawer.setUniform(\"u_PositionMatrix\",makePositionMatrix(\n            x1,y1,dx,dy,\n            this.game.width,this.game.height)\n        );\n        lineDrawer.setUniform(\"u_rgba\",color);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        lineDrawer.draw();\n    }\n\n    fillCircle(x,y,r,color){\n        let r2 = r*2;\n        if (!matEx.overlapTest(this.game.camera.getRectScaled(),{x:x-r,y:y-r,width:r2,height:r2})) return;\n        let circleDrawer = this.circleDrawer;\n        let gl = this.gl;\n        circleDrawer.bind();\n        circleDrawer.setUniform(\"u_PositionMatrix\",makePositionMatrix(\n            x-r,y-r,r2,r2,\n            this.game.width,this.game.height)\n        );\n        circleDrawer.setUniform(\"u_rgba\",color);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        circleDrawer.draw();\n    }\n\n    setAlpha(a){\n        throw 'not implemented';\n    }\n\n    save() {\n        this.matrixStack.save();\n    }\n\n    scale(x,y) {\n        this.matrixStack.scale(x,y);\n    }\n\n    rotateZ(angleInRadians) {\n        this.matrixStack.rotateZ(angleInRadians);\n    }\n\n    rotateY(angleInRadians) {\n        this.matrixStack.rotateY(angleInRadians);\n    }\n\n    translate(x,y){\n        this.matrixStack.translate(x,y);\n    }\n\n    restore(){\n        this.matrixStack.restore();\n    }\n\n    lockRect(rect) {\n\n    }\n\n    unlockRect(){\n\n    }\n\n    clear(){\n        this.gl.clearColor(1,1,1,1);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n    }\n\n    clearColor({r,g,b}){\n        this.gl.clearColor(r/255.0,g/255.0,b/255.0,1.0);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n    }\n\n    beginFrameBuffer(){\n        this.save();\n        this.frameBuffer.bind();\n    }\n\n\n    flipFrameBuffer(){\n\n        let fullScreen = this.fullScreenSize;\n        this.currTex = null;\n        this.restore();\n        this.save();\n        this.translate(0,fullScreen.h);\n        this.scale(1,-1);\n        this.frameBuffer.unbind();\n\n        this.gl.viewport(0, 0, fullScreen.w,fullScreen.h); // gameProps.canvasWidth,gameProps.canvasHeight\n\n        this.spriteRectDrawer.bind();\n        this.frameBuffer.getTexture().bind();\n\n        this.spriteRectDrawer.setUniform('u_PositionMatrix',\n            makePositionMatrix(\n                0,0,\n                this.game.width*fullScreen.scaleFactor, this.game.height*fullScreen.scaleFactor,\n                fullScreen.w,fullScreen.h\n            )\n        );\n\n        this.spriteRectDrawer.setUniform('u_textureMatrix',\n            makeTextureMatrix(\n                0,0,fullScreen.w,fullScreen.h, // gameProps.canvasWidth,gameProps.canvasHeight,\n                fullScreen.w,fullScreen.h// gameProps.canvasWidth,gameProps.canvasHeight\n            )\n        );\n        this.spriteRectDrawer.setUniform('u_alpha',1);\n\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        this.spriteRectDrawer.draw();\n        this.restore();\n    };\n\n    getError(){\n        if (!DEBUG) return 0;\n        let err = this.gl.getError();\n        err=err===this.gl.NO_ERROR?0:err;\n        if (err) {\n            console.log(AbstractDrawer.currentDrawer);\n        }\n        return err;\n    }\n\n    loadTextureInfo(resourcePath,onLoad){\n        let img = new Image();\n        img.src = resourcePath;\n        img.onload = ()=>{\n            let texture = new Texture(this.gl);\n            texture.setImage(img);\n            this.renderableCache[resourcePath] = texture;\n            onLoad();\n        }\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/webGlRenderer.ts","/*global DEBUG:true*/\n\nimport * as models from '../model/all'\n\nexport default class Repository {\n\n    constructor(game){\n        this._game = game;\n        this.reset();\n    }\n\n    addDescription(desc,type){\n        if (!this.descriptions[type]) this.descriptions[type] = [];\n        this.descriptions[type].push(desc);\n    }\n\n    setDescriptions(descs){\n        Object.keys(descs).forEach(type=>{\n            descs[type].forEach(desc=>{\n                this.addDescription(desc,type);\n            });\n        });\n    }\n\n    getObject(id,type,forceNew = false){\n        if (DEBUG && !type) throw 'repository.getObject: type not specified';\n        if (DEBUG && id==null) {\n            console.trace(\"id is null\");\n            throw `::getObject() id not specified for type ${type}`;\n        }\n        let Clazz = models[type];\n\n        if (DEBUG && !Clazz) {\n            throw `::getObject() undeclared object type ${type}`\n        }\n        if (DEBUG && !this.descriptions[type]) throw `not found description for type: ${type}`;\n        let desc = this.descriptions[type].find(it=>it.id==id);\n        if (!desc) {\n            throw `can not find object \"${type}\" with id ${id}`;\n        }\n        if (forceNew || !this.cache[desc[id]]) this.cache[id] = new Clazz(this._game).fromJSON(desc);\n        return this.cache[id];\n    }\n\n    getFirst(type){\n        let all = this.getArray(type);\n        if (!all.length) return null;\n        return all[0];\n    }\n\n    addObject(obj){\n        if (DEBUG && !obj.id) {\n            console.error(obj);\n            throw `addObject: id is not provided`;\n        }\n        if (!this.arrays[obj.type]) this.arrays[obj.type] = [];\n        this.arrays[obj.type].push(obj);\n        if (!this.descriptions[obj.type]) this.descriptions[obj.type] = [];\n        this.descriptions[obj.type].push(obj.toJSON());\n    }\n\n    updateObject(obj,opts){\n        let json = obj.toJSON(opts);\n        let index = this.descriptions[obj.type].findIndex(it=>it.id==obj.id);\n        this.descriptions[obj.type][index] = json;\n        let objInRepo = this.getObject(obj.id,obj.type,true);\n        if (objInRepo) objInRepo.fromJSON(json);\n    }\n\n    removeObject(obj){\n        if (DEBUG && !this.arrays[obj.type]) this.arrays[obj.type] = [];\n        let index = this.arrays[obj.type].findIndex(it=>it.id===obj.id);\n        this.arrays[obj.type].splice(index,1);\n\n        if (!this.descriptions[obj.type]) this.descriptions[obj.type] = [];\n        index = this.descriptions[obj.type].findIndex(it=>it.id===obj.id);\n        this.descriptions[obj.type].splice(index,1);\n\n        delete this.cache[obj.id];\n\n    }\n\n    getArray(type){\n        if (DEBUG && !models[type]) throw `getArray: unregistered type \"${type}\"`;\n        if (this.arrays[type]) return this.arrays[type];\n        let res = [];\n        if (!this.descriptions[type]) this.descriptions[type] = [];\n        this.descriptions[type].forEach(desc=>{\n            if (DEBUG && (desc.id===null || desc.id===undefined)) {\n                console.error(desc);\n                throw `object id must me specified`;\n            }\n            res.push(this.getObject(desc.id,type));\n        });\n        return this.arrays[type] = res;\n    }\n\n    reset(){\n        this.descriptions = {};\n        this.arrays = {};\n        this.cache = {};\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/core/repository.ts","\nimport FrameAnimation from './generic/frameAnimation'\nimport SpriteSheet from './generic/spriteSheet'\nimport GameObjectProto from './generic/gameObjectProto'\nimport GameObject from './generic/gameObject'\nimport CommonBehaviour from './generic/commonBehaviour'\nimport ParticleSystem from './generic/particleSystem'\nimport Scene from './generic/scene'\nimport Sound from './generic/sound'\nimport Font from './generic/font'\nimport Layer from './generic/layer'\nimport TextField from './generic/ui/textField'\nimport TileMap from './generic/tileMap'\n\nexport {\n    FrameAnimation,\n    SpriteSheet,\n    GameObjectProto,\n    GameObject,\n    CommonBehaviour,\n    ParticleSystem,\n    Scene,\n    Sound,\n    Font,\n    Layer,\n    TextField,\n    TileMap\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/all.ts","\nimport BaseModel from '../baseModel'\n\nexport default class CommonBehaviour extends BaseModel {\n\n    type = 'CommonBehaviour';\n    parameters = [];\n    description = null;\n\n    constructor(game){\n        super(game);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/commonBehaviour.ts","\nimport BaseModel from '../baseModel'\n\nexport default class Font extends BaseModel {\n\n    type = 'Font';\n    resourcePath = null;\n    fontSize=12;\n    fontFamily='Monospace';\n    fontContext=null;\n    fontColor = {r:0,g:0,b:0};\n\n    constructor(game){\n        super(game);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/font.ts","import BaseModel from '../baseModel'\n\nexport default class FrameAnimation extends BaseModel {\n\n    type = 'FrameAnimation';\n    _currFrame = 0;\n    frames = [];\n    duration = 1000;\n    _gameObject = null;\n    _startTime = null;\n\n    constructor(game) {\n        super(game);\n        this.stop();\n    }\n\n    revalidate(){\n        this._timeForOneFrame = ~~(this.duration / this.frames.length);\n    }\n\n    play(opts = {repeat:true}) {\n        this._isRepeat = opts.repeat;\n        this._gameObject._currFrameAnimation = this;\n    }\n\n    stop() {\n        if (this._gameObject) this._gameObject._currFrameAnimation = null;\n        this._startTime = null;\n        this._isRepeat = true;\n    }\n\n    update(time) {\n        if (!this._startTime) this._startTime = time;\n        let delta = (time - this._startTime) % this.duration;\n        this._currFrame = ~~((this.frames.length) * delta / this.duration);\n        if (this._isRepeat==false && this._currFrame>=this.frames.length-1) {\n            this.stop();\n        }\n        let lastFrIndex = this._gameObject.currFrameIndex;\n        if (lastFrIndex != this.frames[this._currFrame]) {\n            this._gameObject.setFrameIndex(this.frames[this._currFrame]);\n        }\n    }\n\n    nextFrame() {\n        let ind = this._currFrame;\n        ind++;\n        if (ind == this.frames.length) ind = 0;\n        this._gameObject.setFrameIndex(this.frames[ind]);\n        this._currFrame = ind;\n    }\n\n    previousFrame() {\n        let ind = this._currFrame;\n        ind--;\n        if (ind < 0) ind = this.frames.length - 1;\n        this._gameObject.setFrameIndex(this.frames[ind]);\n        this._currFrame = ind;\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/frameAnimation.ts","/*global DEBUG:true*/\nimport GameObjectProto from './gameObjectProto'\nimport * as commonBehaviours from '../../commonBehaviour/all'\n\nconst noop = ()=>{};\n\nexport default class GameObject extends GameObjectProto {\n\n    type = 'GameObject';\n    gameObjectProto = null;\n\n    constructor(game){\n        super(game);\n    }\n\n    revalidate(){\n        let ownProps = {};\n        for (let key in this) {\n            if (!this.hasOwnProperty(key)) continue;\n            ownProps[key] = this[key];\n        }\n        Object.keys(this.gameObjectProto).forEach(key=>{\n            if (this.gameObjectProto[key]===undefined) return;\n            this[key] = this.gameObjectProto[key];\n        });\n        Object.keys(ownProps).forEach(key=>{\n            if (!ownProps[key]) return; // to avoid corrupt frameIndex val\n            if (ownProps[key].splice && ownProps[key].length===0) return;\n            this[key] = ownProps[key];\n        });\n        super.revalidate();\n    }\n\n    setIndividualBehaviour(Clazz){\n        let instance = new Clazz(this.game);\n        instance.game = this.game;\n        instance.gameObject = this;\n        if (!instance.onCreate) instance.onCreate = noop;\n        if (!instance.onUpdate) instance.onUpdate = noop;\n        if (!instance.onDestroy) instance.onDestroy = noop;\n        this._individualBehaviour = instance;\n    }\n\n    setCommonBehaviour(){\n        let instances = [];\n        this.commonBehaviour.forEach(cb=>{\n            let CbClazz = commonBehaviours[cb.name];\n            if (DEBUG) {\n                if (!CbClazz) {\n                    console.error(cb);\n                    console.error(commonBehaviours);\n                    throw `can not find common behaviour with name ${cb.name}`\n                }\n            }\n            let instance = new CbClazz(this.game);\n            instance.manage(this,cb.parameters);\n            instances.push(instance);\n        });\n        this.commonBehaviour = instances;\n    }\n\n};\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/gameObject.ts","import BaseModel from '../baseModel'\n\nexport default class Layer extends BaseModel {\n\n    type = 'Layer';\n    gameObjects = [];\n\n    constructor(game) {\n        super(game);\n    }\n    addGameObject(go){\n        go._layer = this;\n        this.gameObjects.push(go);\n    }\n    getAllSpriteSheets() {\n        let dataSet = [];\n        this.gameObjects.forEach(function(obj){\n            obj.spriteSheet && !dataSet.find(it=>obj.id===it.id) && dataSet.push(obj.spriteSheet);\n        });\n        return dataSet;\n    }\n\n    onShow(){\n        this.gameObjects.forEach(g=>{\n            g.onShow();\n        })\n    }\n\n    kill(gObj){\n        this.gameObjects.remove(it=>it.id===gObj.id);\n    }\n\n    update(currTime,deltaTime){\n        let all = this.gameObjects;\n        let i = all.length;\n        let l = i-1;\n        while(i--){\n            let obj = all[l-i];\n            obj && obj.update(currTime,deltaTime);\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/layer.ts","\nimport BaseModel from '../baseModel'\nimport * as mathEx from '../../core/mathEx'\n\nlet r = obj=>{\n    return mathEx.random(obj.from,obj.to);\n};\n\nexport default class ParticleSystem extends BaseModel {\n\n    type = 'ParticleSystem';\n    gameObjectProto = null;\n    _particles = [];\n    numOfParticlesToEmit = {from:1,to:10};\n    particleAngle = {from:0,to:0};\n    particleVelocity = {from:1,to:100};\n    particleLiveTime = {from:100,to:1000};\n    emissionRadius = 0;\n\n    constructor(game){\n        super(game);\n    }\n\n    revalidate(){\n        if (this.particleAngle.to<this.particleAngle.from) this.particleAngle.to += 2*Math.PI;\n    }\n\n    static find(name){\n        //return bundle.particleSystemList.find({name:name});\n    }\n    static findAll(name){\n        //return bundle.particleSystemList.findAll({name:name});\n    }\n\n    emit(x,y){\n        for (let i = 0;i<r(this.numOfParticlesToEmit);i++) {\n            let particle = this.gameObjectProto.clone();\n            let angle = r(this.particleAngle);\n            let vel = r(this.particleVelocity);\n            particle.vel.x = vel*Math.cos(angle);\n            particle.vel.y = vel*Math.sin(angle);\n            particle.pos.x = r({from:x-this.emissionRadius,to:x+this.emissionRadius});\n            particle.pos.y = r({from:y-this.emissionRadius,to:y+this.emissionRadius});\n            particle.liveTime = r(this.particleLiveTime);\n            // bundle.applyBehaviour(particle); todo\n            this._particles.push(particle);\n        }\n    }\n    update(time,delta){\n        let all = this._particles;\n        let i = all.length;\n        let l = i - 1;\n        while(i--){\n            let p = all[l-i];\n            if (!p) continue;\n            if (!p._timeCreated) p._timeCreated = time;\n            if (time - p._timeCreated > p.liveTime) {\n                this._particles.splice(this._particles.indexOf(p),1);\n            }\n            p.update(time,delta);\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/particleSystem.ts","/*global IN_EDITOR:true*/\n/*global DEBUG:true*/\nimport BaseModel from '../baseModel'\nimport LoadingQueue from '../../core/misc/loadingQueue'\nimport TileMap from './tileMap'\n\nexport default class Scene extends BaseModel {\n\n    type = 'Scene';\n    layers = [];\n    useBG = false;\n    colorBG = {r: 255, g: 255, b: 255};\n    _tweenMovies = [];\n    _individualBehaviour = null;\n\n    constructor(game) {\n        super(game);\n        this.tileMap = new TileMap(game);\n    }\n\n    revalidate(){\n        super.revalidate();\n        if (!IN_EDITOR && this.tileMap && this.tileMap.spriteSheet) {\n            this.tileMap._tilesInScreenX = ~~(this.game.width / this.tileMap.spriteSheet._frameWidth);\n            this.tileMap._tilesInScreenY = ~~(this.game.height / this.tileMap.spriteSheet._frameHeight);\n        }\n    }\n\n    addTweenMovie(tm){\n        this._tweenMovies.push(tm);\n    }\n    getAllGameObjects(){\n        let res = [];\n        this.layers.forEach(l=>{\n            res = res.concat(res,l.gameObjects);\n        });\n        return res;\n    }\n    getAllSpriteSheets() {\n        let dataSet = {};\n        this.layers.forEach(function(l){\n            l.getAllSpriteSheets().forEach(s=>{\n                dataSet[s.id] = s;\n            })\n        });\n        if (this.tileMap && this.tileMap.spriteSheet) {\n            dataSet[this.tileMap.spriteSheet.id] = this.tileMap.spriteSheet;\n        }\n        return Object.keys(dataSet).map(key=>dataSet[key]);\n    }\n\n    preload(cb){\n        let resources =\n            this.getAllSpriteSheets().\n            concat(this.game.repository.getArray('Font'));\n        let q = new LoadingQueue();\n        q.onResolved = ()=>{\n            cb && cb();\n        };\n        resources.forEach(res=>{\n            q.addTask(()=>{\n                this.game.renderer.loadTextureInfo(\n                    res.resourcePath,\n                    ()=>q.resolveTask(res.id)\n                );\n            },res.id);\n        });\n        q.start();\n\n    }\n\n    onShow(){\n        if (this._individualBehaviour) this._individualBehaviour.onCreate();\n        this.layers.forEach(l=>{\n            l.onShow();\n        });\n    }\n\n    setIndividualBehaviour(Clazz){\n        let instance = new Clazz(this.game);\n        instance.game = this.game;\n        instance.scene = this;\n        this._individualBehaviour = instance;\n    }\n\n    update(currTime,deltaTime){\n\n        if (DEBUG) {\n            if (this.game.renderer.debugTextField) this.game.renderer.debugTextField.setText('');\n        }\n\n        let renderer = this.game.renderer;\n        renderer.beginFrameBuffer();\n        if (this.useBG) renderer.clearColor(this.colorBG);\n        else renderer.clear();\n\n        let layers = this.layers;\n        let i = this.layers.length;\n        let l = i -1;\n\n        this.game.camera.update(currTime,deltaTime);\n\n        if (this._individualBehaviour) this._individualBehaviour.onUpdate();\n        while(i--){\n            layers[i-l].update(currTime,deltaTime);\n        }\n        this.game.repository.getArray('ParticleSystem').forEach(ps=>{\n            ps.update(currTime,deltaTime);\n        });\n        // this._tweenMovies.forEach(function(tweenMovie){\n        //     if (tweenMovie.completed) {\n        //         this._tweenMovies.remove(tweenMovie);\n        //     }\n        //     tweenMovie._update(currTime);\n        // });\n        // this.__updateIndividualBehaviour__(currTime);\n        this.tileMap.update();\n        if (DEBUG) {\n            this.game.renderer.restore();\n            if (this.game.renderer.debugTextField) this.game.renderer.debugTextField.update();\n            this.game.renderer.restore();\n        }\n        renderer.flipFrameBuffer();\n    }\n    fadeIn(time,easeFnName){\n        return this.tween(this,{to:{alpha:1}},time,easeFnName);\n    }\n    fadeOut(time,easeFnName){\n        return this.tween(this,{to:{alpha:0}},time,easeFnName);\n    }\n    tween(obj,fromToVal,tweenTime,easeFnName){\n        // let movie = new tweenMovieModule.TweenMovie();\n        // let tween = new tweenModule.Tween(obj,fromToVal,tweenTime,easeFnName);\n        // movie.tween(0,tween);\n        // movie.play();\n    }\n\n    printText(x,y,text,font){ // todo\n        if (!text) return;\n        if (!text.substring) text = JSON.stringify(text,null,4);\n        this.game.renderer.printText(x,y,text,font);\n    }\n    log(text) {\n        this.printText(0,0,text);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/scene.ts","\nimport BaseModel from '../baseModel'\n\nexport default class Sound extends BaseModel {\n\n    type = 'Sound';\n    resourcePath = '';\n    _gain = 1;\n    _loop =false;\n\n    constructor(game){\n        super(game);\n    }\n\n    static find(name){\n        // let res = bundle.soundList.find({name:name});\n        // //<code>{{#if opts.minify}}\n        // if (!res) throw `can not found sound with name ${name}`;\n        // // {{/if}}\n        // return res;\n    }\n\n    play(){\n        //audioPlayer.play(this);\n    }\n    stop(){\n        //audioPlayer.stop(this);\n    }\n    pause(){\n        throw 'not implemented'\n    }\n    setGain(val,time,easeFnName){\n        //audioPlayer.setGain(this,val,time,easeFnName);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/sound.ts","import BaseModel from '../baseModel'\n\nexport default class SpriteSheet extends BaseModel {\n\n    type = 'SpriteSheet';\n    width = 0;\n    height = 0;\n    numOfFramesH = 1;\n    numOfFramesV = 1;\n    _frameWidth = 0;\n    _frameHeight = 0;\n    _numOfFrames = 0;\n    resourcePath = '';\n\n    constructor(game) {\n        super(game);\n    }\n\n    revalidate(){\n        if (!(this.numOfFramesH && this.numOfFramesV)) return;\n        this._frameWidth = ~~(this.width / this.numOfFramesH);\n        this._frameHeight = ~~(this.height / this.numOfFramesV);\n        this._numOfFrames = this.numOfFramesH * this.numOfFramesV;\n    }\n\n    getFramePosX(frameIndex) {\n        return (frameIndex % this.numOfFramesH) * this._frameWidth;\n    }\n\n    getFramePosY(frameIndex) {\n        return ~~(frameIndex / this.numOfFramesH) * this._frameHeight;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/engine/model/generic/spriteSheet.ts","/*global DEBUG:true*/\n\nimport Game from './engine/core/game'\nimport gameProps from './app/gameProps.json'\nimport repository from './app/repository.json'\n\nif (DEBUG && gameProps.startSceneId===undefined) throw 'start scene not specified';\n\nlet game = new Game(gameProps);\ngame.repository.setDescriptions(repository);\n\nlet startScene = game.repository.getObject(gameProps.startSceneId,'Scene');\ngame.runScene(startScene);\nif (DEBUG) window.game = game;\n\n\n\n\n// WEBPACK FOOTER //\n// ./workspace/dude/generated/src/index.ts.tpl","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","module.exports = \"//position, texture and normal\\n\\nattribute vec4 a_position;\\nattribute vec2 a_texcoord;\\nattribute vec3 a_normal;\\n\\nuniform mat4 u_modelMatrix;\\nuniform mat4 u_projectionMatrix;\\n\\nvarying vec2 v_texcoord;\\nvarying vec3 v_normal;\\n\\nvoid main() {\\n\\n  gl_Position = u_projectionMatrix * u_modelMatrix * a_position;\\n  v_texcoord = a_texcoord;\\n  v_normal = a_normal;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/basic/vertex2.vert\n// module id = 79\n// module chunks = 0","module.exports = \"// texture and color\\n\\nprecision mediump float;\\n\\nvarying vec2 v_texcoord;\\n\\nuniform sampler2D texture;\\nuniform float u_alpha;\\n\\n\\nvoid main() {\\n    gl_FragColor = texture2D(texture, v_texcoord);\\n    gl_FragColor.a *= u_alpha;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/texture/fragment.frag\n// module id = 80\n// module chunks = 0","module.exports = \"// texture color and normal\\n\\nprecision highp float;\\n\\nvarying vec2 v_texcoord;\\nvarying vec3 v_normal;\\n\\nuniform sampler2D texture;\\nuniform float u_alpha;\\nuniform mat4 u_modelMatrix;\\n\\n\\nvoid main() {\\n\\n    vec3 lightDirection = normalize(vec3(-1,-1,1));\\n    vec3 normalized = normalize((u_modelMatrix * vec4(v_normal,0)).xyz);\\n    float lightFactor = max(0.5,dot(lightDirection,normalized));\\n    gl_FragColor = texture2D(texture, v_texcoord);\\n    gl_FragColor.rgb *= lightFactor;\\n    gl_FragColor.a *= u_alpha;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/texture/fragment2.frag\n// module id = 81\n// module chunks = 0","module.exports = \"// texture and color\\r\\n\\r\\nprecision mediump float;\\r\\n\\r\\nvarying vec2 v_texcoord;\\r\\n\\r\\nuniform sampler2D texture;\\r\\nuniform float u_alpha;\\r\\nuniform vec2 u_offsetCoords;\\r\\nuniform vec4 u_frameCoords;\\r\\n\\r\\nvoid main() {\\r\\n    vec2 localTextCoord = mod(\\r\\n        v_texcoord + fract(u_offsetCoords),\\r\\n        u_frameCoords.zw\\r\\n    ) + u_frameCoords.xy;\\r\\n    gl_FragColor = texture2D(texture, localTextCoord);\\r\\n    gl_FragColor.a *= u_alpha;\\r\\n\\r\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace/dude/generated/src/engine/core/renderer/webGl/shaders/tiled/fragment.frag\n// module id = 82\n// module chunks = 0"],"sourceRoot":""}