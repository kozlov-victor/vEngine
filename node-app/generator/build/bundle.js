!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=58)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,h,c,f,l,p,d,y,m,g;e.__esModule=!0,e.default=void 0,u=i(13),h=n(u),c=i(41),f=n(c),l=i(24),p=n(l),d=i(9),y=i(27),m=n(y),g=(0,d.Transient)({game:!0,rigidBody:!0})(s=function(t){function e(i){r(this,e);var n=o(this,t.call(this));return n.id=null,n.name=null,n.width=0,n.height=0,n.pos={x:0,y:0},n.scale={x:1,y:1},n.angle=0,n.alpha=1,n.layerId=null,n.fixedToCamera=!1,n.rigid=!1,n._tweens=[],n.game=i,n._emitter=new p.default,n.rigidBody=new m.default(n),n}return a(e,t),e.prototype.revalidate=function(){},e.prototype.setIndividualBehaviour=function(t){},e.prototype.setCommonBehaviour=function(){},e.prototype.onShow=function(){},e.prototype.getRect=function(){return{x:this.pos.x,y:this.pos.y,width:this.width,height:this.height}},e.prototype.tween=function(t){var e=new f.default(t,this);this._tweens.push(e)},e.prototype.update=function(t){var e=this;this._tweens.forEach(function(i,n){i.update(t),i.completed&&e._tweens.splice(n,1)})},e.prototype.clone=function(t){var e=this.constructor,i=new e(this.game);return i._cloner=this,i.fromJSON(this.toJSON(t),!0)},e.prototype.on=function(t,e){return this._emitter.on(t,e),this},e.prototype.trigger=function(t,e){this._emitter.trigger(t,e)},e.prototype.updateCloner=function(t){return},e}(h.default))||s,e.default=g},function(t,e,i){"use strict";var n,r;e.isPointInRect=function(t,e,i){return t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height},n=function(t,e,i){return t>=e&&t<=i},e.isRectIntersectRect=function(t,e){var i=n(t.x,e.x,e.x+e.width),r=n(e.x,t.x,t.x+t.width),o=n(t.y,e.y,e.y+e.height),a=n(e.y,t.y,t.y+t.height),s=i||r,u=o||a;return s&&u},e.radToDeg=function(t){return 180*t/Math.PI},e.degToRad=function(t){return t*Math.PI/180},e.random=function(t,e){var i,n;return t>e&&(i=t,t=e,e=i),n=Math.random()*(e-t)+t,n>e?n=e:n<t&&(n=t),n},r={},r.linear=function(t,e,i,n){return i*t/n+e},r.easeInQuad=function(t,e,i,n){return t/=n,i*t*t+e},r.easeOutQuad=function(t,e,i,n){return t/=n,-i*t*(t-2)+e},r.easeInOutQuad=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)},e.ease=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a,s,u,h,c,f;e.__esModule=!0,a=function(t,e,i){var n,r;if(n=t.createShader(i),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(n),t.deleteShader(n),r;return n},s=function(t,e){var i,n=t.createProgram();if(e.forEach(function(e){t.attachShader(n,e)}),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw i=t.getProgramInfoLog(n),t.deleteProgram(n),i;return n},u=function(t,e){var i,n,r,o=null,a={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};if(!o)for(i=Object.keys(a),o={},n=0;n<i.length;++n)r=i[n],o[t[r]]=a[r];return o[e]},h=function(t,e){var i,n,r,o,a={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(i=0;i<s;i++)n=t.getActiveUniform(e,i),r=n.name.replace(/\[.*?]/,""),o=u(t,n.type),a[r]={type:o,size:n.size,name:r,location:t.getUniformLocation(e,r),setter:c(n.size,o)};return a},c=function(t,e){if(1===t)switch(e){case"float":return function(t,e,i){t.uniform1f(e,i)};case"vec2":return function(t,e,i){t.uniform2f(e,i[0],i[1])};case"vec3":return function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])};case"vec4":return function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])};case"int":return function(t,e,i){t.uniform1i(e,i)};case"ivec2":return function(t,e,i){t.uniform2i(e,i[0],i[1])};case"ivec3":return function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])};case"ivec4":return function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])};case"bool":return function(t,e,i){t.uniform1i(e,i)};case"bvec2":return function(t,e,i){t.uniform2i(e,i[0],i[1])};case"bvec3":return function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])};case"bvec4":return function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])};case"mat2":return function(t,e,i){t.uniformMatrix2fv(e,!1,i)};case"mat3":return function(t,e,i){t.uniformMatrix3fv(e,!1,i)};case"mat4":return function(t,e,i){t.uniformMatrix4fv(e,!1,i)};case"sampler2D":return function(t,e,i){t.uniform1i(e,i)}}else switch(e){case"float":return function(t,e,i){t.uniform1fv(e,i)};case"vec2":return function(t,e,i){t.uniform2fv(e,i)};case"vec3":return function(t,e,i){t.uniform3fv(e,i)};case"vec4":return function(t,e,i){t.uniform4fv(e,i)};case"int":return function(t,e,i){t.uniform1iv(e,i)};case"ivec2":return function(t,e,i){t.uniform2iv(e,i)};case"ivec3":return function(t,e,i){t.uniform3iv(e,i)};case"ivec4":return function(t,e,i){t.uniform4iv(e,i)};case"bool":return function(t,e,i){t.uniform1iv(e,i)};case"bvec2":return function(t,e,i){t.uniform2iv(e,i)};case"bvec3":return function(t,e,i){t.uniform3iv(e,i)};case"bvec4":return function(t,e,i){t.uniform4iv(e,i)};case"sampler2D":return function(t,e,i){t.uniform1iv(e,i)}}},o=r=function(){function t(e,i){var r,o;n(this,t),r=a(e,i[0],e.VERTEX_SHADER),o=a(e,i[1],e.FRAGMENT_SHADER),this.program=s(e,[r,o]),this.uniforms=h(e,this.program),this.gl=e}return t.prototype.getProgram=function(){return this.program},t.prototype.bind=function(){this.gl.useProgram(this.program),t.currentProgram=this},t.prototype.setUniform=function(t,e){var i=this.uniforms[t];i.setter(this.gl,i.location,e)},t.prototype.bindBuffer=function(t,e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.getGlBuffer());var i=this.gl.getAttribLocation(this.program,e);if(!e)throw"can not found uniform location: uniformLocationName not defined";if(i<0)throw"can not found uniform location for "+e;this.gl.enableVertexAttribArray(i),this.gl.vertexAttribPointer(i,t.getItemSize(),t.getItemType(),!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},t}(),r.currentProgram=null,f=o,e.default=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.gl=e,this.buffer=e.createBuffer(),this.bufferItemSize=null,this.bufferItemType=null,this.dataLength=null}return t.prototype.setData=function(t,e,i){var n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,this.buffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this.bufferItemSize=i,this.bufferItemType=e,this.dataLength=t.length},t.prototype.getGlBuffer=function(){return this.buffer},t.prototype.getItemSize=function(){return this.bufferItemSize},t.prototype.getItemType=function(){return this.bufferItemType},t.prototype.getBufferLength=function(){return this.dataLength},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a,s,u;e.__esModule=!0,r=2,o=1,a=0,s=-1,u=function(){function t(e){n(this,t),this.KEY={SPACE:32,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:80,LEFT:37,UP:38,RIGHT:39,DOWN:40},this.buffer={},this.game=e}return t.prototype.emulatePress=function(t){this.buffer[t]=r},t.prototype.emulateRelease=function(t){this.buffer[t]=a},t.prototype.isPressed=function(t){return this.buffer[t]>s},t.prototype.isJustPressed=function(t){return this.buffer[t]===r},t.prototype.isReleased=function(t){return this.buffer[t]<=a},t.prototype.isJustReleased=function(t){return this.buffer[t]===a},t.prototype.update=function(){var t=this;Object.keys(this.buffer).forEach(function(e){t.buffer[e]===s?delete t.buffer[e]:t.buffer[e]===a&&(t.buffer[e]=s),t.buffer[e]===r&&(t.buffer[e]=o)})},t.prototype.listenTo=function(){var t=this;window.addEventListener("keydown",function(e){var i=e.keyCode;t.buffer[i]=r}),window.addEventListener("keyup",function(e){var i=e.keyCode;t.buffer[i]=a})},t}(),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.gl=e,this.buffer=e.createBuffer(),this.dataLength=null}return t.prototype.setData=function(t){var e=this.gl;this.dataLength=t.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)},t.prototype.getGlBuffer=function(){return this.buffer},t.prototype.bind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)},t.prototype.unbind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)},t.prototype.getBufferLength=function(){return this.dataLength},t}();e.default=r},function(t,e){t.exports="attribute vec4 a_position;\nattribute vec4 a_color;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\nuniform mat4 u_textureMatrix;\n\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\n\nvoid main() {\n   gl_Position = u_matrix * a_position;\n   v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;\n   v_color = a_color;\n   //gl_PointSize = 10.0;\n}"},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){n(this,t)}return t.prototype.manage=function(){console.error(this)},t.prototype.onUpdate=function(){},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(7),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this));return o.gameObject=null,o.lastDirection=null,o.game=i,o}return o(e,t),e.prototype.manage=function(t,e){var i,n=this;this.gameObject=t,this.parameters=e,this.animations={},i=["Left","Right","Up","Down"],i.forEach(function(t){var i="walk"+t+"Animation",r="idle"+t+"Animation";n.animations[i]=n.gameObject.frameAnimations.find(function(t){return t.name===e[i]}),e[r]&&(n.animations[r]=n.gameObject.frameAnimations.find(function(t){return t.name===e[r]}))})},e.prototype.stop=function(){this.gameObject.stopFrAnimations(),this.gameObject.rigidBody.vel.x=0,this.gameObject.rigidBody.vel.y=0;var t="idle"+this.lastDirection+"Animation";this.animations[t]&&this.animations[t].play()},e.prototype.go=function(t){this.lastDirection=t,this.animations["walk"+t+"Animation"].play()},e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t){return function(e){e.transient=t}}e.__esModule=!0,e.Transient=n},function(t,e,i){"use strict";e.makeIdentity=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.makeZToWMatrix=function(t){return[1,0,0,0,0,1,0,0,0,0,1,t,0,0,0,1]},e.make2DProjection=function(t,e,i){return[2/t,0,0,0,0,-2/e,0,0,0,0,2/i,0,-1,1,0,1]},e.ortho=function(t,e,i,n,r,o){var a=1/(t-e),s=1/(i-n),u=1/(r-o),h=[];return h[0]=-2*a,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*s,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*u,h[11]=0,h[12]=(t+e)*a,h[13]=(n+i)*s,h[14]=(o+r)*u,h[15]=1,h},e.perspective=function(t,e,i,n){var r=1/Math.tan(t/2),o=1/(i-n),a=[];return a[0]=r/e,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(n+i)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*n*i*o,a[15]=0,a},e.makeTranslation=function(t,e,i){return[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},e.makeXRotation=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},e.makeYRotation=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},e.makeZRotation=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},e.makeScale=function(t,e,i){return[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},e.matrixMultiply=function(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],u=t[6],h=t[7],c=t[8],f=t[9],l=t[10],p=t[11],d=t[12],y=t[13],m=t[14],g=t[15],w=e[0],b=e[1],_=e[2],x=e[3],v=e[4],O=e[5],E=e[6],T=e[7],j=e[8],R=e[9],P=e[10],F=e[11],M=e[12],S=e[13],A=e[14],B=e[15];return[i*w+n*v+r*j+o*M,i*b+n*O+r*R+o*S,i*_+n*E+r*P+o*A,i*x+n*T+r*F+o*B,a*w+s*v+u*j+h*M,a*b+s*O+u*R+h*S,a*_+s*E+u*P+h*A,a*x+s*T+u*F+h*B,c*w+f*v+l*j+p*M,c*b+f*O+l*R+p*S,c*_+f*E+l*P+p*A,c*x+f*T+l*F+p*B,d*w+y*v+m*j+g*M,d*b+y*O+m*R+g*S,d*_+y*E+m*P+g*A,d*x+y*T+m*F+g*B]}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o;e.__esModule=!0,r=function(t){return 0==(t&t-1)},o=function(){function t(e){n(this,t),this.gl=e,this.tex=null,this.size=null,this.isPowerOfTwo=!1,this.tex=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.tex),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),e.bindTexture(e.TEXTURE_2D,this.tex)}return t.prototype.setImage=function(t,e,i){var n=this.gl;this.size=t?{width:t.width,height:t.height}:{width:e,height:i},this.bind(),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,i,0,n.RGBA,n.UNSIGNED_BYTE,null),this.isPowerOfTwo=t&&r(t.width)&&r(t.height),this.isPowerOfTwo?(n.generateMipmap(n.TEXTURE_2D),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)),n.bindTexture(n.TEXTURE_2D,null)},t.prototype.bind=function(t){this.gl.bindTexture(this.gl.TEXTURE_2D,this.tex)},t.prototype.unbind=function(t){this.gl.bindTexture(this.gl.TEXTURE_2D,null)},t.prototype.getSize=function(){return this.size},t.prototype.getGlTexture=function(){return this.tex},t}(),e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(34),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.vertexArr=[0,0,0,1,1,0,1,1],i.indexArr=[0,1,2,3],i.texCoordArr=[0,0,0,1,1,0,1,1],i}return o(e,t),e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a,s,u;e.__esModule=!0,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e,i){return!t||(0==t.indexOf("_")||(!(!e||!e.call)||"string"!=typeof e&&("number"!=typeof e&&("boolean"!=typeof e&&(null==e&&!i.preserveNull)))))},a=function(t){return"string"==typeof t||"number"==typeof t},s=function t(e){var i,n,o,a,s,u,h,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0!==e){if(null===e)return null;if("undefined"==typeof window||e!==window){if(c.indexOf(e)>-1)return e;if("[object Array]"===Object.prototype.toString.call(e)){for(i=[],n=0,o=e.length;n<o;n++)a=void 0,c.indexOf(e[n])>-1?a=e[n]:(c.push(e),a=t(e[n],c),c.push(e[n])),i[n]=a;return i}if("object"===(void 0===e?"undefined":r(e))){s={};for(u in e)e.hasOwnProperty(u)&&(h=void 0,c.indexOf(e[u])>-1?h=e[u]:(c.push(e),h=t(e[u],c),c.push(e[u])),s[u]=h);return s}return e}}},u=function(){function t(){n(this,t)}return t.prototype.fromJSON=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];return Object.keys(e).forEach(function(n){if("type"!==n){if(!(n in t))throw console.error(t),"::fromJSON(): class "+t.constructor.name+" has no property "+n;if(t[n]=e[n],t[n])if(e[n].id&&e[n].type)t[n]=t.game.repository.getObject(e[n].id,e[n].type,i);else if(e[n].splice){var r=t[n];t[n]=[],r.forEach(function(e,r){e&&e.type&&e.id?t[n].push(t.game.repository.getObject(e.id,e.type,i)):a(e)&&t[n].push(e)})}}}),this.revalidate(),this},t.prototype.toJSON=function(){var t,e,i=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveNull:!1},u={};for(t in this)if(!(o(t,this[t],n)||this.constructor.transient&&this.constructor.transient[t]))if(null!=this[t]&&this[t].type&&this[t].id)u[t]={id:this[t].id,type:this[t].type};else if(null!=this[t]&&this[t].splice)!function(){var e=i[t],n=[];e.forEach(function(t){t&&t.type&&t.id?n.push({type:t.type,id:t.id}):a(t)&&n.push(s(t))}),u[t]=n}();else{if((e=s(this[t]))&&e.splice&&!e.length)continue;if(null!=e&&"object"===(void 0===e?"undefined":r(e))&&!Object.keys(e).length)continue;u[t]=e}return u},t}(),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="GameObjectProto",o.spriteSheet=null,o._behaviour=null,o.commonBehaviour=[],o.currFrameIndex=0,o._sprPosX=0,o._sprPosY=0,o.frameAnimations=[],o._currFrameAnimation=0,o.startFrameAnimationName=null,o._timeCreated=null,o.tileOffset={x:0,y:0},o.tileRepeat=!1,o.groupName="",o._individualBehaviour=null,o}return o(e,t),e.find=function(t){},e.findAll=function(t){},e.prototype.revalidate=function(){var t=this;this.setFrameIndex(this.currFrameIndex),this.spriteSheet&&(this.width=this.spriteSheet._frameWidth,this.height=this.spriteSheet._frameHeight),this.frameAnimations.forEach(function(e,i){t.frameAnimations[i]=t.frameAnimations[i].clone(),t.frameAnimations[i]._gameObject=t})},e.prototype.playFrameAnimation=function(t,e){var i=this.frameAnimations.find(function(e){return e.name===t});i._gameObject=this,this._currFrameAnimation=i,i.play(e)},e.prototype.setFrameIndex=function(t){this.currFrameIndex=t,this._sprPosX=this.spriteSheet.getFramePosX(this.currFrameIndex),this._sprPosY=this.spriteSheet.getFramePosY(this.currFrameIndex)},e.prototype.update=function(e,i){t.prototype.update.call(this,e),this._currFrameAnimation&&this._currFrameAnimation.update(e),this.rigidBody.update(e,i),this.game._renderer.draw(this),this._individualBehaviour&&this._individualBehaviour.onUpdate(e,i);for(var n=0,r=this.commonBehaviour.length;n<r;n++)this.commonBehaviour[n].onUpdate(e,i)},e.prototype.onShow=function(){this._individualBehaviour&&this._individualBehaviour.onCreate(),null!==this.startFrameAnimationName&&this.playFrameAnimation(this.startFrameAnimationName)},e.prototype.stopFrAnimations=function(){this._currFrameAnimation&&this._currFrameAnimation.stop()},e.prototype.kill=function(){this._layer.kill(this)},e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="TileMap",o.spriteSheet=null,o.data=[],o}return o(e,t),e}(s.default),e.default=u},function(t,e){t.exports="precision mediump float;\n\nvarying vec2 v_texcoord;\n\nuniform sampler2D texture;\nuniform float u_alpha;\nuniform vec4 u_rgba;\n\nvoid main() {\n    gl_FragColor = u_rgba;\n}"},function(t,e,i){"use strict";var n,r,o=i(25),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s={width:800,height:400,scaleStrategy:0,startSceneId:2,scale:{x:1,y:1},pos:{x:0,y:0},gravityConstant:800};n=new a.default({width:800,height:400,scaleStrategy:0,startSceneId:2,scale:{x:1,y:1},pos:{x:0,y:0},gravityConstant:800}),n.repository.setDescriptions({Scene:[{id:2,name:"mainScene",width:5e3,height:800,type:"Scene",layers:[{type:"Layer",id:2}],tileMap:{id:52,type:"TileMap"}}],Layer:[{id:2,name:"layer1",type:"Layer",gameObjects:[{type:"GameObject",id:7},{type:"GameObject",id:8},{type:"GameObject",id:18},{type:"GameObject",id:19},{type:"GameObject",id:20},{type:"GameObject",id:21},{type:"GameObject",id:39},{type:"GameObject",id:40},{type:"GameObject",id:41},{type:"GameObject",id:42},{type:"GameObject",id:43},{type:"GameObject",id:44},{type:"GameObject",id:45},{type:"GameObject",id:46},{type:"GameObject",id:47},{type:"GameObject",id:48},{type:"GameObject",id:49},{type:"GameObject",id:50},{type:"GameObject",id:51},{type:"TextField",id:56}]}],SpriteSheet:[{name:"dude",width:288,height:48,type:"SpriteSheet",numOfFramesH:9,resourcePath:"resources/dude.png",id:3},{name:"platform",width:500,height:64,type:"SpriteSheet",resourcePath:"resources/platform.png",id:5}],GameObjectProto:[{id:4,name:"dude",width:32,height:48,type:"GameObjectProto",spriteSheet:{id:3,type:"SpriteSheet"},commonBehaviour:[{type:"CommonBehaviour",id:15}],frameAnimations:[{type:"FrameAnimation",id:11},{type:"FrameAnimation",id:12},{type:"FrameAnimation",id:13},{type:"FrameAnimation",id:14}]},{name:"platform",width:500,height:64,type:"GameObjectProto",spriteSheet:{id:5,type:"SpriteSheet"},id:6}],GameObject:[{id:7,name:"dude",pos:{x:256,y:40},layerId:2,type:"GameObject",gameObjectProto:{id:4,type:"GameObjectProto"}},{id:8,name:"platform",pos:{x:-261,y:130},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:18,name:"platform",pos:{x:112,y:323},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:19,name:"platform",pos:{x:395,y:47},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:20,name:"platform",pos:{x:677,y:303},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:21,name:"platform",pos:{x:228,y:162},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:39,name:"platform",pos:{x:1040,y:176},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:40,name:"platform",pos:{x:1578,y:221},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{pos:{x:0,y:538},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"},id:41},{id:42,name:"platform",pos:{x:588,y:536},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:43,name:"platform",pos:{x:1165,y:535},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:44,name:"platform",pos:{x:1676,y:481},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:45,name:"platform",pos:{x:2129,y:428},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:46,name:"platform",pos:{x:2571,y:535},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:47,name:"platform",pos:{x:3118,y:507},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:48,name:"platform",pos:{x:3015,y:353},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:49,name:"platform",pos:{x:3648,y:544},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{id:50,name:"platform",pos:{x:4168,y:508},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"}},{pos:{x:4748,y:612},layerId:2,type:"GameObject",gameObjectProto:{id:6,type:"GameObjectProto"},id:51}],FrameAnimation:[{name:"left",type:"FrameAnimation",frames:[0,1,2,3],id:11},{name:"right",type:"FrameAnimation",frames:[5,6,7,8],id:12},{name:"idleLeft",type:"FrameAnimation",frames:[4],id:13},{name:"idleRight",type:"FrameAnimation",frames:[4],id:14}],CommonBehaviour:[{id:15,name:"Control2Dir",type:"CommonBehaviour",parameters:{velocity:"130",walkLeftAnimation:"left",walkRightAnimation:"right",idleLeftAnimation:"idleLeft",idleRightAnimation:"idleRight"}}],Font:[{name:"font1",type:"Font",resourcePath:"resources/font1.png",fontSize:21,fontFamily:"Berlin Sans FB",fontContext:{symbols:{0:{x:258,y:4,width:12,height:23},1:{x:279,y:4,width:5,height:23},2:{x:293,y:4,width:10,height:23},3:{x:4,y:35,width:9,height:23},4:{x:21,y:35,width:10,height:23},5:{x:40,y:35,width:9,height:23},6:{x:58,y:35,width:10,height:23},7:{x:77,y:35,width:9,height:23},8:{x:94,y:35,width:9,height:23},9:{x:112,y:35,width:10,height:23}," ":{x:4,y:4,width:5,height:23},"!":{x:17,y:4,width:4,height:23},'"':{x:30,y:4,width:6,height:23},"#":{x:44,y:4,width:13,height:23},$:{x:66,y:4,width:9,height:23},"%":{x:83,y:4,width:15,height:23},"&":{x:106,y:4,width:14,height:23},"'":{x:129,y:4,width:3,height:23},"(":{x:140,y:4,width:7,height:23},")":{x:156,y:4,width:7,height:23},"*":{x:171,y:4,width:7,height:23},"+":{x:187,y:4,width:8,height:23},",":{x:203,y:4,width:4,height:23},"-":{x:216,y:4,width:8,height:23},".":{x:232,y:4,width:4,height:23},"/":{x:244,y:4,width:6,height:23},":":{x:130,y:35,width:4,height:23},";":{x:143,y:35,width:4,height:23},"<":{x:155,y:35,width:7,height:23},"=":{x:170,y:35,width:9,height:23},">":{x:187,y:35,width:7,height:23},"?":{x:203,y:35,width:8,height:23},"@":{x:219,y:35,width:13,height:23},A:{x:240,y:35,width:13,height:23},B:{x:262,y:35,width:12,height:23},C:{x:283,y:35,width:12,height:23},D:{x:4,y:66,width:14,height:23},E:{x:26,y:66,width:11,height:23},F:{x:45,y:66,width:11,height:23},G:{x:64,y:66,width:14,height:23},H:{x:86,y:66,width:15,height:23},I:{x:109,y:66,width:4,height:23},J:{x:122,y:66,width:5,height:23},K:{x:136,y:66,width:12,height:23},L:{x:157,y:66,width:10,height:23},M:{x:175,y:66,width:16,height:23},N:{x:200,y:66,width:15,height:23},O:{x:223,y:66,width:15,height:23},P:{x:246,y:66,width:13,height:23},Q:{x:267,y:66,width:15,height:23},R:{x:291,y:66,width:12,height:23},S:{x:4,y:97,width:9,height:23},T:{x:21,y:97,width:10,height:23},U:{x:40,y:97,width:13,height:23},V:{x:62,y:97,width:13,height:23},W:{x:83,y:97,width:18,height:23},X:{x:110,y:97,width:12,height:23},Y:{x:130,y:97,width:12,height:23},Z:{x:150,y:97,width:10,height:23},"[":{x:169,y:97,width:7,height:23},"\\":{x:184,y:97,width:6,height:23},"]":{x:198,y:97,width:7,height:23},"^":{x:214,y:97,width:9,height:23},_:{x:232,y:97,width:9,height:23},"`":{x:249,y:97,width:7,height:23},a:{x:264,y:97,width:11,height:23},b:{x:284,y:97,width:11,height:23},c:{x:303,y:97,width:8,height:23},d:{x:4,y:128,width:11,height:23},e:{x:23,y:128,width:10,height:23},f:{x:41,y:128,width:6,height:23},g:{x:55,y:128,width:10,height:23},h:{x:74,y:128,width:10,height:23},i:{x:93,y:128,width:4,height:23},j:{x:106,y:128,width:4,height:23},k:{x:119,y:128,width:11,height:23},l:{x:138,y:128,width:4,height:23},m:{x:151,y:128,width:17,height:23},n:{x:176,y:128,width:10,height:23},o:{x:195,y:128,width:10,height:23},p:{x:214,y:128,width:11,height:23},q:{x:234,y:128,width:11,height:23},r:{x:254,y:128,width:6,height:23},s:{x:269,y:128,width:6,height:23},t:{x:283,y:128,width:7,height:23},u:{x:298,y:128,width:11,height:23},v:{x:4,y:159,width:10,height:23},w:{x:22,y:159,width:15,height:23},x:{x:45,y:159,width:9,height:23},y:{x:63,y:159,width:9,height:23},z:{x:81,y:159,width:8,height:23},"{":{x:97,y:159,width:7,height:23},"|":{x:113,y:159,width:5,height:23},"}":{x:126,y:159,width:7,height:23},"~":{x:141,y:159,width:10,height:23},"":{x:159,y:159,width:10,height:23},"":{x:178,y:159,width:15,height:23},"":{x:201,y:159,width:15,height:23},"":{x:225,y:159,width:15,height:23},"":{x:249,y:159,width:15,height:23},"":{x:273,y:159,width:15,height:23},"":{x:296,y:159,width:15,height:23},"":{x:4,y:190,width:15,height:23},"":{x:27,y:190,width:15,height:23},"":{x:51,y:190,width:15,height:23},"":{x:75,y:190,width:15,height:23},"":{x:99,y:190,width:15,height:23},"":{x:122,y:190,width:15,height:23},"":{x:146,y:190,width:15,height:23},"":{x:170,y:190,width:15,height:23},"":{x:194,y:190,width:15,height:23},"":{x:217,y:190,width:15,height:23},"":{x:241,y:190,width:15,height:23},"":{x:265,y:190,width:15,height:23},"":{x:289,y:190,width:15,height:23},"":{x:4,y:221,width:15,height:23},"":{x:27,y:221,width:15,height:23},"":{x:51,y:221,width:15,height:23},"А":{x:75,y:221,width:15,height:23},"Б":{x:98,y:221,width:12,height:23},"В":{x:118,y:221,width:14,height:23},"Г":{x:140,y:221,width:12,height:23},"Д":{x:160,y:221,width:14,height:23},"Е":{x:182,y:221,width:12,height:23},"Ж":{x:203,y:221,width:18,height:23},"З":{x:230,y:221,width:10,height:23},"И":{x:249,y:221,width:15,height:23},"Й":{x:272,y:221,width:15,height:23},"К":{x:295,y:221,width:14,height:23},"Л":{x:4,y:252,width:14,height:23},"М":{x:26,y:252,width:18,height:23},"Н":{x:52,y:252,width:15,height:23},"О":{x:76,y:252,width:15,height:23},"П":{x:99,y:252,width:15,height:23},"Р":{x:122,y:252,width:11,height:23},"С":{x:142,y:252,width:14,height:23},"Т":{x:164,y:252,width:12,height:23},"У":{x:184,y:252,width:14,height:23},"Ф":{x:207,y:252,width:16,height:23},"Х":{x:232,y:252,width:15,height:23},"Ц":{x:255,y:252,width:15,height:23},"Ч":{x:278,y:252,width:13,height:23},"Ш":{x:4,y:283,width:21,height:23},"Щ":{x:33,y:283,width:21,height:23},"Ъ":{x:62,y:283,width:14,height:23},"Ы":{x:85,y:283,width:18,height:23},"Ь":{x:111,y:283,width:12,height:23},"Э":{x:131,y:283,width:13,height:23},"Ю":{x:153,y:283,width:21,height:23},"Я":{x:183,y:283,width:14,height:23},"а":{x:205,y:283,width:9,height:23},"б":{x:222,y:283,width:10,height:23},"в":{x:241,y:283,width:9,height:23},"г":{x:258,y:283,width:8,height:23},"д":{x:275,y:283,width:10,height:23},"е":{x:294,y:283,width:9,height:23},"ж":{x:4,y:314,width:14,height:23},"з":{x:26,y:314,width:8,height:23},"и":{x:42,y:314,width:11,height:23},"й":{x:62,y:314,width:11,height:23},"к":{x:81,y:314,width:10,height:23},"л":{x:99,y:314,width:10,height:23},"м":{x:117,y:314,width:13,height:23},"н":{x:139,y:314,width:11,height:23},"о":{x:158,y:314,width:10,height:23},"п":{x:176,y:314,width:11,height:23},"р":{x:196,y:314,width:10,height:23},"с":{x:214,y:314,width:9,height:23},"т":{x:232,y:314,width:9,height:23},"у":{x:249,y:314,width:10,height:23},"ф":{x:267,y:314,width:13,height:23},"х":{x:289,y:314,width:10,height:23},"ц":{x:4,y:345,width:11,height:23},"ч":{x:23,y:345,width:10,height:23},"ш":{x:41,y:345,width:16,height:23},"щ":{x:65,y:345,width:16,height:23},"ъ":{x:90,y:345,width:10,height:23},"ы":{x:108,y:345,width:14,height:23},"ь":{x:131,y:345,width:9,height:23},"э":{x:148,y:345,width:9,height:23},"ю":{x:165,y:345,width:15,height:23},"я":{x:189,y:345,width:9,height:23},"ѐ":{x:207,y:345,width:9,height:23},"ё":{x:224,y:345,width:9,height:23},"ђ":{x:241,y:345,width:10,height:23},"ѓ":{x:259,y:345,width:8,height:23},"є":{x:276,y:345,width:9,height:23},"ѕ":{x:293,y:345,width:8,height:23},"і":{x:309,y:345,width:5,height:23},"ї":{x:4,y:376,width:5,height:23},"ј":{x:17,y:376,width:5,height:23},"љ":{x:31,y:376,width:15,height:23},"њ":{x:54,y:376,width:15,height:23},"ћ":{x:78,y:376,width:10,height:23}},width:320,height:403},id:22}],TileMap:[{type:"TileMap",id:52}],TextField:[{id:56,name:"textField1",width:78,height:23,pos:{x:453,y:302},layerId:2,type:"TextField",text:"test string",font:{id:22,type:"Font"}}]}),r=n.repository.getObject(s.startSceneId,"Scene"),n.runScene(r)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r,o,a,s,u,h;e.__esModule=!0,e.Control2Dir=e.Control4Dir=e.Draggable=void 0,r=i(21),o=n(r),a=i(20),s=n(a),u=i(19),h=n(u),e.Draggable=o.default,e.Control4Dir=s.default,e.Control2Dir=h.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,h,c;e.__esModule=!0,e.default=void 0,s=i(8),u=n(s),h=i(4),n(h),c=function(t){function e(i){return r(this,e),o(this,t.call(this,i))}return a(e,t),e.prototype.manage=function(e,i){t.prototype.manage.call(this,e,i)},e.prototype.onUpdate=function(){var t=this.game.keyboard,e=this.parameters,i=this.gameObject;t.isPressed(t.KEY.LEFT)&&(i.rigidBody.vel.x=-e.velocity,this.go("Left")),t.isPressed(t.KEY.RIGHT)&&(i.rigidBody.vel.x=e.velocity,this.go("Right")),t.isJustReleased(t.KEY.LEFT)?this.stop():t.isJustReleased(t.KEY.RIGHT)&&this.stop()},e}(u.default),e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,h,c;e.__esModule=!0,e.default=void 0,s=i(8),u=n(s),h=i(4),n(h),c=function(t){function e(i){return r(this,e),o(this,t.call(this,i))}return a(e,t),e.prototype.manage=function(e,i){t.prototype.manage.call(this,e,i)},e.prototype.onUpdate=function(){var t=this.game.keyboard,e=this.parameters,i=this.gameObject;t.isPressed(t.KEY.UP)&&(i.rigidBody.vel.y=-e.velocity,this.go("Up")),t.isPressed(t.KEY.DOWN)&&(i.rigidBody.vel.y=e.velocity,this.go("Down")),t.isPressed(t.KEY.LEFT)&&(i.rigidBody.vel.x=-e.velocity,this.go("Left")),t.isPressed(t.KEY.RIGHT)&&(i.rigidBody.vel.x=e.velocity,this.go("Right")),t.isJustReleased(t.KEY.LEFT)?this.stop():t.isJustReleased(t.KEY.RIGHT)?this.stop():t.isJustReleased(t.KEY.UP)?this.stop():t.isJustReleased(t.KEY.DOWN)&&this.stop()},e}(u.default),e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(7),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this));return o.game=i,o.points={},o}return o(e,t),e._getEventId=function(t){return t.id||1},e.prototype.manage=function(t,i){var n,r=this;t.on("click",function(i){r.points[e._getEventId(i)]={mX:i.objectX,mY:i.objectY,target:t,preventDefault:function(){this.defaultPrevented=!0}}}),n=this.game.getCurrScene(),n.on("mouseDown",function(t){var i=e._getEventId(t),n=r.points[i];n&&(n.dragStartX=n.target.pos.x,n.dragStartY=n.target.pos.y)}),n.on("mouseMove",function(i){var n=e._getEventId(i),o=r.points[n];if(o){if(!o.dragStart&&(o.dragStart=!0,o.target.trigger("dragStart",o),o.defaultPrevented))return void delete r.points[n];t.pos.x=i.screenX-o.mX,t.pos.y=i.screenY-o.mY}}),n.on("mouseUp",function(i){var n=e._getEventId(i),o=r.points[n];o&&(o.dragStart&&(o.x=t.pos.x,o.y=t.pos.y,o.target.trigger("dragStop",o)),delete r.points[n])})},e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.objFollowTo=null,this.scene=null,this.pos={x:0,y:0},this.game=e}return t.prototype.followTo=function(t){this.objFollowTo=t,this.scene=this.game._currentScene,this.scene.tileMap.spriteSheet?(this.sceneWidth=this.scene.tileMap.spriteSheet._frameWidth*this.scene.tileMap.width,this.sceneHeight=this.scene.tileMap.spriteSheet._frameHeight*this.scene.tileMap.height):(this.sceneWidth=this.game.getCurrScene().width||this.game.width,this.sceneHeight=this.game.getCurrScene().height||this.game.height)},t.prototype.update=function(){var t,e,i,n,r,o,a;this.objFollowTo&&(t=this.pos,e=this.scene.tileMap.spriteSheet?this.scene.tileMap.spriteSheet._frameWidth:0,i=this.scene.tileMap.spriteSheet?this.scene.tileMap.spriteSheet._frameHeight:0,n=this.game.width,r=this.game.height,o=n/2,a=r/2,t.x=this.objFollowTo.pos.x-o,t.y=this.objFollowTo.pos.y-a,t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x>this.sceneWidth-n+e&&(t.x=this.sceneWidth-n+e),t.y>this.sceneHeight-r+i&&(t.y=this.sceneHeight-r+i))},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a;e.__esModule=!0,e.default=void 0,r=i(1),o=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(e){n(this,t),this.objectsCaptured={},this.game=e}return t.prototype.listenTo=function(t){var e=this;t.ontouchstart=function(t){for(var i=t.touches.length;i--;)e.resolveClick(t.touches[i])},t.onmousedown=function(t){0===t.button&&e.resolveClick(t)},t.ontouchend=t.ontouchcancel=function(t){for(var i=t.changedTouches.length;i--;)e.resolveMouseUp(t.changedTouches[i])},t.onmouseup=function(t){e.resolveMouseUp(t)},t.ontouchmove=function(t){for(var i=t.touches.length;i--;)e.resolveMouseMove(t.touches[i])},t.onmousemove=function(t){e.resolveMouseMove(t)},t.ondblclick=function(t){e.resolveDoubleClick(t)}},t.prototype.resolveScreenPoint=function(t){return{x:~~((t.clientX-this.game.pos.x)/this.game.scale.x)+this.game.camera.pos.x,y:~~((t.clientY-this.game.pos.y)/this.game.scale.y)+this.game.camera.pos.y,id:t.identifier||0}},t.prototype.triggerEvent=function(t,e){var i,n,r,a,s,u=this.game,h=u.getCurrScene();if(h){i=this.resolveScreenPoint(t);t:for(n=0;n<h.layers.length;n++)for(r=h.layers[h.layers.length-1-n],a=0;a<r.gameObjects.length;a++)if(s=r.gameObjects[a],o.default.isPointInRect(i,s.getRect())){s.trigger(e,{screenX:i.x,screenY:i.y,objectX:i.x-s.pos.x,objectY:i.y-s.pos.y,id:i.id});break t}return h.trigger(e,{screenX:i.x,screenY:i.y,id:i.id,target:h}),i}},t.prototype.resolveClick=function(t){window.canceled||(this.triggerEvent(t,"click"),this.triggerEvent(t,"mouseDown"))},t.prototype.resolveMouseMove=function(t){var e,i;(e=this.triggerEvent(t,"mouseMove"))&&(i=this.objectsCaptured[e.id],i&&i!==e.object&&(i.trigger("mouseLeave"),delete this.objectsCaptured[e.id]),e.object&&i!==e.object&&(e.object.trigger("mouseEnter"),this.objectsCaptured[e.id]=e.object))},t.prototype.resolveMouseUp=function(t){var e,i;(e=this.triggerEvent(t,"mouseUp"))&&(i=this.objectsCaptured[e.id])&&(i.trigger("mouseUp"),delete this.objectsCaptured[e.id])},t.prototype.resolveDoubleClick=function(t){var e=this.triggerEvent(t,"doubleClick");e&&delete this.objectsCaptured[e.id]},t}(),e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){n(this,t),this.events={}}return t.prototype._on=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},t.prototype.on=function(t,e){"string"==typeof t?this._on(t,e):t.splice&&t.forEach(function(t){this._on(t,e)})},t.prototype.trigger=function(t,e){var i,n=this.events[t];if(n)for(i=n.length;i--;)n[i](e)},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,h,c,f,l,p,d,y,m,g,w,b,_,x,v,O;e.__esModule=!0,e.default=void 0,i(29),u=i(31),h=n(u),c=i(40),f=n(c),l=i(23),p=n(l),d=i(4),y=n(d),m=i(28),g=n(m),w=i(9),b=i(13),_=n(b),x=i(22),v=n(x),O=(0,w.Transient)({repository:!0,camera:!0,keyboard:!0})(s=function(t){function e(i){var n,a;return r(this,e),n=o(this,t.call(this)),n._lastTime=null,n._currTime=null,n._currentScene=null,n._running=!1,n.scale={x:1,y:1},n.pos={x:0,y:0},n.gravityConstant=null,Object.keys(i).forEach(function(t){n[t]=i[t]}),a=Date.now(),n._lastTime=n._currTime=a,n._deltaTime=0,n.repository=new f.default(n),n._mouse=new p.default(n),n.keyboard=new y.default(n),n.keyboard.listenTo(),n._collider=new g.default(n),n.camera=new v.default(n),n}return a(e,t),e.prototype.getTime=function(){return this._lastTime},e.prototype.getDeltaTime=function(){return this._deltaTime},e.prototype.runScene=function(t){var n,r,o=this;this._renderer||(this._renderer=h.default.getRenderer(this),this._mouse.listenTo(this._renderer.container)),this._currentScene=t,n=i(54),r=""+t.name[0].toUpperCase()+t.name.substr(1)+"Behaviour",r&&t.setIndividualBehaviour(n[r]),t.layers.forEach(function(t){t.gameObjects.forEach(function(t){var e,i;t.setCommonBehaviour(),e=""+t.name[0].toUpperCase()+t.name.substr(1)+"Behaviour",(i=n[e])&&t.setIndividualBehaviour(i)})}),t.preload(function(){o._currentScene.onShow(),o._running||(e.update(o),o._running=!0)})},e.prototype.getCurrScene=function(){return this._currentScene},e.prototype.setCurrScene=function(t){this._currentScene=t},e.update=function(t){requestAnimationFrame(function(){e.update(t)}),t._lastTime=t._currTime,t._currTime=Date.now(),t._deltaTime=t._currTime-t._lastTime,t._currentScene&&t._currentScene.update(t._currTime,t._deltaTime),t.keyboard.update()},e}(_.default))||s,e.default=O},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){n(this,t),this.tasksResolved=0,this.tasks=[],this.tasksProgressById={},this.onResolved=null,this.onProgress=null}return t.prototype.size=function(){return this.tasks.length},t.prototype.calcProgress=function(){var t=0;return Object.keys(this.tasksProgressById).forEach(function(e){t+=this.tasksProgressById[e]||0}),t/this.tasks.length},t.prototype.addTask=function(t,e){this.tasks.push(t),this.tasksProgressById[e]=0},t.prototype.progressTask=function(t,e){this.tasksProgressById[t]=e,this.onProgress&&this.onProgress(this.calcProgress())},t.prototype.resolveTask=function(t){this.tasksResolved++,this.tasksProgressById[t]=1,this.tasks.length==this.tasksResolved?(this.onProgress&&this.onProgress(1),this.onResolved&&this.onResolved()):this.onProgress&&this.onProgress(this.calcProgress())},t.prototype.start=function(){0==this.size()&&this.onResolved(),this.tasks.forEach(function(t){t&&t()})},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s,u;e.__esModule=!0,e.default=void 0,o=i(42),a=n(o),s=i(1),n(s),u=function(){function t(e){r(this,t),this.vel=new a.default,this.game=e.game,this.gameObject=e}return t.prototype.update=function(t,e){var i,n,r;e>20&&(e=20),this.gameObject.rigidBody.static||(i=this.vel.x*e/1e3,n=this.vel.y*e/1e3,r=this.gameObject.pos.y+n,this.game._collider.move(this.gameObject,i,n),this.gameObject.rigidBody.onFloor=r>this.gameObject.pos.y,r!==this.gameObject.pos.y&&(this.vel.y=0),this.vel.y+=this.game.gravityConstant*e/1e3)},t}(),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o;e.__esModule=!0,e.default=void 0,r=i(1),o=function(){function t(e){n(this,t),this.game=e}return t.prototype.manage=function(t,e,i){var n,o,a,s,u,h;if(t.pos.x!==e||t.pos.y!==i){if(!t.rigid)return t.pos.x=e,void(t.pos.y=i);for(n=!1,o=this.game.getCurrScene().getAllGameObjects(),a=0,s=o.length;a<s;a++)u=o[a],t!==u&&(h=t.getRect(),h.x=e,h.y=i,(0,r.isRectIntersectRect)(h,u.getRect())&&(t.rigid&&u.rigid?(n=!0,t.trigger("collide",u)):t.trigger("overlap",u)));return n||(t.pos.x=e,t.pos.y=i),n}},t.prototype.overlapTest=function(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y},t.prototype.move=function(t,e,i){var n,r,o,a,s,u=this.game.getCurrScene().getAllGameObjects();for(n=0,r=u.length;n<r;n++)o={x:t.pos.x+e,y:t.pos.y,width:t.width,height:t.height},a={x:t.pos.x,y:t.pos.y+i,width:t.width,height:t.height},s=u[n].getRect(),t!==u[n]&&this.overlapTest(o,s)&&(e<0?e=s.x+s.width-t.pos.x:e>0&&(e=s.x-t.pos.x-t.width)),t!==u[n]&&this.overlapTest(a,s)&&(i<0?i=s.y+s.height-t.pos.y:i>0&&(i=s.y-t.pos.y-t.height));t.pos.x+=e,t.pos.y+=i},t}(),e.default=o},function(t,e,i){"use strict";Array.prototype.remove=function(t){for(var e=this.length;e--;)t(this[e],e)&&this.splice(e,1)},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,17)},Array.prototype.find||(Array.prototype.find=function(t){var e,i,n,r,o;if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(e=Object(this),i=e.length>>>0,n=arguments[1],r=void 0,o=0;o<i;o++)if(r=e[o],t.call(n,r,o,e))return r})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.renderableCache={},this.container=null,this.game=e}return t.prototype.onResize=function(){var t=this.container.height/this.container.width,e=window.innerHeight/window.innerWidth,i=void 0,n=void 0;e<t?(n=window.innerHeight,i=n/t):(i=window.innerWidth,n=i*t),this.game.scale.x=i/this.game.width,this.game.scale.y=n/this.game.height,this.game.pos.x=(window.innerWidth-i)/2,this.game.pos.y=(window.innerHeight-n)/2,this.container.style.width=i+"px",this.container.style.height=n+"px"},t.prototype.beginFrameBuffer=function(){},t.prototype.flipFrameBuffer=function(){},t.prototype.registerResize=function(){var t=this;this.onResize(),window.addEventListener("resize",function(){t.onResize()})},t.prototype.loadTextureInfo=function(t,e){},t.prototype.getTextureInfo=function(t){},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a;e.__esModule=!0,e.default=void 0,r=i(39),o=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(){n(this,t)}return t.getRenderer=function(t){if(!t)throw"RendererFactory::getRenderer: game param not specified";return new o.default(t)},t}(),e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a;e.__esModule=!0,e.default=void 0,r=i(11),o=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(e,i,r){n(this,t),this.gl=e,this.width=i,this.height=r,this.texture=new o.default(e),this.texture.setImage(null,i,r),this.glRenderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.glRenderBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i,r),this.glFrameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.glFrameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.getGlTexture(),0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.glRenderBuffer),this.texture.unbind(),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null)}return t.prototype.bind=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.glFrameBuffer),this.gl.viewport(0,0,this.width,this.height)},t.prototype.unbind=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)},t.prototype.getTexture=function(){return this.texture},t}(),e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a;e.__esModule=!0,e.default=void 0,r=i(10),o=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(){n(this,t),this.stack=[],this.restore()}return t.prototype.restore=function(){this.stack.pop(),this.stack.length<1&&(this.stack[0]=o.default.makeIdentity())},t.prototype.save=function(){this.stack.push(this.getCurrentMatrix())},t.prototype.getCurrentMatrix=function(){return this.stack[this.stack.length-1].slice()},t.prototype.setCurrentMatrix=function(t){return this.stack[this.stack.length-1]=t},t.prototype.translate=function(t,e,i){var n,r;void 0===i&&(i=0),n=o.default.makeTranslation(t,e,i),r=this.getCurrentMatrix(),this.setCurrentMatrix(o.default.matrixMultiply(n,r))},t.prototype.rotateZ=function(t){var e=o.default.makeZRotation(t),i=this.getCurrentMatrix();this.setCurrentMatrix(o.default.matrixMultiply(e,i))},t.prototype.rotateY=function(t){var e=o.default.makeYRotation(t),i=this.getCurrentMatrix();this.setCurrentMatrix(o.default.matrixMultiply(e,i))},t.prototype.scale=function(t,e,i){var n,r;void 0===i&&(i=1),n=o.default.makeScale(t,e,i),r=this.getCurrentMatrix(),this.setCurrentMatrix(o.default.matrixMultiply(n,r))},t}(),e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function t(){n(this,t),this.vertexArr=null,this.normalArr=null,this.texCoordArr=null,this.indexArr=null};e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s,u,h,c,f,l,p,d,y,m,g;e.__esModule=!0,e.default=void 0,o=i(12),a=n(o),s=i(2),u=n(s),h=i(3),c=n(h),f=i(5),l=n(f),p=i(6),d=n(p),y=i(16),m=n(y),g=function(){function t(e,i){r(this,t),this.gl=e,this.plane=new a.default,this.program=new u.default(e,[d.default,m.default]),this.posVertexBuffer=new c.default(e),this.posIndexBuffer=new l.default(e)}return t.prototype.bind=function(){this.program.bind(),this.posVertexBuffer.setData(this.plane.vertexArr,this.gl.FLOAT,2),this.program.bindBuffer(this.posVertexBuffer,"a_position"),this.posIndexBuffer.setData(this.plane.indexArr),this.posIndexBuffer.bind()},t.prototype.unbind=function(){this.posIndexBuffer.unbind()},t.prototype.setUniform=function(t,e){this.program.setUniform(t,e)},t.prototype.draw=function(){this.gl.drawElements(this.gl.TRIANGLE_STRIP,this.posIndexBuffer.getBufferLength(),this.gl.UNSIGNED_SHORT,0)},t}(),e.default=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s,u,h,c,f,l,p,d,y;e.__esModule=!0,e.default=void 0,o=i(2),a=n(o),s=i(3),u=n(s),h=i(5),c=n(h),f=i(55),l=n(f),p=i(57),d=n(p),y=function(){function t(e,i){r(this,t),this.gl=e,this.program=new a.default(e,[l.default,d.default]),this.posVertexBuffer=new u.default(e),this.texVertexBuffer=new u.default(e),this.normalBuffer=new u.default(e),this.posIndexBuffer=new c.default(e),this.program.bind()}return t.prototype.bind=function(t){var e,i;this.program.bind(),e=this.gl,i=this.program,this.posVertexBuffer.setData(t.vertexArr,e.FLOAT,3),i.bindBuffer(this.posVertexBuffer,"a_position"),this.texVertexBuffer.setData(t.texCoordArr,e.FLOAT,2),i.bindBuffer(this.texVertexBuffer,"a_texcoord"),this.normalBuffer.setData(t.normalArr,e.FLOAT,3),i.bindBuffer(this.normalBuffer,"a_normal"),this.posIndexBuffer.setData(t.indexArr),this.posIndexBuffer.bind()},t.prototype.unbind=function(){this.posIndexBuffer.unbind()},t.prototype.setUniform=function(t,e){this.program.setUniform(t,e)},t.prototype.draw=function(){this.gl.drawElements(this.gl.TRIANGLES,this.posIndexBuffer.getBufferLength(),this.gl.UNSIGNED_SHORT,0)},t}(),e.default=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s,u,h,c,f,l,p;e.__esModule=!0,e.default=void 0,o=i(2),a=n(o),s=i(3),u=n(s),h=i(6),c=n(h),f=i(16),l=n(f),p=function(){function t(e){r(this,t),this.gl=e,this.program=new a.default(e,[c.default,l.default]),this.posVertexBuffer=new u.default(e)}return t.prototype.bind=function(t){this.program.bind(),this.posVertexBuffer.setData(t,this.gl.FLOAT,2),this.program.bindBuffer(this.posVertexBuffer,"a_position")},t.prototype.unbind=function(){},t.prototype.setUniform=function(t,e){this.program.setUniform(t,e)},t.prototype.draw=function(){this.gl.drawArrays(this.gl.LINE_STRIP,0,this.posVertexBuffer.getBufferLength()/2)},t}(),e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s,u,h,c,f,l,p,d,y,m,g;e.__esModule=!0,e.default=void 0,o=i(12),a=n(o),s=i(2),u=n(s),h=i(3),c=n(h),f=i(5),l=n(f),p=i(6),d=n(p),y=i(56),m=n(y),g=function(){function t(e){r(this,t),this.gl=e,this.plane=new a.default,this.program=new u.default(e,[d.default,m.default]),this.posVertexBuffer=new c.default(e),this.posIndexBuffer=new l.default(e),this.texVertexBuffer=new c.default(e),this.bind(),this.setUniform("u_alpha",1)}return t.prototype.bind=function(){var t=this.gl;this.program.bind(),this.posIndexBuffer.setData(this.plane.indexArr),this.posIndexBuffer.bind(),this.posVertexBuffer.setData(this.plane.vertexArr,t.FLOAT,2),this.program.bindBuffer(this.posVertexBuffer,"a_position"),this.texVertexBuffer.setData(this.plane.texCoordArr,t.FLOAT,2),this.program.bindBuffer(this.texVertexBuffer,"a_texcoord")},t.prototype.unbind=function(){this.posIndexBuffer.unbind()},t.prototype.setUniform=function(t,e){this.program.setUniform(t,e)},t.prototype.draw=function(){this.gl.drawElements(this.gl.TRIANGLE_STRIP,this.posIndexBuffer.getBufferLength(),this.gl.UNSIGNED_SHORT,0)},t}(),e.default=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,h,c,f,l,p,d,y,m,g,w,b,_,x,v,O,E,T,j,R,P,F,M;e.__esModule=!0,e.default=void 0,s=i(30),u=n(s),h=i(38),c=n(h),f=i(35),l=n(f),p=i(37),d=n(p),y=i(36),m=n(y),g=i(32),w=n(g),b=i(33),_=n(b),x=i(10),v=n(x),O=i(11),E=n(O),T=function(t){return t.getContext("webgl",{alpha:!1})||t.getContext("experimental-webgl",{alpha:!1})||t.getContext("webkit-3d",{alpha:!1})||t.getContext("moz-webgl",{alpha:!1})},j=1e3,R=new _.default,P=function(t,e,i,n,r,o,a,s){var u=v.default.makeZToWMatrix(1),h=v.default.ortho(0,r,0,o,-j,j),c=v.default.makeScale(i*a,n*s,1),f=v.default.makeTranslation(t*a,e*s,0),l=v.default.matrixMultiply(c,f);return l=v.default.matrixMultiply(l,R.getCurrentMatrix()),l=v.default.matrixMultiply(l,h),l=v.default.matrixMultiply(l,u)},F=function(t,e,i,n,r,o){var a=v.default.makeScale(i/r,n/o,1),s=v.default.makeTranslation(t/r,e/o,0);return v.default.matrixMultiply(a,s)},M=function(t){function e(i){var n,a;return r(this,e),n=o(this,t.call(this,i)),a=document.createElement("canvas"),document.body.appendChild(a),a.setAttribute("width",i.width),a.setAttribute("height",i.height),n.container=a,n.matrixStack=R,n.registerResize(),n.currTex=null,n._init(),n}return a(e,t),e.prototype._init=function(){var t=T(this.container);this.gl=t,this.spriteRectDrawer=new c.default(t),this.colorRectDrawer=new l.default(t),this.polyLineDrawer=new d.default(t),this.modelDrawer=new m.default(t),this.frameBuffer=new w.default(t,this.game.width,this.game.height),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),t.enable(t.BLEND)},e.prototype.draw=function(t){var e,i;this.save(),e=t.width/2,i=t.height/2,this.translate(t.pos.x+e,t.pos.y+i),this.scale(t.scale.x,t.scale.y),this.rotateZ(t.angle),this.translate(-e,-i),this.drawImage(t.spriteSheet.resourcePath,t._sprPosX,t._sprPosY,t.width,t.height,0,0,t.width,t.height),this.restore()},e.prototype.drawImage=function(t,e,i,n,r,o,a){var s,u,h;this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),s=this.renderableCache[t],u=s.getSize().width,h=s.getSize().height,void 0===o&&(o=e),void 0===a&&(a=i),void 0===n&&(n=u),void 0===r&&(r=h),this.currTex!=s&&(s.bind(),this.currTex=s),this.spriteRectDrawer.bind(),this.spriteRectDrawer.setUniform("u_textureMatrix",F(e,i,n,r,u,h)),this.spriteRectDrawer.setUniform("u_matrix",P(o,a,n,r,this.game.width,this.game.height,1,1)),this.spriteRectDrawer.setUniform("u_alpha",1),this.spriteRectDrawer.draw(),this.spriteRectDrawer.unbind()},e.prototype.fillRect=function(t,e,i,n,r){},e.prototype.setAlpha=function(t){},e.prototype.save=function(){this.matrixStack.save()},e.prototype.scale=function(t,e){this.matrixStack.scale(t,e)},e.prototype.rotateZ=function(t){this.matrixStack.rotateZ(t)},e.prototype.rotateY=function(t){this.matrixStack.rotateY(t)},e.prototype.translate=function(t,e){this.matrixStack.translate(t,e)},e.prototype.restore=function(){this.matrixStack.restore()},e.prototype.lockRect=function(t){},e.prototype.unlockRect=function(){},e.prototype.clear=function(){this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},e.prototype.clearColor=function(t){var e=t.r,i=t.g,n=t.b;this.gl.clearColor(e/255,i/255,n/255,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},e.prototype.beginFrameBuffer=function(){this.save(),this.gl.viewport(0,0,this.game.width,this.game.height),this.frameBuffer.bind()},e.prototype.flipFrameBuffer=function(){this.currTex=null,this.restore(),this.save(),this.translate(0,this.game.height),this.scale(1,-1),this.frameBuffer.unbind(),this.gl.viewport(0,0,this.game.width,this.game.height),this.frameBuffer.getTexture().bind(),this.spriteRectDrawer.bind(),this.spriteRectDrawer.setUniform("u_matrix",P(0,0,this.game.width,this.game.height,this.game.width,this.game.height,1,1)),this.spriteRectDrawer.setUniform("u_textureMatrix",F(0,0,this.game.width,this.game.height,this.game.width,this.game.height)),this.spriteRectDrawer.setUniform("u_alpha",1),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.spriteRectDrawer.draw(),this.restore()},e.prototype.getError=function(){var t=this.gl.getError();return t==this.gl.NO_ERROR?0:t},e.prototype.loadTextureInfo=function(t,e){var i=this,n=new Image;n.src=t,n.onload=function(){var r=new E.default(i.gl);r.setImage(n),i.renderableCache[t]=r,e()}},e}(u.default),e.default=M},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a;e.__esModule=!0,e.default=void 0,r=i(43),o=function(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),a=function(){function t(e){n(this,t),this._game=e,this.reset()}return t.prototype.addDescription=function(t,e){this.descriptions[e]||(this.descriptions[e]=[]),this.descriptions[e].push(t)},t.prototype.setDescriptions=function(t){var e=this;Object.keys(t).forEach(function(i){t[i].forEach(function(t){e.addDescription(t,i)})})},t.prototype.getObject=function(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i=o[e],!(n=this.descriptions[e].find(function(e){return e.id==t})))throw'can not find object "'+e+'" with id '+t;return!r&&this.cache[n[t]]||(this.cache[t]=new i(this._game).fromJSON(n)),this.cache[t]},t.prototype.getFirst=function(t){var e=this.getArray(t);return e.length?e[0]:null},t.prototype.addObject=function(t){this.arrays[t.type]||(this.arrays[t.type]=[]),this.arrays[t.type].push(t),this.descriptions[t.type]||(this.descriptions[t.type]=[]),this.descriptions[t.type].push(t.toJSON())},t.prototype.updateObject=function(t,e){var i,n=t.toJSON(e),r=this.descriptions[t.type].findIndex(function(e){return e.id==t.id});this.descriptions[t.type][r]=n,(i=this.getObject(t.id,t.type,!0))&&i.fromJSON(n)},t.prototype.removeObject=function(t){var e=this.arrays[t.type].findIndex(function(e){return e.id===t.id});this.arrays[t.type].splice(e,1),this.descriptions[t.type]||(this.descriptions[t.type]=[]),e=this.descriptions[t.type].findIndex(function(e){return e.id===t.id}),this.descriptions[t.type].splice(e,1),delete this.cache[t.id]},t.prototype.getArray=function(t){var e,i=this;return this.arrays[t]?this.arrays[t]:(e=[],this.descriptions[t]||(this.descriptions[t]=[]),this.descriptions[t].forEach(function(n){e.push(i.getObject(n.id,t))}),this.arrays[t]=e)},t.prototype.reset=function(){this.descriptions={},this.arrays={},this.cache={}},t}(),e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a;e.__esModule=!0,e.default=void 0,r=i(1),o=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(e,i){n(this,t),this.propsToChange=[],this.startedTime=null,this.completed=!1,this.obj=e.target||i,this.progressFn=e.progress,this.completeFn=e.complete,this.easeFnName=e.ease||"linear",this.tweenTime=e.time||1e3,this.desc=this.normalizeDesc(e)}return t.prototype.normalizeDesc=function(t){var e,i=this;return t.from=t.from||{},t.to=t.to||{},e={},Object.keys(t.from).forEach(function(t){e[t]=!0}),Object.keys(t.to).forEach(function(t){e[t]=!0}),this.propsToChange=Object.keys(e),this.propsToChange.forEach(function(e){void 0===t.from[e]&&(t.from[e]=i.obj[e]),void 0===t.to[e]&&(t.to[e]=i.obj[e])}),t},t.prototype.update=function(t){var e,i,n;if(this.startedTime||(this.startedTime=t),!this.completed){if((e=t-this.startedTime)>this.tweenTime)return void this._complete();for(i=this.propsToChange.length;i--;)n=this.propsToChange[i],this.obj[n]=o.default.ease[this.easeFnName](e,this.desc.from[n],this.desc.to[n]-this.desc.from[n],this.tweenTime);this.progressFn&&this.progressFn(this.obj)}},t.prototype.progress=function(t){this.progressFn=t},t.prototype.reset=function(){this.startedTime=null,this.completed=!1},t.prototype._complete=function(){var t,e;if(!this.completed){for(t=this.propsToChange.length;t--;)e=this.propsToChange[t],this.obj[e]=this.desc.to[e];this.progressFn&&this.progressFn(this.obj),this.completeFn&&this.completeFn(this.obj),this.completed=!0}},t}(),e.default=a},function(t,e,i){"use strict";var n=function t(e,i){var n,r,o,a=e||0,s=i||0,u=0,h=0;this.x=0,this.y=0,n=function(){u=0===a?0:Math.atan(s/a),h=Math.sqrt(a*a+s*s)},r=function(){s=Math.sin(u)*h,a=Math.cos(u)*h},o=function(){s=Math.sin(u)*h,a=Math.cos(u)*h},this.setXY=function(t,e){a=t,s=e,n()},this.setX=function(t){a=t,n()},this.setY=function(t){s=t,n()},this.setAngle=function(t){u=t,r()},this.setNorm=function(t){h=t,o()},this.getXY=function(){return{x:a,y:s}},this.getX=function(){return a},this.getY=function(){return s},this.getAngle=function(){return u},this.reset=function(){a=0,s=0},this.addVec2=function(e){return new t(a+e.getX(),s+e.getY)},this.add=function(t,e){this.x+=t,this.y+=e},this.set=function(t,e){this.x=t,this.y=e},this.multiplyByScalar=function(e){return new t(a*e,s*e)},this.dotProduct=function(t){return a*t.getX()+s*t.getY()},this.getNorm=function(){return h},function(){n()}()};t.exports=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r,o,a,s,u,h,c,f,l,p,d,y,m,g,w,b,_,x,v,O,E,T,j,R;e.__esModule=!0,e.TileMap=e.TextField=e.Layer=e.Font=e.Sound=e.Scene=e.ParticleSystem=e.CommonBehaviour=e.GameObject=e.GameObjectProto=e.SpriteSheet=e.FrameAnimation=void 0,r=i(46),o=n(r),a=i(52),s=n(a),u=i(14),h=n(u),c=i(47),f=n(c),l=i(44),p=n(l),d=i(49),y=n(d),m=i(50),g=n(m),w=i(51),b=n(w),_=i(45),x=n(_),v=i(48),O=n(v),E=i(53),T=n(E),j=i(15),R=n(j),e.FrameAnimation=o.default,e.SpriteSheet=s.default,e.GameObjectProto=h.default,e.GameObject=f.default,e.CommonBehaviour=p.default,e.ParticleSystem=y.default,e.Scene=g.default,e.Sound=b.default,e.Font=x.default,e.Layer=O.default,e.TextField=T.default,e.TileMap=R.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="CommonBehaviour",o.parameters=[],o.description=null,o}return o(e,t),e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="Font",o.resourcePath=null,o.fontSize=12,o.fontFamily="Monospace",o.fontContext=null,o.fontColor={r:0,g:0,b:0},o}return o(e,t),e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="FrameAnimation",o._currFrame=0,o.frames=[],o.duration=1e3,o._gameObject=null,o._startTime=null,o.stop(),o}return o(e,t),e.prototype.revalidate=function(){this._timeForOneFrame=~~(this.duration/this.frames.length)},e.prototype.play=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{repeat:!0};this._isRepeat=t.repeat,this._gameObject._currFrameAnimation=this},e.prototype.stop=function(){this._gameObject&&(this._gameObject._currFrameAnimation=null),this._startTime=null,this._isRepeat=!0},e.prototype.update=function(t){var e,i;this._startTime||(this._startTime=t),e=(t-this._startTime)%this.duration,this._currFrame=~~(this.frames.length*e/this.duration),0==this._isRepeat&&this._currFrame>=this.frames.length-1&&this.stop(),(i=this._gameObject.currFrameIndex)!=this.frames[this._currFrame]&&this._gameObject.setFrameIndex(this.frames[this._currFrame])},e.prototype.nextFrame=function(){var t=this._currFrame;t++,t==this.frames.length&&(t=0),this._gameObject.setFrameIndex(this.frames[t]),this._currFrame=t},e.prototype.previousFrame=function(){var t=this._currFrame;t--,t<0&&(t=this.frames.length-1),this._gameObject.setFrameIndex(this.frames[t]),this._currFrame=t},e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u,h,c,f;e.__esModule=!0,e.default=void 0,a=i(14),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=i(18),h=function(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(u),c=function(){},f=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="GameObject",o.gameObjectProto=null,o}return o(e,t),e.prototype.revalidate=function(){var e,i=this,n={};for(e in this)this.hasOwnProperty(e)&&(n[e]=this[e]);Object.keys(this.gameObjectProto).forEach(function(t){void 0!==i.gameObjectProto[t]&&(i[t]=i.gameObjectProto[t])}),Object.keys(n).forEach(function(t){n[t]&&(n[t].splice&&0===n[t].length||(i[t]=n[t]))}),t.prototype.revalidate.call(this)},e.prototype.setIndividualBehaviour=function(t){var e=new t(this.game);e.game=this.game,e.gameObject=this,e.onCreate||(e.onCreate=c),e.onUpdate||(e.onUpdate=c),e.onDestroy||(e.onDestroy=c),this._individualBehaviour=e},e.prototype.setCommonBehaviour=function(){var t=this,e=[];this.commonBehaviour.forEach(function(i){var n,r=h[i.name];n=new r(t.game),n.manage(t,i.parameters),e.push(n)}),this.commonBehaviour=e},e}(s.default),e.default=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="Layer",o.gameObjects=[],o}return o(e,t),e.prototype.addGameObject=function(t){t._layer=this,this.gameObjects.push(t)},e.prototype.getAllSpriteSheets=function(){var t=[];return this.gameObjects.forEach(function(e){e.spriteSheet&&!t.find(function(t){return e.id===t.id})&&t.push(e.spriteSheet)}),t},e.prototype.onShow=function(){this.gameObjects.forEach(function(t){t.onShow()})},e.prototype.kill=function(t){this.gameObjects.remove(function(e){return e.id===t.id})},e.prototype.update=function(t,e){for(var i,n=this.gameObjects,r=n.length,o=r-1;r--;)(i=n[o-r])&&i.update(t,e)},e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u,h,c,f;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=i(1),h=function(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(u),c=function(t){return h.random(t.from,t.to)},f=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="ParticleSystem",o.gameObjectProto=null,o._particles=[],o.numOfParticlesToEmit={from:1,to:10},o.particleAngle={from:0,to:0},o.particleVelocity={from:1,to:100},o.particleLiveTime={from:100,to:1e3},o.emissionRadius=0,o}return o(e,t),e.prototype.revalidate=function(){this.particleAngle.to<this.particleAngle.from&&(this.particleAngle.to+=2*Math.PI)},e.find=function(t){},e.findAll=function(t){},e.prototype.emit=function(t,e){var i,n,r,o;for(i=0;i<c(this.numOfParticlesToEmit);i++)n=this.gameObjectProto.clone(),r=c(this.particleAngle),o=c(this.particleVelocity),n.vel.x=o*Math.cos(r),n.vel.y=o*Math.sin(r),n.pos.x=c({from:t-this.emissionRadius,to:t+this.emissionRadius}),n.pos.y=c({from:e-this.emissionRadius,to:e+this.emissionRadius}),n.liveTime=c(this.particleLiveTime),this._particles.push(n)},e.prototype.update=function(t,e){for(var i,n=this._particles,r=n.length,o=r-1;r--;)(i=n[o-r])&&(i._timeCreated||(i._timeCreated=t),t-i._timeCreated>i.liveTime&&this._particles.splice(this._particles.indexOf(i),1),i.update(t,e))},e}(s.default),e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,h,c,f,l;e.__esModule=!0,e.default=void 0,s=i(0),u=n(s),h=i(26),c=n(h),f=i(15),n(f),l=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.type="Scene",n.layers=[],n.useBG=!1,n.colorBG={r:255,g:255,b:255},n._tweenMovies=[],n._individualBehaviour=null,n.tileMap=null,n}return a(e,t),e.prototype.addTweenMovie=function(t){this._tweenMovies.push(t)},e.prototype.getAllGameObjects=function(){var t=[];return this.layers.forEach(function(e){t=t.concat(t,e.gameObjects)}),t},e.prototype.getAllSpriteSheets=function(){var t={};return this.layers.forEach(function(e){e.getAllSpriteSheets().forEach(function(e){t[e.id]=e})}),Object.keys(t).map(function(e){return t[e]})},e.prototype.preload=function(t){var e=this,i=this.getAllSpriteSheets().concat(this.game.repository.getArray("Font")),n=new c.default;n.onResolved=function(){t&&t()},i.forEach(function(t){n.addTask(function(){e.game._renderer.loadTextureInfo(t.resourcePath,function(){return n.resolveTask(t.id)})},t.id)}),n.start()},e.prototype.onShow=function(){this._individualBehaviour&&this._individualBehaviour.onCreate(),this.layers.forEach(function(t){t.onShow()})},e.prototype.setIndividualBehaviour=function(t){var e=new t(this.game);e.game=this.game,e.scene=this,this._individualBehaviour=e},e.prototype.update=function(t,e){var i,n,r;for(this.game._renderer.beginFrameBuffer(),this.useBG?this.game._renderer.clearColor(this.colorBG):this.game._renderer.clear(),i=this.layers,n=this.layers.length,r=n-1,this.game.camera.update(t),this.game._renderer.translate(-this.game.camera.pos.x,-this.game.camera.pos.y),this._individualBehaviour&&this._individualBehaviour.onUpdate();n--;)i[n-r].update(t,e);this.game.repository.getArray("ParticleSystem").forEach(function(i){i.update(t,e)}),this.game._renderer.flipFrameBuffer()},e.prototype.fadeIn=function(t,e){return this.tween(this,{to:{alpha:1}},t,e)},e.prototype.fadeOut=function(t,e){return this.tween(this,{to:{alpha:0}},t,e)},e.prototype.tween=function(t,e,i,n){},e.prototype._render=function(){},e.prototype.getTileAt=function(t,e){var i,n;return this.tileMap._spriteSheet?(i=~~(t/this.tileMap._spriteSheet._frameWidth),n=~~(e/this.tileMap._spriteSheet._frameHeight),this.tileMap.data[n]&&this.tileMap.data[n][i]):null},e.prototype.printText=function(t,e,i,n){i&&(i.substring||(i=JSON.stringify(i,null,4)),this.game.renderer.printText(t,e,i,n))},e.prototype.log=function(t){this.printText(0,0,t)},e}(u.default),e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="Sound",o.resourcePath="",o._gain=1,o._loop=!1,o}return o(e,t),e.find=function(t){},e.prototype.play=function(){},e.prototype.stop=function(){},e.prototype.pause=function(){throw"not implemented"},e.prototype.setGain=function(t,e,i){},e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="SpriteSheet",o.width=0,o.height=0,o.numOfFramesH=1,o.numOfFramesV=1,o._frameWidth=0,o._frameHeight=0,o._numOfFrames=0,o.resourcePath="",o}return o(e,t),e.prototype.revalidate=function(){this.numOfFramesH&&this.numOfFramesV&&(this._frameWidth=~~(this.width/this.numOfFramesH),this._frameHeight=~~(this.height/this.numOfFramesV),this._numOfFrames=this.numOfFramesH*this.numOfFramesV)},e.prototype.getFramePosX=function(t){return t%this.numOfFramesH*this._frameWidth},e.prototype.getFramePosY=function(t){return~~(t/this.numOfFramesH)*this._frameHeight},e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,s,u;e.__esModule=!0,e.default=void 0,a=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.type="TextField",o._chars=null,o.text="",o.font=null,o}return o(e,t),e.prototype.revalidate=function(){this.setFont(this.font)},e.prototype.setText=function(t){var e,i,n,r,o;for(t+="",this._chars=[],this.text=t,e=[{width:0}],i=0,this.height=this.font.fontContext.symbols[" "].height,n=0,r=t.length;n<r;n++)this._chars.push(t[n]),o=this.font.fontContext.symbols[t[n]]||this.font.fontContext.symbols[" "],"\n"===t[n]?(i++,this.height+=o.height,e[i]={width:0}):e[i].width+=o.width;this.width=Math.max.apply(Math,e.map(function(t){return t.width}))},e.prototype.setFont=function(t){this.font=t,this.setText(this.text)},e.prototype.update=function(e){t.prototype.update.call(this,e),this._render()},e.prototype._render=function(){var t=this,e=0,i=0;this._chars.forEach(function(n){var r=t.font.fontContext.symbols[n]||t.font.fontContext.symbols["?"];if("\n"===n)return e=0,void(i+=r.height);t.game._renderer.drawImage(t.font.resourcePath,r.x,r.y,r.width,r.height,t.pos.x+e,t.pos.y+i),e+=r.width})},e}(s.default),e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.DudeBehaviour=function(){function t(){n(this,t)}return t.prototype.onCreate=function(){this.game.camera.followTo(this.gameObject)},t.prototype.onUpdate=function(){this.game.keyboard.isJustPressed(this.game.keyboard.KEY.UP)&&this.gameObject.rigidBody.onFloor&&this.gameObject.rigidBody.vel.add(0,-340)},t.prototype.onDestroy=function(){},t}(),e.MainSceneBehaviour=function(){function t(){n(this,t)}return t.prototype.onCreate=function(){},t.prototype.onUpdate=function(){},t.prototype.onDestroy=function(){},t}(),e.PlatformBehaviour=function(){function t(){n(this,t)}return t.prototype.onCreate=function(){this.gameObject.rigidBody.static=!0},t.prototype.onUpdate=function(){},t.prototype.onDestroy=function(){},t}()},function(t,e){t.exports="attribute vec4 a_position;\nattribute vec2 a_texcoord;\nattribute vec3 a_normal;\n\nuniform mat4 u_modelMatrix;\nuniform mat4 u_projectionMatrix;\n\nvarying vec2 v_texcoord;\nvarying vec3 v_normal;\n\nvoid main() {\n\n  gl_Position = u_projectionMatrix * u_modelMatrix * a_position;\n  v_texcoord = a_texcoord;\n  v_normal = a_normal;\n}"},function(t,e){t.exports="precision mediump float;\n\nvarying vec2 v_texcoord;\n\nuniform sampler2D texture;\nuniform float u_alpha;\n\n\nvoid main() {\n    gl_FragColor = texture2D(texture, v_texcoord);\n    gl_FragColor.a *= u_alpha;\n}"},function(t,e){t.exports="precision highp float;\n\nvarying vec2 v_texcoord;\nvarying vec3 v_normal;\n\nuniform sampler2D texture;\nuniform float u_alpha;\nuniform mat4 u_modelMatrix;\n\n\nvoid main() {\n\n    vec3 lightDirection = normalize(vec3(-1,-1,1));\n    vec3 normalized = normalize((u_modelMatrix * vec4(v_normal,0)).xyz);\n    float lightFactor = max(0.5,dot(lightDirection,normalized));\n    gl_FragColor = texture2D(texture, v_texcoord);\n    gl_FragColor.rgb *= lightFactor;\n    gl_FragColor.a *= u_alpha;\n}"},function(t,e,i){t.exports=i(17)}]);